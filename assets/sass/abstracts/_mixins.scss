// ==========================================================================
// Mixins Library
// ==========================================================================
//
// This file contains all the mixins used throughout the application.
// Mixins are organized by type (layout, typography, etc.)
// Each mixin is documented with its purpose and parameters.

@use "sass:list";
@use "sass:math";
@use "functions" as fn;
@use "breakpoints" as bp;
@use "../vendor/vendor";

// ==========================================================================
// Visual Mixins
// ==========================================================================

/// Hide an element visually while keeping it accessible to screen readers
/// @description Creates a visually hidden element that remains accessible to assistive technologies
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// ==========================================================================
// Layout Mixins
// ==========================================================================

/// Flexbox layout
/// @description Sets up a flex container with common alignment properties
/// @param {string} $direction [row] - Flex direction (row, column, row-reverse, column-reverse)
/// @param {string} $justify [flex-start] - Justify content alignment
/// @param {string} $align [stretch] - Align items alignment
/// @param {string} $wrap [nowrap] - Flex wrap behavior
@mixin flex($direction: row, $justify: flex-start, $align: stretch, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

/// Grid System
/// @param {number} $gutters [1.5em] - Grid gutters size
/// @param {string} $suffix [''] - Breakpoint suffix (xlarge, large, medium, small, xsmall)
@mixin grid($gutters: 1.5em, $suffix: '') {
  // Row styles
  display: flex;
  flex-wrap: wrap;
  box-sizing: border-box;
  margin-top: $gutters * -1;
  margin-left: $gutters * -1;

  // Column base styles
  > * {
    box-sizing: border-box;
    padding: $gutters 0 0 $gutters;
  }

  // Column widths
  @if $suffix != '' {
    $suffix: '-' + $suffix;
  }

  @for $i from 1 through 12 {
    > .col-#{$i}#{$suffix} {
      width: #{100% / 12 * $i};
    }
  }
}

/// Clearfix
/// @description Ensures that a container includes all floated children
/// @example scss
///   .container {
///     @include clearfix;
///   }
@mixin clearfix {
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}

/// Center block
/// @description Centers a block element within its container using auto margins
@mixin center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/// Absolute Position
/// @description Positions an element absolutely with specified coordinates
/// @param {number} $top [null] - Top position
/// @param {number} $right [null] - Right position
/// @param {number} $bottom [null] - Bottom position
/// @param {number} $left [null] - Left position
@mixin position-absolute($top: null, $right: null, $bottom: null, $left: null) {
  position: absolute;
  top: $top;
  right: $right;
  bottom: $bottom;
  left: $left;
}

/// Absolute Center
/// @description Absolutely positions an element at the center of its container
/// @example scss
///   .centered {
///     @include absolute-center;
///   }
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/// Fixed Center
/// @description Fixes an element at the center of the viewport
/// @example scss
///   .modal {
///     @include fixed-center;
///   }
@mixin fixed-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ==========================================================================
// Text Mixins
// ==========================================================================

/// Text truncation with ellipsis
/// @description Truncates text with an ellipsis if it exceeds one line
/// @example scss
///   .truncated-text {
///     @include truncate;
///   }
@mixin truncate {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

// ==========================================================================
// Icon Mixins
// ==========================================================================

/// Icon styling
/// @description Adds an icon using Font Awesome with proper font smoothing
/// @param {string} $content [false] - Icon content (Font Awesome unicode)
/// @param {string} $category [regular] - Icon category (regular, solid, brands)
/// @param {string} $where [before] - Icon position (before, after)
@mixin icon($content: false, $category: regular, $where: before) {
  text-decoration: none;

  &:#{$where} {
    @if $content {
      content: $content;
    }

    @include vendor.vendor("font-smoothing", "antialiased");
    display: inline-block;
    font-style: normal;
    font-variant: normal;
    text-rendering: auto;
    line-height: 1;
    text-transform: none !important;

    @if ($category == brands) {
      font-family: "Font Awesome 5 Brands";
    } @else if ($category == solid) {
      font-family: "Font Awesome 5 Free";
      font-weight: 900;
    } @else {
      font-family: "Font Awesome 5 Free";
      font-weight: 400;
    }
  }
}

// ==========================================================================
// Button Mixins
// ==========================================================================

/// Button Base
/// @description Styles a basic button with standard properties
/// @example scss
///   .button {
///     @include button-base;
///   }
@mixin button-base {
  display: inline-block;
  padding: fn.spacing("small") fn.spacing("medium");
  border: none;
  border-radius: fn.layout("border-radius");
  font-family: fn.font-family("primary");
  font-weight: fn.font-weight("bold");
  text-decoration: none;
  cursor: pointer;
  transition: all fn.duration("standard") ease-in-out;
}

// ==========================================================================
// Spacing Mixins
// ==========================================================================

/// Padding
/// @param {number} $tb [0] - Top and bottom padding
/// @param {number} $lr [0] - Left and right padding
/// @param {list} $pad [(0, 0, 0, 0)] - Individual padding values
/// @param {boolean} $important [false] - Whether to add !important
@mixin padding($tb, $lr, $pad: (0, 0, 0, 0), $important: null) {
  @if $important {
    $important: "!important";
  }

  $x: 0.1em;

  @if math.unit(fn.spacing("element", "margin")) == "rem" {
    $x: 0.1rem;
  }

  padding: ($tb + list.nth($pad, 1)) ($lr + list.nth($pad, 2))
    max($x, $tb - fn.spacing("element", "margin") + list.nth($pad, 3)) ($lr + list.nth($pad, 4)) #{$important};
}

// ==========================================================================
// Header Styles
// ==========================================================================

/// Header Styles
/// @param {number} $size-header [null] - Header size
/// @param {string} $header-side [null] - Header side
/// @param {string} $translate-value [null] - Translate value
@mixin headerStyles($size-header, $header-side, $translate-value) {
  backface-visibility: hidden;
  transition: transform fn.duration("transition") ease;
  display: block;
  height: 100%;
  overflow-y: auto;
  position: fixed;
  top: 0;
  width: $size-header;
  z-index: fn.z("header");

  @if $header-side == "right" {
    transform: translateX($translate-value);
    right: 0;
  } @else {
    transform: translateX($translate-value);
    left: 0;
  }
}

// ==========================================================================
// Responsive Mixins
// ==========================================================================

/// Responsive breakpoint manager
/// @param {string} $breakpoint - Breakpoint name
/// @content styling within the media query
@mixin responsive($breakpoint) {
  @include bp.breakpoint($breakpoint) {
    @content;
  }
}
