var ro=n=>{throw TypeError(n)};var Qs=(n,t,e)=>t.has(n)||ro("Cannot "+e);var so=(n,t,e)=>t.has(n)?ro("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e);var ao=(n,t,e)=>(Qs(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const S=(n,t=1e4)=>(n=parseFloat(n+"")||0,Math.round((n+Number.EPSILON)*t)/t),gi=function(n){if(!(n&&n instanceof Element&&n.offsetParent))return!1;const t=n.scrollHeight>n.clientHeight,e=window.getComputedStyle(n).overflowY,i=e.indexOf("hidden")!==-1,o=e.indexOf("visible")!==-1;return t&&!i&&!o},gn=function(n,t=void 0){return!(!n||n===document.body||t&&n===t)&&(gi(n)?n:gn(n.parentElement,t))},wt=function(n){var t=new DOMParser().parseFromString(n,"text/html").body;if(t.childElementCount>1){for(var e=document.createElement("div");t.firstChild;)e.appendChild(t.firstChild);return e}return t.firstChild},Wi=n=>`${n||""}`.split(" ").filter(t=>!!t),xt=(n,t,e)=>{n&&Wi(t).forEach(i=>{n.classList.toggle(i,e||!1)})};let Jt=class{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}};const Qt={passive:!1};class ta{constructor(t,{start:e=()=>!0,move:i=()=>{},end:o=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=o;for(const r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,Qt),this.element.addEventListener("touchstart",this.onTouchStart,Qt),this.element.addEventListener("touchmove",this.onMove,Qt),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||t.button!==0)return;const e=new Jt(t);this.currentPointers.some(i=>i.id===e.id)||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new Jt(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map(r=>new Jt(r)):[new Jt(t)],o=[];for(const r of i){const s=this.currentPointers.findIndex(a=>a.id===r.id);s<0||(o.push(r),this.currentPointers[s]=r)}o.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&t.button!==0||(this.triggerPointerEnd(t,new Jt(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new Jt(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex(o=>o.id===e.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,Qt),this.element.removeEventListener("touchstart",this.onTouchStart,Qt),this.element.removeEventListener("touchmove",this.onMove,Qt),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function lo(n,t){return t?Math.sqrt(Math.pow(t.clientX-n.clientX,2)+Math.pow(t.clientY-n.clientY,2)):0}function co(n,t){return t?{clientX:(n.clientX+t.clientX)/2,clientY:(n.clientY+t.clientY)/2}:n}const mi=n=>typeof n=="object"&&n!==null&&n.constructor===Object&&Object.prototype.toString.call(n)==="[object Object]",et=(n,...t)=>{const e=t.length;for(let i=0;i<e;i++){const o=t[i]||{};Object.entries(o).forEach(([r,s])=>{const a=Array.isArray(s)?[]:{};n[r]||Object.assign(n,{[r]:a}),mi(s)?Object.assign(n[r],et(a,s)):Array.isArray(s)?Object.assign(n,{[r]:[...s]}):Object.assign(n,{[r]:s})})}return n},qn=function(n,t){return n.split(".").reduce((e,i)=>typeof e=="object"?e[i]:void 0,t)};class mn{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const e of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))e.startsWith("on")&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}setOptions(t){this.options=t?et({},this.constructor.defaults,t):{};for(const[e,i]of Object.entries(this.option("on")||{}))this.on(e,i)}option(t,...e){let i=qn(t,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...o){let r=qn(e,t);var s;typeof(s=r)!="string"||isNaN(s)||isNaN(parseFloat(s))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,t,...o));let a=qn(e,this.options);return a&&typeof a=="function"?r=a.call(this,this,t,...o,r):r===void 0&&(r=a),r===void 0?i:r}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,o,r)=>{let s="";return r?s=this.option(`${o[0]+o.toLowerCase().substring(1)}.l10n.${r}`):o&&(s=this.option(`l10n.${o}`)),s||(s=i),s});for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t=t.replace(/\{\{(.*?)\}\}/g,(i,o)=>o)}on(t,e){let i=[];typeof t=="string"?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach(o=>{let r=this.events.get(o);r||(this.events.set(o,[]),r=[]),r.includes(e)||r.push(e),this.events.set(o,r)})}off(t,e){let i=[];typeof t=="string"?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach(o=>{const r=this.events.get(o);if(Array.isArray(r)){const s=r.indexOf(e);s>-1&&r.splice(s,1)}})}emit(t,...e){[...this.events.get(t)||[]].forEach(i=>i(this,...e)),t!=="*"&&this.emit("*",t,...e)}}Object.defineProperty(mn,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(mn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Vi extends mn{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,o]of Object.entries(t)){const r=this.option(i),s=this.plugins[i];s||r===!1?s&&r===!1&&(s.detach(),delete this.plugins[i]):e.set(i,new o(this,r||{}))}for(const[i,o]of e)this.plugins[i]=o,o.attach()}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const i=this.plugins[e];i&&i.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var H;(function(n){n[n.Init=0]="Init",n[n.Error=1]="Error",n[n.Ready=2]="Ready",n[n.Panning=3]="Panning",n[n.Mousemove=4]="Mousemove",n[n.Destroy=5]="Destroy"})(H||(H={}));const At=["a","b","c","d","e","f"],kr={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},ea={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:kr},uo='<circle cx="25" cy="25" r="20"></circle>',Zi='<div class="f-spinner"><svg viewBox="0 0 50 50">'+uo+uo+"</svg></div>",tt=n=>n&&n!==null&&n instanceof Element&&"nodeType"in n,D=(n,t)=>{n&&Wi(t).forEach(e=>{n.classList.remove(e)})},P=(n,t)=>{n&&Wi(t).forEach(e=>{n.classList.add(e)})},je={a:1,b:0,c:0,d:1,e:0,f:0},na=1e5,Be=1e4,rt="mousemove",ho="drag",fo="content",st="auto";let Yn=null,Wn=null;class Zt extends Vi{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Wn===null&&(Wn=window.matchMedia("(hover: none)").matches),Wn}get isMobile(){return Yn===null&&(Yn=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Yn}get panMode(){return this.options.panMode!==rt||this.isTouchDevice?ho:rt}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return t===st?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of At){const e=t=="e"||t==="f"?1e-4:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var o;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:H.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},je)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},je)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Zt.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const s=wt(Zi);!t.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(s):this.spinner=((o=r.parentElement)===null||o===void 0?void 0:o.insertBefore(s,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:t}=this,e=this.cn(fo);let i=this.option(fo)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&P(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:t,container:e,state:i}=this;t&&(t.remove(),this.spinner=null),this.option("spinner")&&e.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===H.Init?this.enable():this.updateMetrics()}onError(){this.state!==H.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=H.Error,this.emit("error"))}getNextScale(t){const{fullScale:e,targetScale:i,coverScale:o,maxScale:r,minScale:s}=this;let a=s;switch(t){case"toggleMax":a=i-s<.5*(r-s)?r:s;break;case"toggleCover":a=i-s<.5*(o-s)?o:s;break;case"toggleZoom":a=i-s<.5*(e-s)?e:s;break;case"iterateZoom":let u=[1,e,r].sort((c,h)=>c-h),l=u.findIndex(c=>c>i+1e-5);a=u[l]||1}return a}attachObserver(){var t;const e=()=>{const{container:i,containerRect:o}=this;return Math.abs(o.width-i.getBoundingClientRect().width)>.1||Math.abs(o.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{e()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(t=this.resizeObserver)===null||t===void 0||t.observe(this.container)}detachObserver(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new ta(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(rt,this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),(t=this.pointerTracker)===null||t===void 0||t.stop(),this.pointerTracker=null,document.removeEventListener(rt,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const t=this.friction,e=this.option("maxVelocity");for(const i of At)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const t of At)t==="e"&&this.isBouncingX||t==="f"&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,o=i.e+t,r=i.f+e,s=this.getBounds(),{x:a,y:u}=s,l=a.min,c=a.max,h=u.min,f=u.max;let d=0,p=0;return l!==1/0&&o<l?d=l-o:c!==1/0&&o>c&&(d=c-o),h!==1/0&&r<h?p=h-r:f!==1/0&&r>f&&(p=f-r),Math.abs(d)<1e-4&&(d=0),Math.abs(p)<1e-4&&(p=0),Object.assign(Object.assign({},s),{xDiff:d,yDiff:p,inBounds:!d&&!p})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:o,fitHeight:r,fullWidth:s,fullHeight:a}=i;let u=s,l=a;if(this.option("zoom")||this.angle!==0){const c=!(e instanceof HTMLImageElement)&&(window.getComputedStyle(e).maxWidth==="none"||window.getComputedStyle(e).maxHeight==="none"),h=c?s:o,f=c?a:r,d=this.getMatrix(t),p=new DOMPoint(0,0).matrixTransform(d),g=new DOMPoint(0+h,0).matrixTransform(d),m=new DOMPoint(0+h,0+f).matrixTransform(d),v=new DOMPoint(0,0+f).matrixTransform(d),b=Math.abs(m.x-p.x),y=Math.abs(m.y-p.y),w=Math.abs(v.x-g.x),E=Math.abs(v.y-g.y);u=Math.max(b,w),l=Math.max(y,E)}return{contentWidth:u,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===rt||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:o,yDiff:r}=this.checkBounds(),s=this.option("maxVelocity");let a=this.velocity.e,u=this.velocity.f;o!==0?(this.isBouncingX=!0,o*a<=0?a+=.14*o:(a=.14*o,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),s&&(a=Math.max(Math.min(a,s),-1*s))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*u<=0?u+=.14*r:(u=.14*r,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),s&&(u=Math.max(Math.min(u,s),-1*s))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=u)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const i of At)this.current[i]=this.target[i]=e[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=H.Ready,this.emit("ready")}onClick(t){var e;t.type==="click"&&t.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((e=this.pointerTracker)===null||e===void 0||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const d=window.getSelection();return d&&d.type==="Range"})()&&!i.closest("button"))return;const o=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),s=o||r,a=s&&tt(s)?s.dataset:null;if(a){const d=a.panzoomChange,p=a.panzoomAction;if((d||p)&&t.preventDefault(),d){let g={};try{g=JSON.parse(d)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(g)}if(p)return void(this[p]&&this[p]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();if(i.closest("[data-fancybox]"))return;const u=this.content.getBoundingClientRect(),l=this.dragStart;if(l.time&&!this.canZoomOut()&&(Math.abs(u.x-l.x)>2||Math.abs(u.y-l.y)>2))return;this.dragStart.time=0;const c=d=>{this.option("zoom",t)&&d&&typeof d=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(d)&&typeof this[d]=="function"&&(t.preventDefault(),this[d]({event:t}))},h=this.option("click",t),f=this.option("dblClick",t);f?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",t),!t.defaultPrevented&&h&&c(h)):(this.emit("dblClick",t),t.defaultPrevented||c(f)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",t),!t.defaultPrevented&&h&&c(h))}addTrackingPoint(t){const e=this.trackingPoints.filter(i=>i.time>Date.now()-100);e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var o;if(this.option("touch",t)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===rt&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;const s=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(s.nodeName)||s.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(o=window.getSelection())===null||o===void 0||o.removeAllRanges()}if(t.type==="mousedown")["A","BUTTON"].includes(s.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(t,e,i){if(this.option("touch",t)===!1||!this.isDragging||e.length<2&&this.panOnlyZoomed&&S(this.targetScale)<=S(this.minScale)||(this.emit("touchMove",t),t.defaultPrevented))return;this.addTrackingPoint(e[0]);const{content:o}=this,r=co(i[0],i[1]),s=co(e[0],e[1]);let a=0,u=0;if(e.length>1){const y=o.getBoundingClientRect();a=r.clientX-y.left-.5*y.width,u=r.clientY-y.top-.5*y.height}const l=lo(i[0],i[1]),c=lo(e[0],e[1]);let h=l?c/l:1,f=s.clientX-r.clientX,d=s.clientY-r.clientY;this.dragOffset.x+=f,this.dragOffset.y+=d,this.dragOffset.time=Date.now()-this.dragStart.time;let p=S(this.targetScale)===S(this.minScale)&&this.option("lockAxis");if(p&&!this.lockedAxis)if(p==="xy"||p==="y"||t.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void t.preventDefault();const y=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=y>45&&y<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,f=0,d=0}else this.lockedAxis=p;if(gn(t.target,this.content)&&(p="x",this.dragOffset.y=0),p&&p!=="xy"&&this.lockedAxis!==p&&S(this.targetScale)===S(this.minScale))return;t.cancelable&&t.preventDefault(),this.container.classList.add(this.cn("isDragging"));const g=this.checkBounds(f,d);this.option("rubberband")?(this.isInfinite!=="x"&&(g.xDiff>0&&f<0||g.xDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*g.xDiff))),this.isInfinite!=="y"&&(g.yDiff>0&&d<0||g.yDiff<0&&d>0)&&(d*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*g.yDiff)))):(g.xDiff&&(f=0),g.yDiff&&(d=0));const m=this.targetScale,v=this.minScale,b=this.maxScale;m<.5*v&&(h=Math.max(h,v)),m>1.5*b&&(h=Math.min(h,b)),this.lockedAxis==="y"&&S(m)===S(v)&&(f=0),this.lockedAxis==="x"&&S(m)===S(v)&&(d=0),this.applyChange({originX:a,originY:u,panX:f,panY:d,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),gn(t.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==H.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var t;const e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const y of At)this.velocity[y]=0;this.target.e=this.current.e,this.target.f=this.current.f,D(this.container,"is-scaling"),D(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,o=i[0],r=i[i.length-1];let s=0,a=0,u=0;r&&o&&(s=r.clientX-o.clientX,a=r.clientY-o.clientY,u=r.time-o.time);const l=((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1;l!==1&&(s*=l,a*=l);let c=0,h=0,f=0,d=0,p=this.option("decelFriction");const g=this.targetScale;if(u>0){f=Math.abs(s)>3?s/(u/30):0,d=Math.abs(a)>3?a/(u/30):0;const y=this.option("maxVelocity");y&&(f=Math.max(Math.min(f,y),-1*y),d=Math.max(Math.min(d,y),-1*y))}f&&(c=f/(1/(1-p)-1)),d&&(h=d/(1/(1-p)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&S(g)===this.minScale)&&(c=f=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&S(g)===this.minScale)&&(h=d=0);const m=this.dragOffset.x,v=this.dragOffset.y,b=this.option("dragMinThreshold")||0;Math.abs(m)<b&&Math.abs(v)<b&&(c=h=0,f=d=0),(this.option("zoom")&&(g<this.minScale-1e-5||g>this.maxScale+1e-5)||e&&!c&&!h)&&(p=.35),this.applyChange({panX:c,panY:h,friction:p}),this.emit("decel",f,d,m,v)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(r,s){return Math.abs(s)>Math.abs(r)?s:r});const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===rt||t.defaultPrevented)return;const o=this.option("wheel");o==="pan"?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):o==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){t.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:t,target:e,content:i,contentRect:o}=this,r=Object.assign({},je);for(const m of At){const v=m=="e"||m==="f"?Be:na;r[m]=S(t[m],v),Math.abs(e[m]-t[m])<(m=="e"||m==="f"?.51:.001)&&(t[m]=e[m])}let{a:s,b:a,c:u,d:l,e:c,f:h}=r,f=`matrix(${s}, ${a}, ${u}, ${l}, ${c}, ${h})`,d=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(d=d.parentElement||d),d.style.transform===f)return;d.style.transform=f;const{contentWidth:p,contentHeight:g}=this.calculateContentDim();o.width=p,o.height=g,this.emit("afterTransform")}updateMetrics(t=!1){var e;if(!this||this.state===H.Destroy||this.isContentLoading)return;const i=Math.max(1,((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1),{container:o,content:r}=this,s=r instanceof HTMLImageElement,a=o.getBoundingClientRect(),u=getComputedStyle(this.container);let l=a.width*i,c=a.height*i;const h=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),f=l-(parseFloat(u.paddingLeft)+parseFloat(u.paddingRight)),d=c-h;this.containerRect={width:l,height:c,innerWidth:f,innerHeight:d};const p=parseFloat(r.dataset.width||"")||(A=>{let z=0;return z=A instanceof HTMLImageElement?A.naturalWidth:A instanceof SVGElement?A.width.baseVal.value:Math.max(A.offsetWidth,A.scrollWidth),z||0})(r),g=parseFloat(r.dataset.height||"")||(A=>{let z=0;return z=A instanceof HTMLImageElement?A.naturalHeight:A instanceof SVGElement?A.height.baseVal.value:Math.max(A.offsetHeight,A.scrollHeight),z||0})(r);let m=this.option("width",p)||st,v=this.option("height",g)||st;const b=m===st,y=v===st;typeof m!="number"&&(m=p),typeof v!="number"&&(v=g),b&&(m=p*(v/g)),y&&(v=g/(p/m));let w=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(w=w.parentElement||w);const E=w.getAttribute("style")||"";w.style.setProperty("transform","none","important"),s&&(w.style.width="",w.style.height=""),w.offsetHeight;const M=r.getBoundingClientRect();let C=M.width*i,T=M.height*i,L=C,$=T;C=Math.min(C,m),T=Math.min(T,v),s?{width:C,height:T}=((A,z,x,k)=>{const q=x/A,V=k/z,G=Math.min(q,V);return{width:A*=G,height:z*=G}})(m,v,C,T):(C=Math.min(C,m),T=Math.min(T,v));let _=.5*($-T),X=.5*(L-C);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:M.top-a.top+_,bottom:a.bottom-M.bottom+_,left:M.left-a.left+X,right:a.right-M.right+X,fitWidth:C,fitHeight:T,width:C,height:T,fullWidth:m,fullHeight:v}),w.style.cssText=E,s&&(w.style.width=`${C}px`,w.style.height=`${T}px`),this.setTransform(),t!==!0&&this.emit("refresh"),this.ignoreBounds||(S(this.targetScale)<S(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===H.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:t,contentHeight:e}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:o}=this,{fitWidth:r,fitHeight:s}=this.contentRect;let a=0,u=0,l=0,c=0;const h=this.option("infinite");if(h===!0||o&&h===o)a=-1/0,l=1/0,u=-1/0,c=1/0;else{let{containerRect:f,contentRect:d}=this,p=S(r*i,Be),g=S(s*i,Be),{innerWidth:m,innerHeight:v}=f;if(f.width===p&&(m=f.width),f.width===g&&(v=f.height),t>m){l=.5*(t-m),a=-1*l;let b=.5*(d.right-d.left);a+=b,l+=b}if(r>m&&t<m&&(a-=.5*(r-m),l-=.5*(r-m)),e>v){c=.5*(e-v),u=-1*c;let b=.5*(d.bottom-d.top);u+=b,c+=b}s>v&&e<v&&(a-=.5*(s-v),l-=.5*(s-v))}return{x:{min:a,max:l},y:{min:u,max:c}}}getBounds(){const t=this.option("bounds");return t!==st?t:this.calculateBounds()}updateControls(){const t=this,e=t.container,{panMode:i,contentRect:o,targetScale:r,minScale:s}=t;let a=s,u=t.option("click")||!1;u&&(a=t.getNextScale(u));let l=t.canZoomIn(),c=t.canZoomOut(),h=i===ho&&!!this.option("touch"),f=c&&h;if(h&&(S(r)<S(s)&&!this.panOnlyZoomed&&(f=!0),(S(o.width,1)>S(o.fitWidth,1)||S(o.height,1)>S(o.fitHeight,1))&&(f=!0)),S(o.width*r,1)<S(o.fitWidth,1)&&(f=!1),i===rt&&(f=!1),xt(e,this.cn("isDraggable"),f),!this.option("zoom"))return;let d=l&&S(a)>S(r),p=!d&&!f&&c&&S(a)<S(r);xt(e,this.cn("canZoomIn"),d),xt(e,this.cn("canZoomOut"),p);for(const g of e.querySelectorAll("[data-panzoom-action]")){let m=!1,v=!1;switch(g.dataset.panzoomAction){case"zoomIn":l?m=!0:v=!0;break;case"zoomOut":c?m=!0:v=!0;break;case"toggleZoom":case"iterateZoom":l||c?m=!0:v=!0;const b=g.querySelector("g");b&&(b.style.display=l?"":"none")}m?(g.removeAttribute("disabled"),g.removeAttribute("tabindex")):v&&(g.setAttribute("disabled",""),g.setAttribute("tabindex","-1"))}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:o=this.option("friction"),angle:r=0,originX:s=0,originY:a=0,flipX:u=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==H.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:r,originX:s,originY:a,friction:o,flipX:u,flipY:l,ignoreBounds:c})}applyChange({panX:t=0,panY:e=0,scale:i=1,angle:o=0,originX:r=-this.current.e,originY:s=-this.current.f,friction:a=this.option("friction"),flipX:u=!1,flipY:l=!1,ignoreBounds:c=!1,bounce:h=this.option("bounce")}){const f=this.state;if(f===H.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=c;const{current:d}=this,p=d.e,g=d.f,m=this.getMatrix(this.target);let v=new DOMMatrix().translate(p,g).translate(r,s).translate(t,e);if(this.option("zoom")){if(!c){const b=this.targetScale,y=this.minScale,w=this.maxScale;b*i<y&&(i=y/b),b*i>w&&(i=w/b)}v=v.scale(i)}v=v.translate(-r,-s).translate(-p,-g).multiply(m),o&&(v=v.rotate(o)),u&&(v=v.scale(-1,1)),l&&(v=v.scale(1,-1));for(const b of At)b!=="e"&&b!=="f"&&(v[b]>this.minScale+1e-5||v[b]<this.minScale-1e-5)?this.target[b]=v[b]:this.target[b]=S(v[b],Be);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===rt||h===!1)&&!c&&this.clampTargetBounds(),f===H.Init?this.animate():this.isResting||(this.state=H.Panning,this.requestTick())}stop(t=!1){if(this.state===H.Init||this.state===H.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const i of At)this.velocity[i]=0,t==="current"?this.current[i]=this.target[i]:t==="target"&&(this.target[i]=this.current[i]);this.setTransform(),D(this.container,"is-scaling"),D(this.container,"is-animating"),this.isTicking=!1,this.state=H.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),P(this.container,"is-animating"),this.isScaling&&P(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(t,e=this.option("mouseMoveFriction")){if(this.pmme=t,this.panMode!==rt||!t||S(this.targetScale)<=S(this.minScale))return;this.emit("mouseMove",t);const{container:i,containerRect:o,contentRect:r}=this,s=o.width,a=o.height,u=i.getBoundingClientRect(),l=(t.clientX||0)-u.left,c=(t.clientY||0)-u.top;let{contentWidth:h,contentHeight:f}=this.calculateContentDim(this.target);const d=this.option("mouseMoveFactor");d>1&&(h!==s&&(h*=d),f!==a&&(f*=d));let p=.5*(h-s)-l/s*100/100*(h-s);p+=.5*(r.right-r.left);let g=.5*(f-a)-c/a*100/100*(f-a);g+=.5*(r.bottom-r.top),this.applyChange({panX:p-this.target.e,panY:g-this.target.f,friction:e})}zoomWithWheel(t){if(this.state===H.Destroy||this.state===H.Init)return;const e=Date.now();if(e-this.pwt<45)return void t.preventDefault();this.pwt=e;var i=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(l,c){return Math.abs(c)>Math.abs(l)?c:l});const o=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:s,minScale:a}=this;let u=r*(100+45*o)/100;S(u)<S(a)&&S(r)<=S(a)?(this.cwd+=Math.abs(o),u=a):S(u)>S(s)&&S(r)>=S(s)?(this.cwd+=Math.abs(o),u=s):(this.cwd=0,u=Math.max(Math.min(u,s),a)),this.cwd>this.option("wheelLimit")||(t.preventDefault(),S(u)!==S(r)&&this.zoomTo(u,{event:t}))}canZoomIn(){return this.option("zoom")&&(S(this.contentRect.width,1)<S(this.contentRect.fitWidth,1)||S(this.targetScale)<S(this.maxScale))}canZoomOut(){return this.option("zoom")&&S(this.targetScale)>S(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.getNextScale("toggleZoom"),t)}toggleMax(t){this.zoomTo(this.getNextScale("toggleMax"),t)}toggleCover(t){this.zoomTo(this.getNextScale("toggleCover"),t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e=st,originX:i=st,originY:o=st,event:r}={}){if(this.isContentLoading||this.state===H.Destroy)return;const{targetScale:s,fullScale:a,maxScale:u,coverScale:l}=this;if(this.stop(),this.panMode===rt&&(r=this.pmme||r),r||i===st||o===st){const h=this.content.getBoundingClientRect(),f=this.container.getBoundingClientRect(),d=r?r.clientX:f.left+.5*f.width,p=r?r.clientY:f.top+.5*f.height;i=d-h.left-.5*h.width,o=p-h.top-.5*h.height}let c=1;typeof t=="number"?c=t:t==="full"?c=a:t==="cover"?c=l:t==="max"?c=u:t==="fit"?c=1:t==="next"&&(c=this.getNextScale("iterateZoom")),c=c/s||1,e=e===st?c>1?.15:.25:e,this.applyChange({scale:c,originX:i,originY:o,friction:e}),r&&this.panMode===rt&&this.panWithMouse(r,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const o=t.classList.contains(e);o?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(o?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:o,d:r,e:s,f:a}=t;return new DOMMatrix([e,i,o,r,s,a])}reset(t){if(this.state!==H.Init&&this.state!==H.Destroy){this.stop("current");for(const e of At)this.target[e]=je[e];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=t===void 0?this.option("friction"):t,this.state=H.Panning,this.requestTick())}}destroy(){this.stop(),this.state=H.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const o of Object.values(i))t.classList.remove(o+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(Zt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ea}),Object.defineProperty(Zt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const po=function(n,t){let e=!0;return(...i)=>{e&&(e=!1,n(...i),setTimeout(()=>{e=!0},t))}},go=(n,t)=>{let e=[];return n.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||t&&!i.matches(t)||e.push(i)}),e},ia={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var Y;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Destroy=2]="Destroy"})(Y||(Y={}));const Vn=n=>{if(typeof n=="string"||n instanceof HTMLElement)n={html:n};else{const t=n.thumb;t!==void 0&&(typeof t=="string"&&(n.thumbSrc=t),t instanceof HTMLImageElement&&(n.thumbEl=t,n.thumbElSrc=t.src,n.thumbSrc=t.src),delete n.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},n)},oa=(n={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},n);class gt extends mn{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}const ra={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class Rr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;if(!t){t=document.createElement("ul"),P(t,this.cn("list")),t.setAttribute("role","tablist");const e=this.instance.container;e.appendChild(t),P(e,this.cn("hasDots")),this.list=t}return t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),o=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(e<i||e>o)return void this.cleanup();const s=typeof r=="number"&&e>5&&e>=r,a=!this.list||this.isDynamic!==s||this.list.children.length!==e;a&&this.cleanup();const u=this.build();if(xt(u,this.cn("isDynamic"),!!s),a)for(let h=0;h<e;h++)u.append(this.createItem(h));let l,c=0;for(const h of[...u.children]){const f=c===this.instance.page;f&&(l=h),xt(h,this.cn("isCurrent"),f),(t=h.children[0])===null||t===void 0||t.setAttribute("aria-selected",f?"true":"false");for(const d of["isBeforePrev","isPrev","isNext","isAfterNext"])D(h,this.cn(d));c++}if(l=l||u.firstChild,s&&l){const h=l.previousElementSibling,f=h&&h.previousElementSibling;P(h,this.cn("isPrev")),P(f,this.cn("isBeforePrev"));const d=l.nextElementSibling,p=d&&d.nextElementSibling;P(d,this.cn("isNext")),P(p,this.cn("isAfterNext"))}this.isDynamic=s}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const o=wt(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(o),(e=i.children[0])===null||e===void 0||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,D(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Rr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ra});const Xe="disabled",qe="next",mo="prev";class zr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let o=this.prev,r=this.next;o&&r&&(o.removeAttribute(Xe),r.removeAttribute(Xe),t.isInfinite||(i<=0&&o.setAttribute(Xe,""),i>=e-1&&r.setAttribute(Xe,"")))}addBtn(t){var e;const i=this.instance,o=document.createElement("button");o.setAttribute("tabindex","0"),o.setAttribute("title",i.localize(`{{${t.toUpperCase()}}}`)),P(o,this.cn("button")+" "+this.cn(t===qe?"isNext":"isPrev"));const r=i.isRTL?t===qe?mo:qe:t;var s;return o.innerHTML=i.localize(this.option(`${r}Tpl`)),o.dataset[`carousel${s=t,s?s.match("^[a-z]")?s.charAt(0).toUpperCase()+s.substring(1):s:""}`]="true",(e=this.container)===null||e===void 0||e.appendChild(o),o}build(){const t=this.instance.container,e=this.cn("container");let{container:i,prev:o,next:r}=this;i||(i=t.querySelector("."+e),this.isDom=!!i),i||(i=document.createElement("div"),P(i,e),t.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(qe)),this.next=r,o||(o=i.querySelector("[data-carousel-prev]")),o||(o=this.addBtn(mo)),this.prev=o}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(zr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Ir extends gt{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){const{nav:t,target:e}=this;t&&e&&(t.options.initialSlide=e.options.initialPage,t.state===Y.Ready?this.onNavReady(t):t.on("ready",this.onNavReady),e.state===Y.Ready?this.onTargetReady(e):e.on("ready",this.onTargetReady))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var o,r;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const s=i.target,{nav:a,target:u}=this;if(!a||!u||!s)return;const l=s.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,h=u.getPageForSlide(c),f=a.getPageForSlide(c);a.slideTo(f),u.slideTo(h,{friction:((r=(o=this.nav)===null||o===void 0?void 0:o.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t,e;const{target:i,nav:o}=this;if(!i||!o||o.state!==Y.Ready||i.state!==Y.Ready)return;const r=(e=(t=i.pages[i.page])===null||t===void 0?void 0:t.slides[0])===null||e===void 0?void 0:e.index,s=o.getPageForSlide(r);this.markSelectedSlide(r),o.slideTo(s,o.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(t){const e=this.nav;e&&e.state===Y.Ready&&(this.selectedIndex=t,[...e.slides].map(i=>{i.el&&i.el.classList[i.index===t?"add":"remove"]("is-nav-selected")}))}attach(){const t=this;let e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){const t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}}Object.defineProperty(Ir,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const sa={Navigation:zr,Dots:Rr,Sync:Ir},Ye="animationend",vo="isSelected",We="slide";class Wt extends Vi{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Y.Ready}get isInfinite(){let t=!1;const{contentDim:e,viewportDim:i,pages:o,slides:r}=this,s=r[0];return o.length>=2&&s&&e+s.dim>=i&&(t=this.option("infinite")),t}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Y.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof t=="string"&&(t=document.querySelector(t)),!t||!tt(t))throw new Error("No Element found");this.container=t,this.slideNext=po(this.slideNext.bind(this),150),this.slidePrev=po(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var t,e;const i=et({},Wt.defaults,this.userOptions);let o="";const r=i.breakpoints;if(r&&mi(r))for(const[s,a]of Object.entries(r))window.matchMedia(s).matches&&mi(a)&&(o+=s,et(i,a));o===this.bp&&this.state!==Y.Init||(this.bp=o,this.state===Y.Ready&&(i.initialSlide=((e=(t=this.pages[this.page])===null||t===void 0?void 0:t.slides[0])===null||e===void 0?void 0:e.index)||0),this.state!==Y.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Y.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Wt.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Y.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");P(t,this.cn("container")),xt(t,e.isLTR,!this.isRTL),xt(t,e.isRTL,this.isRTL),xt(t,e.isVertical,!this.isHorizontal),xt(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),P(i,e.viewport),i.append(...go(t,`.${e.slide}`)),t.prepend(i)),i.addEventListener("scroll",this.onScroll);let o=this.option("track")||t.querySelector(`.${e.track}`);o||(o=document.createElement("div"),P(o,e.track),o.append(...Array.from(i.childNodes))),o.setAttribute("aria-live","polite"),i.contains(o)||i.prepend(o),this.viewport=i,this.track=o,this.emit("initLayout")}initSlides(){const{track:t}=this;if(!t)return;const e=[...this.slides],i=[];[...go(t,`.${this.cn(We)}`)].forEach(o=>{if(tt(o)){const r=Vn({el:o,isDom:!0,index:this.slides.length});i.push(r)}});for(let o of[...this.option("slides",[])||[],...e])i.push(Vn(o));this.slides=i;for(let o=0;o<this.slides.length;o++)this.slides[o].index=o;for(const o of i)this.emit("beforeInitSlide",o,o.index),this.emit("initSlide",o,o.index);this.emit("initSlides")}setInitialPage(){const t=this.option("initialSlide");this.page=typeof t=="number"?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:t,pages:e,isHorizontal:i}=this;if(!t||!e.length)return;let o=this.page;e[o]||(this.page=o=0);const r=(e[o].pos||0)*(this.isRTL&&i?1:-1),s=i?`${r}px`:"0",a=i?"0":`${r}px`;t.style.transform=`translate3d(${s}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new Zt(this.viewport,et({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:e=>!(this.pages.length<2&&!e.options.infinite),bounds:()=>this.getBounds(),maxVelocity:e=>Math.abs(e.target[this.axis]-e.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",(e,i,...o)=>{this.emit(`Panzoom.${i}`,e,...o)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this;let o=this.option("slidesPerPage");o=(o==="auto"||e<=i)&&this.option("fill")!==!1?1/0:parseFloat(o+"");let r=0,s=0,a=0;for(const u of this.slides)(!t.length||s+u.dim-i>.05||a>=o)&&(t.push(oa()),r=t.length-1,s=0,a=0),t[r].slides.push(u),s+=u.dim+u.gap,a++;return t}processPages(){const t=this.pages,{contentDim:e,viewportDim:i,isInfinite:o}=this,r=this.option("center"),s=this.option("fill"),a=s&&r&&e>i&&!o;if(t.forEach((c,h)=>{var f;c.index=h,c.pos=((f=c.slides[0])===null||f===void 0?void 0:f.pos)||0,c.dim=0;for(const[d,p]of c.slides.entries())c.dim+=p.dim,d<c.slides.length-1&&(c.dim+=p.gap);a&&c.pos+.5*c.dim<.5*i?c.pos=0:a&&c.pos+.5*c.dim>=e-.5*i?c.pos=e-i:r&&(c.pos+=-.5*(i-c.dim))}),t.forEach(c=>{s&&!o&&e>i&&(c.pos=Math.max(c.pos,0),c.pos=Math.min(c.pos,e-i)),c.pos=S(c.pos,1e3),c.dim=S(c.dim,1e3),Math.abs(c.pos)<=.1&&(c.pos=0)}),o)return t;const u=[];let l;return t.forEach(c=>{const h=Object.assign({},c);l&&h.pos===l.pos?(l.dim+=h.dim,l.slides=[...l.slides,...h.slides]):(h.index=u.length,l=h,u.push(h))}),u}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(t){var e,i;const o=this.isHorizontal?"width":"height";let r=0,s=0,a=t.el;const u=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[o]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),P(a,this.cn(We)+" "+t.class+" "+t.customClass),r)a.style[o]=`${r}px`,a.style[o==="width"?"height":"width"]="";else{u&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[o]*Math.max(1,((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1);let c=a[this.isHorizontal?"offsetWidth":"offsetHeight"];c-1>r&&(r=c)}const l=getComputedStyle(a);return l.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(l.paddingLeft)||0,r+=parseFloat(l.paddingRight)||0):(r+=parseFloat(l.paddingTop)||0,r+=parseFloat(l.paddingBottom)||0)),s=parseFloat(l[this.isHorizontal?"marginRight":"marginBottom"])||0,u?(i=a.parentElement)===null||i===void 0||i.removeChild(a):t.el||a.remove(),{dim:S(r,1e3),gap:S(s,1e3)}}getBounds(){const{isInfinite:t,isRTL:e,isHorizontal:i,pages:o}=this;let r={min:0,max:0};if(t)r={min:-1/0,max:1/0};else if(o.length){const s=o[0].pos,a=o[o.length-1].pos;r=e&&i?{min:s,max:a}:{min:-1*a,max:-1*s}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let t,{isHorizontal:e,isRTL:i,isInfinite:o,viewport:r,viewportDim:s,contentDim:a,page:u,pages:l,slides:c,panzoom:h}=this,f=0,d=0,p=0,g=0;h?g=-1*h.current[this.axis]:l[u]&&(g=l[u].pos||0),t=e?i?"right":"left":"top",i&&e&&(g*=-1);for(const y of c){const w=y.el;w?(t==="top"?(w.style.right="",w.style.left=""):w.style.top="",y.index!==f?w.style[t]=d===0?"":`${S(d,1e3)}px`:w.style[t]="",p+=y.dim+y.gap,f++):d+=y.dim+y.gap}if(o&&p&&r){let y=getComputedStyle(r),w="padding",E=e?"Right":"Bottom",M=parseFloat(y[w+(e?"Left":"Top")]);g-=M,s+=M,s+=parseFloat(y[w+E]);for(const C of c)C.el&&(S(C.pos)<S(s)&&S(C.pos+C.dim+C.gap)<S(g)&&S(g)>S(a-s)&&(C.el.style[t]=`${S(d+p,1e3)}px`),S(C.pos+C.gap)>=S(a-s)&&S(C.pos)>S(g+s)&&S(g)<S(s)&&(C.el.style[t]=`-${S(p,1e3)}px`))}let m,v,b=[...this.inTransition];if(b.length>1&&(m=l[b[0]],v=l[b[1]]),m&&v){let y=0;for(const w of c)w.el?this.inTransition.has(w.index)&&m.slides.indexOf(w)<0&&(w.el.style[t]=`${S(y+(m.pos-v.pos),1e3)}px`):y+=w.dim+w.gap}}createSlideEl(t){const{track:e,slides:i}=this;if(!e||!t||t.el&&t.el.parentNode)return;const o=t.el||document.createElement("div");P(o,this.cn(We)),P(o,t.class),P(o,t.customClass);const r=t.html;r&&(r instanceof HTMLElement?o.appendChild(r):o.innerHTML=t.html+"");const s=[];i.forEach((c,h)=>{c.el&&s.push(h)});const a=t.index;let u=null;s.length&&(u=i[s.reduce((c,h)=>Math.abs(h-a)<Math.abs(c-a)?h:c)]);const l=u&&u.el&&u.el.parentNode?u.index<t.index?u.el.nextSibling:u.el:null;e.insertBefore(o,e.contains(l)?l:null),t.el=o,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=t==null?void 0:t.el;if(!i||!i.parentNode)return;const o=this.cn(vo);if(i.classList.contains(o)&&(D(i,o),this.emit("unselectSlide",t)),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",t);const r=new CustomEvent(Ye);i.dispatchEvent(r),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){var i,o,r,s;if(!e)return!1;const a=this.page,{pages:u,panzoom:l}=this;t=parseInt((t||0).toString())||0;const c=this.getPageFromIndex(t);if(!l||!u[c]||u.length<2||Math.abs((((o=(i=u[a])===null||i===void 0?void 0:i.slides[0])===null||o===void 0?void 0:o.dim)||0)-this.viewportDim)>1)return!1;let h=t>a?1:-1;this.isInfinite&&(a===0&&t===u.length-1&&(h=-1),a===u.length-1&&t===0&&(h=1));const f=u[c].pos*(this.isRTL?1:-1);if(a===c&&Math.abs(f-l.target[this.axis])<1)return!1;this.clearTransitions();const d=l.isResting;P(this.container,this.cn("inTransition"));const p=((r=u[a])===null||r===void 0?void 0:r.slides[0])||null,g=((s=u[c])===null||s===void 0?void 0:s.slides[0])||null;this.inTransition.add(g.index),this.createSlideEl(g);let m=p.el,v=g.el;d||e===We||(e="fadeFast",m=null);const b=this.isRTL?"next":"prev",y=this.isRTL?"prev":"next";return m&&(this.inTransition.add(p.index),p.transition=e,m.addEventListener(Ye,this.onAnimationEnd),m.classList.add(`f-${e}Out`,`to-${h>0?y:b}`)),v&&(g.transition=e,v.addEventListener(Ye,this.onAnimationEnd),v.classList.add(`f-${e}In`,`from-${h>0?b:y}`)),l.current[this.axis]=f,l.target[this.axis]=f,l.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const o of this.slides)i.has(o)?t.add(o):e.add(o);for(const o of this.inTransition)t.add(this.slides[o]);for(const o of t)this.createSlideEl(o),this.lazyLoadSlide(o);for(const o of e)t.has(o)||this.removeSlideEl(o);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn(vo);if(e)for(const i of this.slides){const o=i.el;o&&(o.dataset.index=`${i.index}`,o.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?o.removeAttribute(t):o.setAttribute(t,"true"):this.pages[this.page].slides.includes(i)?(o.classList.contains(e)||(P(o,e),this.emit("selectSlide",i)),o.removeAttribute(t)):(o.classList.contains(e)&&(D(o,e),this.emit("unselectSlide",i)),o.setAttribute(t,"true")))}}flipInfiniteTrack(){const{axis:t,isHorizontal:e,isInfinite:i,isRTL:o,viewportDim:r,contentDim:s}=this,a=this.panzoom;if(!a||!i)return;let u=a.current[t],l=a.target[t]-u,c=0,h=.5*r;o&&e?(u<-h&&(c=-1,u+=s),u>s-h&&(c=1,u-=s)):(u>h&&(c=1,u-=s),u<-s+h&&(c=-1,u+=s)),c&&(a.current[t]=u,a.target[t]=u+l)}lazyLoadImg(t,e){const i=this,o="f-fadeIn",r="is-preloading";let s=!1,a=null;const u=()=>{s||(s=!0,a&&(a.remove(),a=null),D(e,r),e.complete&&(P(e,o),setTimeout(()=>{D(e,o)},350)),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",t))};P(e,r),e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.addEventListener("error",()=>{u()}),e.addEventListener("load",()=>{u()}),setTimeout(()=>{const l=e.parentNode;l&&t.el&&(e.complete?u():s||(a=wt(Zi),l.insertBefore(a,e)))},300)}lazyLoadSlide(t){const e=t&&t.el;if(!e)return;const i=new Set;let o=Array.from(e.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));e.dataset.lazySrc&&o.push(e),o.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(const r of i)this.lazyLoadImg(t,r)}onAnimationEnd(t){var e;const i=t.target,o=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[o],s=t.animationName;if(!i||!r||!s)return;const a=!!this.inTransition.has(o)&&r.transition;a&&s.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(o),this.inTransition.size||this.clearTransitions(),o===this.page&&(!((e=this.panzoom)===null||e===void 0)&&e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,o=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:s,isHorizontal:a,axis:u,pages:l}=this,c=l.length,h=Math.abs(Math.atan2(i,e)/(Math.PI/180));let f=0;if(f=h>45&&h<135?a?0:i:a?e:0,!c)return;let d=this.page,p=s&&a?1:-1;const g=t.current[u]*p;let{pageIndex:m}=this.getPageFromPosition(g);Math.abs(f)>5?(l[d].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(d=m),d=s&&a?f<0?d-1:d+1:f<0?d+1:d-1):d=o===0&&r===0?d:m,this.slideTo(d,{transition:!1,friction:t.option("decelFriction")})}onClick(t){const e=t.target,i=e&&tt(e)?e.dataset:null;let o,r;i&&(i.carouselPage!==void 0?(r="slideTo",o=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[r](o)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var t;(t=this.viewport)===null||t===void 0||t.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=Y.Init,this.prevPage=null,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Y.Destroy)return;t=parseInt((t||0).toString())||0;const o=this.getPageFromIndex(t),{axis:r,isHorizontal:s,isRTL:a,pages:u,panzoom:l}=this,c=u.length,h=a&&s?1:-1;if(!l||!c)return;if(this.page!==o){const d=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",d,t),d.defaultPrevented)return}if(this.transitionTo(t,i))return;let f=u[o].pos;if(this.isInfinite){const d=this.contentDim,p=l.target[r]*h;c===2?f+=d*Math.floor(parseFloat(t+"")/2):f=[f,f-d,f+d].reduce(function(g,m){return Math.abs(m-p)<Math.abs(g-p)?m:g})}f*=h,Math.abs(l.target[r]-f)<1||(l.panTo({x:s?f:0,y:s?0:f,friction:e}),this.onChange(o))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition();this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),D(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener(Ye,this.onAnimationEnd),i.classList.remove(...t);const o=e.transition;o&&i.classList.remove(`f-${o}Out`,`f-${o}In`)}}this.manageSlideVisiblity()}addSlide(t,e){var i,o,r,s;const a=this.panzoom,u=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,l=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,c=this.contentDim<this.viewportDim;let h=Array.isArray(e)?e:[e];const f=[];for(const d of h)f.push(Vn(d));this.slides.splice(t,0,...f);for(let d=0;d<this.slides.length;d++)this.slides[d].index=d;for(const d of f)this.emit("beforeInitSlide",d,d.index);if(this.page>=t&&(this.page+=f.length),this.updateMetrics(),a){const d=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,p=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,g=this.pages.length||1,m=this.isRTL?l-p:p-l,v=this.isRTL?u-d:d-u;c&&g===1?(t<=this.page&&(a.current[this.axis]-=m,a.target[this.axis]-=m),a.panTo({[this.isHorizontal?"x":"y"]:-1*d})):v&&t<=this.page&&(a.target[this.axis]-=v,a.current[this.axis]-=v,a.requestTick())}for(const d of f)this.emit("initSlide",d,d.index)}prependSlide(t){this.addSlide(0,t)}appendSlide(t){this.addSlide(this.slides.length,t)}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e;const i=this.slides[t];if(i){this.removeSlideEl(i,!0),this.slides.splice(t,1);for(let o=0;o<this.slides.length;o++)this.slides[o].index=o;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:t,viewport:e,track:i,slides:o,isHorizontal:r,isInfinite:s}=this;if(!i)return;const a=r?"width":"height",u=r?"offsetWidth":"offsetHeight";if(e){let h=Math.max(e[u],S(e.getBoundingClientRect()[a],1e3)),f=getComputedStyle(e),d="padding",p=r?"Right":"Bottom";h-=parseFloat(f[d+(r?"Left":"Top")])+parseFloat(f[d+p]),this.viewportDim=h}let l,c=0;for(const[h,f]of o.entries()){let d=0,p=0;!f.el&&l?(d=l.dim,p=l.gap):({dim:d,gap:p}=this.getSlideMetrics(f),l=f),d=S(d,1e3),p=S(p,1e3),f.dim=d,f.gap=p,f.pos=c,c+=d,(s||h<o.length-1)&&(c+=p)}c=S(c,1e3),this.contentDim=c,t&&(t.contentRect[a]=c,t.contentRect[r?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Y.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(t,e=!1,i=!1){t===void 0&&(t=this.page);const o=this,r=o.panzoom,s=o.contentDim,a=o.pages[t]||0;if(!a||!r)return t>this.page?-1:1;let u=-1*r.current.e,l=S((u-a.pos)/(1*a.dim),1e3),c=l,h=l;this.isInfinite&&i!==!0&&(c=S((u-a.pos+s)/(1*a.dim),1e3),h=S((u-a.pos-s)/(1*a.dim),1e3));let f=[l,c,h].reduce(function(d,p){return Math.abs(p)<Math.abs(d)?p:d});return e?f:f>1?1:f<-1?-1:f}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:o}=this;if(!i||!e[t])return;let r=0;o&&this.track&&(this.track.style.height="auto",e[t].slides.forEach(s=>{s.el&&(r=Math.max(r,s.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{panzoom:o,contentDim:r,viewportDim:s,pages:a,page:u}=this;if(s){r=r+((e=this.slides[this.slides.length-1])===null||e===void 0?void 0:e.gap)||0;let l=0;l=o&&o.state!==H.Init&&o.state!==H.Destroy?-1*o.current[this.axis]:a[u]&&a[u].pos||0,this.isInfinite&&(l-=Math.floor(l/r)*r),this.isRTL&&this.isHorizontal&&(l*=-1);const c=l-s*t,h=l+s*(t+1),f=this.isInfinite?[-1,0,1]:[0];for(const d of this.slides)for(const p of f){const g=d.pos+p*r,m=g+d.dim+d.gap;g<h&&m>c&&i.add(d)}}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i,slides:o,pages:r,panzoom:s}=this,a=r.length,u=o.length,l=o[0],c=o[u-1],h=this.option("center");let f=0,d=0,p=0,g=t===void 0?-1*((s==null?void 0:s.target[this.axis])||0):t;h&&(g+=.5*e),this.isInfinite?(g<l.pos-.5*c.gap&&(g-=i,p=-1),g>c.pos+c.dim+.5*c.gap&&(g-=i,p=1)):g=Math.max(l.pos||0,Math.min(g,c.pos));let m=c,v=o.find(b=>{const y=b.pos-.5*m.gap,w=b.pos+b.dim+.5*b.gap;return m=b,g>=y&&g<w});return v||(v=c),d=this.getPageForSlide(v.index),f=d+p*a,{page:f,pageIndex:d}}setPageFromPosition(){const{pageIndex:t}=this.getPageFromPosition();this.onChange(t)}destroy(){if([Y.Destroy].includes(this.state))return;this.state=Y.Destroy;const{container:t,viewport:e,track:i,slides:o,panzoom:r}=this,s=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),o&&o.forEach(u=>{this.removeSlideEl(u)}),this.detachPlugins(),e&&(e.removeEventListener("scroll",this.onScroll),e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes));for(const[u,l]of Object.entries(s))u!=="container"&&l&&t.classList.remove(l);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(Wt,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Zt}),Object.defineProperty(Wt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ia}),Object.defineProperty(Wt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:sa});const Nr=function(n){if(!tt(n))return 0;const t=window.scrollY,e=window.innerHeight,i=t+e,o=n.getBoundingClientRect(),r=o.y+t,s=o.height,a=r+s;if(t>a||i<r)return 0;if(t<r&&i>a||r<t&&a>i)return 100;let u=s;r<t&&(u-=t-r),a>i&&(u-=a-i);const l=u/e*100;return Math.round(l)},Le=!(typeof window>"u"||!window.document||!window.document.createElement);let Zn;const Gn=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),yo=n=>{if(n&&Le){Zn===void 0&&document.createElement("div").focus({get preventScroll(){return Zn=!0,!1}});try{if(Zn)n.focus({preventScroll:!0});else{const t=window.scrollY||document.body.scrollTop,e=window.scrollX||document.body.scrollLeft;n.focus(),document.body.scrollTo({top:t,left:e,behavior:"auto"})}}catch{}}},Fr=()=>{const n=document;let t,e="",i="",o="";return n.fullscreenEnabled?(e="requestFullscreen",i="exitFullscreen",o="fullscreenElement"):n.webkitFullscreenEnabled&&(e="webkitRequestFullscreen",i="webkitExitFullscreen",o="webkitFullscreenElement"),e&&(t={request:function(r=n.documentElement){return e==="webkitRequestFullscreen"?r[e](Element.ALLOW_KEYBOARD_INPUT):r[e]()},exit:function(){return n[o]&&n[i]()},isFullscreen:function(){return n[o]}}),t},vi={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},kr),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var W,Z;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Closing=2]="Closing",n[n.CustomClosing=3]="CustomClosing",n[n.Destroy=4]="Destroy"})(W||(W={})),function(n){n[n.Loading=0]="Loading",n[n.Opening=1]="Opening",n[n.Ready=2]="Ready",n[n.Closing=3]="Closing"}(Z||(Z={}));let bo="",we=!1,Ve=!1,Bt=null;const Dr=()=>{let n="",t="";const e=N.getInstance();if(e){const i=e.carousel,o=e.getSlide();if(i&&o){let r=o.slug||void 0,s=o.triggerEl||void 0;t=r||e.option("slug")||"",!t&&s&&s.dataset&&(t=s.dataset.fancybox||""),t&&t!=="true"&&(n="#"+t+(!r&&i.slides.length>1?"-"+(o.index+1):""))}}return{hash:n,slug:t,index:1}},vn=()=>{const n=new URL(document.URL).hash,t=n.slice(1).split("-"),e=t[t.length-1],i=e&&/^\+?\d+$/.test(e)&&parseInt(t.pop()||"1",10)||1;return{hash:n,slug:t.join("-"),index:i}},$r=()=>{const{slug:n,index:t}=vn();if(!n)return;let e=document.querySelector(`[data-slug="${n}"]`);if(e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),N.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${n}"]`);i.length&&(e=i[t-1],e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Hr=()=>{if(N.defaults.Hash===!1)return;const n=N.getInstance();if((n==null?void 0:n.options.Hash)===!1)return;const{slug:t,index:e}=vn(),{slug:i}=Dr();n&&(t===i?n.jumpTo(e-1):(we=!0,n.close())),$r()},jr=()=>{Bt&&clearTimeout(Bt),queueMicrotask(()=>{Hr()})},wo=()=>{window.addEventListener("hashchange",jr,!1),setTimeout(()=>{Hr()},500)};Le&&(/complete|interactive|loaded/.test(document.readyState)?wo():document.addEventListener("DOMContentLoaded",wo));const Ze="is-zooming-in";class Br extends gt{onCreateSlide(t,e,i){const o=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof o=="string"&&this.setImage(i,o)}onRemoveSlide(t,e,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(t,e,i,o){D(this.instance.container,Ze);for(const r of e.slides){const s=r.panzoom;s&&r.index!==i&&s.reset(.35)}}onClose(){var t;const e=this.instance,i=e.container,o=e.getSlide();if(!i||!i.parentElement||!o)return;const{el:r,contentEl:s,panzoom:a,thumbElSrc:u}=o;if(!r||!u||!s||!a||a.isContentLoading||a.state===H.Init||a.state===H.Destroy)return;a.updateMetrics();let l=this.getZoomInfo(o);if(!l)return;this.instance.state=W.CustomClosing,i.classList.remove(Ze),i.classList.add("is-zooming-out"),s.style.backgroundImage=`url('${u}')`;const c=i.getBoundingClientRect();(((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:h,y:f,scale:d,opacity:p}=l;if(p){const g=((m,v,b,y)=>{const w=v-m,E=y-b;return M=>b+((M-m)/w*E||0)})(a.scale,d,1,0);a.on("afterTransform",()=>{s.style.opacity=g(a.scale)+""})}a.on("endAnimation",()=>{e.destroy()}),a.target.a=d,a.target.b=0,a.target.c=0,a.target.d=d,a.panTo({x:h,y:f,scale:d,friction:p?.2:.33,ignoreBounds:!0}),a.isResting&&e.destroy()}setImage(t,e){const i=this.instance;t.src=e,this.process(t,e).then(o=>{const{contentEl:r,imageEl:s,thumbElSrc:a,el:u}=t;if(i.isClosing()||!r||!s)return;r.offsetHeight;const l=!!i.isOpeningSlide(t)&&this.getZoomInfo(t);if(this.option("protected")&&u){u.addEventListener("contextmenu",f=>{f.preventDefault()});const h=document.createElement("div");P(h,"fancybox-protected"),r.appendChild(h)}if(a&&l){const h=o.contentRect,f=Math.max(h.fullWidth,h.fullHeight);let d=null;!l.opacity&&f>1200&&(d=document.createElement("img"),P(d,"fancybox-ghost"),d.src=a,r.appendChild(d));const p=()=>{d&&(P(d,"f-fadeFastOut"),setTimeout(()=>{d&&(d.remove(),d=null)},200))};(c=a,new Promise((g,m)=>{const v=new Image;v.onload=g,v.onerror=m,v.src=c})).then(()=>{i.hideLoading(t),t.state=Z.Opening,this.instance.emit("reveal",t),this.zoomIn(t).then(()=>{p(),this.instance.done(t)},()=>{}),d&&setTimeout(()=>{p()},f>2500?800:200)},()=>{i.hideLoading(t),i.revealContent(t)})}else{const h=this.optionFor(t,"initialSize"),f=this.optionFor(t,"zoom"),d={event:i.prevMouseMoveEvent||i.options.event,friction:f?.12:0};let p=i.optionFor(t,"showClass")||void 0,g=!0;i.isOpeningSlide(t)&&(h==="full"?o.zoomToFull(d):h==="cover"?o.zoomToCover(d):h==="max"?o.zoomToMax(d):g=!1,o.stop("current")),g&&p&&(p=o.isDragging?"f-fadeIn":""),i.hideLoading(t),i.revealContent(t,p)}var c},()=>{i.setError(t,"{{IMAGE_ERROR}}")})}process(t,e){return new Promise((i,o)=>{var r;const s=this.instance,a=t.el;s.clearContent(t),s.showLoading(t);let u=this.optionFor(t,"content");if(typeof u=="string"&&(u=wt(u)),!u||!tt(u)){if(u=document.createElement("img"),u instanceof HTMLImageElement){let l="",c=t.caption;l=typeof c=="string"&&c?c.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${t.index+1} of ${((r=s.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,u.src=e||"",u.alt=l,u.draggable=!1,t.srcset&&u.setAttribute("srcset",t.srcset),this.instance.isOpeningSlide(t)&&(u.fetchPriority="high")}t.sizes&&u.setAttribute("sizes",t.sizes)}P(u,"fancybox-image"),t.imageEl=u,s.setContent(t,u,!1),t.panzoom=new Zt(a,et({transformParent:!0},this.option("Panzoom")||{},{content:u,width:(l,c)=>s.optionFor(t,"width","auto",c)||"auto",height:(l,c)=>s.optionFor(t,"height","auto",c)||"auto",wheel:()=>{const l=s.option("wheel");return(l==="zoom"||l=="pan")&&l},click:(l,c)=>{var h,f;if(s.isCompact||s.isClosing()||t.index!==((h=s.getSlide())===null||h===void 0?void 0:h.index))return!1;if(c){const p=c.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(p.nodeName))return!1}let d=!c||c.target&&((f=t.contentEl)===null||f===void 0?void 0:f.contains(c.target));return s.option(d?"contentClick":"backdropClick")||!1},dblClick:()=>s.isCompact?"toggleZoom":s.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:l=>{i(l)},error:()=>{o()},destroy:()=>{o()}}}))})}zoomIn(t){return new Promise((e,i)=>{const o=this.instance,r=o.container,{panzoom:s,contentEl:a,el:u}=t;s&&s.updateMetrics();const l=this.getZoomInfo(t);if(!(l&&u&&a&&s&&r))return void i();const{x:c,y:h,scale:f,opacity:d}=l,p=()=>{t.state!==Z.Closing&&(d&&(a.style.opacity=Math.max(Math.min(1,1-(1-s.scale)/(1-f)),0)+""),s.scale>=1&&s.scale>s.targetScale-.1&&e(s))},g=b=>{(b.scale<.99||b.scale>1.01)&&!b.isDragging||(D(r,Ze),a.style.opacity="",b.off("endAnimation",g),b.off("touchStart",g),b.off("afterTransform",p),e(b))};s.on("endAnimation",g),s.on("touchStart",g),s.on("afterTransform",p),s.on(["error","destroy"],()=>{i()}),s.panTo({x:c,y:h,scale:f,friction:0,ignoreBounds:!0}),s.stop("current");const m={event:s.panMode==="mousemove"?o.prevMouseMoveEvent||o.options.event:void 0},v=this.optionFor(t,"initialSize");P(r,Ze),o.hideLoading(t),v==="full"?s.zoomToFull(m):v==="cover"?s.zoomToCover(m):v==="max"?s.zoomToMax(m):s.reset(.172)})}getZoomInfo(t){const{el:e,imageEl:i,thumbEl:o,panzoom:r}=t,s=this.instance,a=s.container;if(!e||!i||!o||!r||Nr(o)<3||!this.optionFor(t,"zoom")||!a||s.state===W.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;const u=window.visualViewport||null;if((u?u.scale:1)!==1)return!1;let{top:l,left:c,width:h,height:f}=o.getBoundingClientRect(),{top:d,left:p,fitWidth:g,fitHeight:m}=r.contentRect;if(!(h&&f&&g&&m))return!1;const v=r.container.getBoundingClientRect();p+=v.left,d+=v.top;const b=-1*(p+.5*g-(c+.5*h)),y=-1*(d+.5*m-(l+.5*f)),w=h/g;let E=this.option("zoomOpacity")||!1;return E==="auto"&&(E=Math.abs(h/f-g/m)>.1),{x:b,y,scale:w,opacity:E}}attach(){const t=this,e=t.instance;e.on("Carousel.change",t.onChange),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.removeSlide",t.onRemoveSlide),e.on("close",t.onClose)}detach(){const t=this,e=t.instance;e.off("Carousel.change",t.onChange),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.removeSlide",t.onRemoveSlide),e.off("close",t.onClose)}}Object.defineProperty(Br,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Un="html",xo="image",Kn="map",Ot="youtube",$t="vimeo",ve="html5video",So=(n,t={})=>{const e=new URL(n),i=new URLSearchParams(e.search),o=new URLSearchParams;for(const[a,u]of[...i,...Object.entries(t)]){let l=u+"";if(a==="t"){let c=l.match(/((\d*)m)?(\d*)s?/);c&&o.set("start",60*parseInt(c[2]||"0")+parseInt(c[3]||"0")+"")}else o.set(a,l)}let r=o+"",s=n.match(/#t=((.*)?\d+s)/);return s&&(r+=`#t=${s[1]}`),r},aa={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},la=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class Xr extends gt{onBeforeInitSlide(t,e,i){this.processType(i)}onCreateSlide(t,e,i){this.setContent(i)}onClearContent(t,e){e.xhr&&(e.xhr.abort(),e.xhr=null);const i=e.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",e.iframeEl=null);const o=e.contentEl,r=e.placeholderEl;if(e.type==="inline"&&o&&r)o.classList.remove("fancybox__content"),getComputedStyle(o).getPropertyValue("display")!=="none"&&(o.style.display="none"),setTimeout(()=>{r&&(o&&r.parentNode&&r.parentNode.insertBefore(o,r),r.remove())},0),e.contentEl=void 0,e.placeholderEl=void 0;else for(;e.el&&e.el.firstChild;)e.el.removeChild(e.el.firstChild)}onSelectSlide(t,e,i){i.state===Z.Ready&&this.playVideo()}onUnselectSlide(t,e,i){var o,r;if(i.type===ve){try{(r=(o=i.el)===null||o===void 0?void 0:o.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let s;i.type===$t?s={method:"pause",value:"true"}:i.type===Ot&&(s={event:"command",func:"pauseVideo"}),s&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),i.poller&&clearTimeout(i.poller)}onDone(t,e){t.isCurrentSlide(e)&&!t.isClosing()&&this.playVideo()}onRefresh(t,e){e.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(t){try{let e=JSON.parse(t.data);if(t.origin==="https://player.vimeo.com"){if(e.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===t.source&&(i.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&e.event==="onReady"){const i=document.getElementById(e.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(t){const e=this.instance.optionFor(t,"src")||"";this.instance.showLoading(t);const i=this.instance,o=new XMLHttpRequest;i.showLoading(t),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&i.state===W.Ready&&(i.hideLoading(t),o.status===200?i.setContent(t,o.responseText):i.setError(t,o.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const r=t.ajax||null;o.open(r?"POST":"GET",e+""),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(r),t.xhr=o}setInlineContent(t){let e=null;if(tt(t.src))e=t.src;else if(typeof t.src=="string"){const i=t.src.split("#",2).pop();e=i?document.getElementById(i):null}if(e){if(t.type==="clone"||e.closest(".fancybox__slide")){e=e.cloneNode(!0);const i=e.dataset.animationName;i&&(e.classList.remove(i),delete e.dataset.animationName);let o=e.getAttribute("id");o=o?`${o}--clone`:`clone-${this.instance.id}-${t.index}`,e.setAttribute("id",o)}else if(e.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),t.placeholderEl=i}this.instance.setContent(t,e)}else this.instance.setError(t,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(t){const{src:e,el:i}=t;if(!e||typeof e!="string"||!i)return;i.classList.add("is-loading");const o=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${o.id}_${t.index}`);for(const[a,u]of Object.entries(this.optionFor(t,"iframeAttr")||{}))r.setAttribute(a,u);r.onerror=()=>{o.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=r;const s=this.optionFor(t,"preload");if(t.type!=="iframe"||s===!1)return r.setAttribute("src",t.src+""),o.setContent(t,r,!1),this.resizeIframe(t),void o.revealContent(t);o.showLoading(t),r.onload=()=>{if(!r.src.length)return;const a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(t),a?o.revealContent(t):o.hideLoading(t)},r.setAttribute("src",e),o.setContent(t,r,!1)}resizeIframe(t){const{type:e,iframeEl:i}=t;if(e===Ot||e===$t)return;const o=i==null?void 0:i.parentElement;if(!i||!o)return;let r=t.autoSize;r===void 0&&(r=this.optionFor(t,"autoSize"));let s=t.width||0,a=t.height||0;s&&a&&(r=!1);const u=o&&o.style;if(t.preload!==!1&&r!==!1&&u)try{const l=window.getComputedStyle(o),c=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight),h=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),f=i.contentWindow;if(f){const d=f.document,p=d.getElementsByTagName(Un)[0],g=d.body;u.width="",g.style.overflow="hidden",s=s||p.scrollWidth+c,u.width=`${s}px`,g.style.overflow="",u.flex="0 0 auto",u.height=`${g.scrollHeight}px`,a=p.scrollHeight+h}}catch{}if(s||a){const l={flex:"0 1 auto",width:"",height:""};s&&s!=="auto"&&(l.width=`${s}px`),a&&a!=="auto"&&(l.height=`${a}px`),Object.assign(u,l)}}playVideo(){const t=this.instance.getSlide();if(!t)return;const{el:e}=t;if(!e||!e.offsetParent||!this.optionFor(t,"videoAutoplay"))return;if(t.type===ve)try{const o=e.querySelector("video");if(o){const r=o.play();r!==void 0&&r.then(()=>{}).catch(s=>{o.muted=!0,o.play()})}}catch{}if(t.type!==Ot&&t.type!==$t)return;const i=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let o;if(t.iframeEl.dataset.ready==="true")return o=t.type===Ot?{event:"command",func:"playVideo"}:{method:"play",value:"true"},o&&t.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),void(t.poller=void 0);t.type===Ot&&(o={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"))}t.poller=setTimeout(i,250)};i()}processType(t){if(t.html)return t.type=Un,t.src=t.html,void(t.html="");const e=this.instance.optionFor(t,"src","");if(!e||typeof e!="string")return;let i=t.type,o=null;if(o=e.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const r=this.optionFor(t,Ot),{nocookie:s}=r,a=function(h,f){var d={};for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&f.indexOf(p)<0&&(d[p]=h[p]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(p=Object.getOwnPropertySymbols(h);g<p.length;g++)f.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(h,p[g])&&(d[p[g]]=h[p[g]])}return d}(r,["nocookie"]),u=`www.youtube${s?"-nocookie":""}.com`,l=So(e,a),c=encodeURIComponent(o[2]);t.videoId=c,t.src=`https://${u}/embed/${c}?${l}`,t.thumbSrc=t.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i=Ot}else if(o=e.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const r=So(e,this.optionFor(t,$t)),s=encodeURIComponent(o[1]),a=o[4]||"";t.videoId=s,t.src=`https://player.vimeo.com/video/${s}?${a?`h=${a}${r?"&":""}`:""}${r}`,i=$t}if(!i&&t.triggerEl){const r=t.triggerEl.dataset.type;la.includes(r)&&(i=r)}i||typeof e=="string"&&(e.charAt(0)==="#"?i="inline":(o=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=ve,t.videoFormat=t.videoFormat||"video/"+(o[1]==="ogv"?"ogg":o[1])):e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=xo:e.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(o=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src=`https://maps.google.${o[1]}/?ll=${(o[2]?o[2]+"&z="+Math.floor(parseFloat(o[3]))+(o[4]?o[4].replace(/^\//,"&"):""):o[4]+"").replace(/\?/,"&")}&output=${o[4]&&o[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Kn):(o=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src=`https://maps.google.${o[1]}/maps?q=${o[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Kn),i=i||this.instance.option("defaultType"),t.type=i,i===xo&&(t.thumbSrc=t.thumbSrc||t.src)}setContent(t){const e=this.instance.optionFor(t,"src")||"";if(t&&t.type&&e){switch(t.type){case Un:this.instance.setContent(t,e);break;case ve:const i=this.option("videoTpl");i&&this.instance.setContent(t,i.replace(/\{\{src\}\}/gi,e+"").replace(/\{\{format\}\}/gi,this.optionFor(t,"videoFormat")||"").replace(/\{\{poster\}\}/gi,t.poster||t.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case Kn:case Ot:case $t:t.preload=!1;case"iframe":this.setIframeContent(t)}this.setAspectRatio(t)}}setAspectRatio(t){const e=t.contentEl;if(!(t.el&&e&&t.type&&[Ot,$t,ve].includes(t.type)))return;let i,o=t.width||"auto",r=t.height||"auto";if(o==="auto"||r==="auto"){i=this.optionFor(t,"videoRatio");const l=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=l&&l.length>2?parseFloat(l[1])/parseFloat(l[2]):parseFloat(i+"")}else o&&r&&(i=o/r);if(!i)return;e.style.aspectRatio="",e.style.width="",e.style.height="",e.offsetHeight;const s=e.getBoundingClientRect(),a=s.width||1,u=s.height||1;e.style.aspectRatio=i+"",i<a/u?(r=r==="auto"?u:Math.min(u,r),e.style.width="auto",e.style.height=`${r}px`):(o=o==="auto"?a:Math.min(a,o),e.style.width=`${o}px`,e.style.height="auto")}attach(){const t=this,e=t.instance;e.on("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.selectSlide",t.onSelectSlide),e.on("Carousel.unselectSlide",t.onUnselectSlide),e.on("Carousel.Panzoom.refresh",t.onRefresh),e.on("done",t.onDone),e.on("clearContent",t.onClearContent),window.addEventListener("message",t.onMessage)}detach(){const t=this,e=t.instance;e.off("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.selectSlide",t.onSelectSlide),e.off("Carousel.unselectSlide",t.onUnselectSlide),e.off("Carousel.Panzoom.refresh",t.onRefresh),e.off("done",t.onDone),e.off("clearContent",t.onClearContent),window.removeEventListener("message",t.onMessage)}}Object.defineProperty(Xr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:aa});const Ge="play",Ue="pause",ye="ready";class qr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ye}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==ye}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,!((t=this.instance.panzoom)===null||t===void 0)&&t.isResting&&this.resume()}onTimerEnd(){const t=this.instance;this.state==="play"&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=((t=e.pages[e.page])===null||t===void 0?void 0:t.slides)||[];let o=this.option("progressParentEl");if(o||(o=(i.length===1?i[0].el:null)||e.viewport),!o)return null;const r=document.createElement("div");return P(r,"f-progress"),o.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){const t=this,e=t.instance;if(e.pages.length<2||t.timer)return;const i=t.option("timeout");t.state=Ge,P(e.container,"has-autoplay");let o=t.createProgressBar();o&&(o.style.transitionDuration=`${i}ms`,o.style.transform="scaleX(1)"),t.timer=setTimeout(()=>{t.timer=null,t.inHover||t.onTimerEnd()},i),t.emit("set")}clear(){const t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){const t=this;if(t.set(),t.state!==ye){if(t.option("pauseOnHover")){const e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){const t=this,e=t.state,i=t.instance.container;t.clear(),t.state=ye,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),D(i,"has-autoplay"),e!==ye&&t.emit("stop")}pause(){const t=this;t.state===Ge&&(t.state=Ue,t.clear(),t.emit(Ue))}resume(){const t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==Ge){if(t.state===Ue&&!t.inHover){const i=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",i),i.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===Ge||this.state===Ue?this.stop():this.start()}attach(){const t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){const t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}}Object.defineProperty(qr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Yr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(t){const e=t.carousel;if(!e)return;const i=t.container;i&&(e.options.Autoplay=et({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{t.emit("startSlideshow")},set:o=>{var r;i.classList.add("has-slideshow"),((r=t.getSlide())===null||r===void 0?void 0:r.state)!==Z.Ready&&o.pause()},stop:()=>{i.classList.remove("has-slideshow"),t.isCompact||t.endIdle(),t.emit("endSlideshow")},resume:(o,r)=>{var s,a,u;!r||!r.cancelable||((s=t.getSlide())===null||s===void 0?void 0:s.state)===Z.Ready&&(!((u=(a=t.carousel)===null||a===void 0?void 0:a.panzoom)===null||u===void 0)&&u.isResting)||r.preventDefault()}}}),e.attachPlugins({Autoplay:qr}),this.ref=e.plugins.Autoplay)}onReady(t){const e=t.carousel,i=this.ref;i&&e&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&i.start()}onDone(t,e){const i=this.ref,o=t.carousel;if(!i||!o)return;const r=e.panzoom;r&&r.on("startAnimation",()=>{t.isCurrentSlide(e)&&i.stop()}),t.isCurrentSlide(e)&&i.resume()}onKeydown(t,e){var i;const o=this.ref;o&&e===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&o.toggle()}attach(){const t=this,e=t.instance;e.on("Carousel.init",t.onPrepare),e.on("Carousel.ready",t.onReady),e.on("done",t.onDone),e.on("keydown",t.onKeydown)}detach(){const t=this,e=t.instance;e.off("Carousel.init",t.onPrepare),e.off("Carousel.ready",t.onReady),e.off("done",t.onDone),e.off("keydown",t.onKeydown)}}Object.defineProperty(Yr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:n=>{var t;return((t=n.instance.container)===null||t===void 0?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||n.instance.container},timeout:3e3}});const Wr={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var Rt;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Hidden=2]="Hidden"})(Rt||(Rt={}));const Eo="isResting",Ke="thumbWidth",te="thumbHeight",vt="thumbClipWidth";let Vr=class extends gt{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Rt.Init})}get isModern(){return this.type==="modern"}onInitSlide(n,t){const e=t.el?t.el.dataset:void 0;e&&(t.thumbSrc=e.thumbSrc||t.thumbSrc||"",t[vt]=parseFloat(e[vt]||"")||t[vt]||0,t[te]=parseFloat(e.thumbHeight||"")||t[te]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var n;if(!this.isModern)return;const t=this.container,e=this.instance,i=e.panzoom,o=this.carousel,r=o?o.panzoom:null,s=e.page;if(i&&o&&r){if(i.isDragging){D(t,this.cn(Eo));let a=((n=o.pages[s])===null||n===void 0?void 0:n.pos)||0;a+=e.getProgress(s)*(this[vt]+this.thumbGap);let u=r.getBounds();-1*a>u.x.min&&-1*a<u.x.max&&r.panTo({x:-1*a,friction:.12})}else xt(t,this.cn(Eo),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const n of this.instance.slides||[])this.resizeModernSlide(n);this.shiftModern()}isDisabled(){const n=this.option("minCount")||0;if(n){const e=this.instance;let i=0;for(const o of e.slides||[])o.thumbSrc&&i++;if(i<n)return!0}const t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(n){const t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",n.index],["%d",n.index+1],["%s",n.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(n){const t=this.carousel;t&&t.addSlide(n.index,this.getThumb(n))}getSlides(){const n=[];for(const t of this.instance.slides||[])n.push(this.getThumb(t));return n}resizeModernSlide(n){this.isModern&&(n[Ke]=n[vt]&&n[te]?Math.round(this[te]*(n[vt]/n[te])):this[Ke])}updateProps(){const n=this.container;if(!n)return;const t=e=>parseFloat(getComputedStyle(n).getPropertyValue("--f-thumb-"+e))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[Ke]=t("width")||40,this[vt]=t("clip-width")||40,this[te]=t("height")||40}build(){const n=this;if(n.state!==Rt.Init)return;if(n.isDisabled())return void n.emit("disabled");const t=n.instance,e=t.container,i=n.getSlides(),o=n.option("type");n.type=o;const r=n.option("parentEl"),s=n.cn("container"),a=n.cn("track");let u=r==null?void 0:r.querySelector("."+s);u||(u=document.createElement("div"),P(u,s),r?r.appendChild(u):e.after(u)),P(u,`is-${o}`),P(e,n.cn("hasThumbs")),n.container=u,n.updateProps();let l=u.querySelector("."+a);l||(l=document.createElement("div"),P(l,n.cn("track")),u.appendChild(l)),n.track=l;const c=et({},{track:l,infinite:!1,center:!0,fill:o==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},n.option("Carousel")||{},{Sync:{target:t},slides:i}),h=new t.constructor(u,c);h.on("createSlide",(f,d)=>{n.setProps(d.index),n.emit("createSlide",d,d.el)}),h.on("ready",()=>{n.shiftModern(),n.emit("ready")}),h.on("refresh",()=>{n.shiftModern()}),h.on("Panzoom.click",(f,d,p)=>{n.onClick(p)}),n.carousel=h,n.state=Rt.Ready}onClick(n){n.preventDefault(),n.stopPropagation();const t=this.instance,{pages:e,page:i}=t,o=g=>{if(g){const m=g.closest("[data-carousel-index]");if(m)return[parseInt(m.dataset.carouselIndex||"",10)||0,m]}return[-1,void 0]},r=(g,m)=>{const v=document.elementFromPoint(g,m);return v?o(v):[-1,void 0]};let[s,a]=o(n.target);if(s>-1)return;const u=this[vt],l=n.clientX,c=n.clientY;let[h,f]=r(l-u,c),[d,p]=r(l+u,c);f&&p?(s=Math.abs(l-f.getBoundingClientRect().right)<Math.abs(l-p.getBoundingClientRect().left)?h:d,s===i&&(s=s===h?d:h)):f?s=h:p&&(s=d),s>-1&&e[s]&&t.slideTo(s)}getShift(n){var t;const e=this,{instance:i}=e,o=e.carousel;if(!i||!o)return 0;const r=e[Ke],s=e[vt],a=e.thumbGap,u=e.thumbExtraGap;if(!(!((t=o.slides[n])===null||t===void 0)&&t.el))return 0;const l=.5*(r-s),c=i.pages.length-1;let h=i.getProgress(0),f=i.getProgress(c),d=i.getProgress(n,!1,!0),p=0,g=l+u+a;const m=h<0&&h>-1,v=f>0&&f<1;return n===0?(p=g*Math.abs(h),v&&h===1&&(p-=g*Math.abs(f))):n===c?(p=g*Math.abs(f)*-1,m&&f===-1&&(p+=g*Math.abs(h))):m||v?(p=-1*g,p+=g*Math.abs(h),p+=g*(1-Math.abs(f))):p=g*d,p}setProps(n){var t;const e=this;if(!e.isModern)return;const{instance:i}=e,o=e.carousel;if(i&&o){const r=(t=o.slides[n])===null||t===void 0?void 0:t.el;if(r&&r.childNodes.length){let s=S(1-Math.abs(i.getProgress(n))),a=S(e.getShift(n));r.style.setProperty("--progress",s?s+"":""),r.style.setProperty("--shift",a+"")}}}shiftModern(){const n=this;if(!n.isModern)return;const{instance:t,track:e}=n,i=t.panzoom,o=n.carousel;if(!(t&&e&&i&&o)||i.state===H.Init||i.state===H.Destroy)return;for(const s of t.slides)n.setProps(s.index);let r=(n[vt]+n.thumbGap)*(o.slides.length||0);e.style.setProperty("--width",r+"")}cleanup(){const n=this;n.carousel&&n.carousel.destroy(),n.carousel=null,n.container&&n.container.remove(),n.container=null,n.track&&n.track.remove(),n.track=null,n.state=Rt.Init,D(n.instance.container,n.cn("hasThumbs"))}attach(){const n=this,t=n.instance;t.on("initSlide",n.onInitSlide),t.state===Y.Init?t.on("initSlides",n.onInitSlides):n.onInitSlides(),t.on(["change","Panzoom.afterTransform"],n.onChange),t.on("Panzoom.refresh",n.onRefresh)}detach(){const n=this,t=n.instance;t.off("initSlide",n.onInitSlide),t.off("initSlides",n.onInitSlides),t.off(["change","Panzoom.afterTransform"],n.onChange),t.off("Panzoom.refresh",n.onRefresh),n.cleanup()}};Object.defineProperty(Vr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Wr});const ca=Object.assign(Object.assign({},Wr),{key:"t",showOnStart:!0,parentEl:null}),Mo="is-masked",Po="aria-hidden";class Zr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const t=this.ref;return t&&!t.isDisabled()}get isHidden(){return this.hidden}onClick(t,e){e.stopPropagation()}onCreateSlide(t,e){var i,o,r;const s=((r=(o=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||o===void 0?void 0:o.slides[e.index])===null||r===void 0?void 0:r.type)||"",a=e.el;if(a&&s){let u=`for-${s}`;["video","youtube","vimeo","html5video"].includes(s)&&(u+=" for-video"),P(a,u)}}onInit(){var t;const e=this,i=e.instance,o=i.carousel;if(e.ref||!o)return;const r=e.option("parentEl")||i.footer||i.container;if(!r)return;const s=et({},e.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{const u=a.container;u&&this.hidden&&(e.refresh(),u.style.transition="none",e.hide(),u.offsetHeight,queueMicrotask(()=>{u.style.transition="",e.show()}))}}});s.Carousel=s.Carousel||{},s.Carousel.on=et(((t=e.options.Carousel)===null||t===void 0?void 0:t.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),o.options.Thumbs=s,o.attachPlugins({Thumbs:Vr}),e.ref=o.plugins.Thumbs,e.option("showOnStart")||(e.ref.state=Rt.Hidden,e.hidden=!0)}onResize(){var t;const e=(t=this.ref)===null||t===void 0?void 0:t.container;e&&(e.style.maxHeight="")}onKeydown(t,e){const i=this.option("key");i&&i===e&&this.toggle()}toggle(){const t=this.ref;if(t&&!t.isDisabled())return t.state===Rt.Hidden?(t.state=Rt.Init,void t.build()):void(this.hidden?this.show():this.hide())}show(){const t=this.ref;if(!t||t.isDisabled())return;const e=t.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute(Po),e.classList.remove(Mo),this.hidden=!1)}hide(){const t=this.ref,e=t&&t.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(Mo),e.setAttribute(Po,"true")),this.hidden=!0}refresh(){const t=this.ref;if(!t||!t.state)return;const e=t.container,i=(e==null?void 0:e.firstChild)||null;e&&i&&i.childNodes.length&&(e.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const t=this,e=t.instance;e.state===W.Init?e.on("Carousel.init",t.onInit):t.onInit(),e.on("resize",t.onResize),e.on("keydown",t.onKeydown)}detach(){var t;const e=this,i=e.instance;i.off("Carousel.init",e.onInit),i.off("resize",e.onResize),i.off("keydown",e.onKeydown),(t=i.carousel)===null||t===void 0||t.detachPlugins(["Thumbs"]),e.ref=null}}Object.defineProperty(Zr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ca});const Jn={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var qt;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Disabled=2]="Disabled"})(qt||(qt={}));const ua={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},ha={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Co="has-toolbar",Qn="fancybox__toolbar";class Gr extends gt{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:qt.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(t){var e;if(!t.carousel)return;let i=this.option("display"),o=this.option("absolute"),r=this.option("enabled");if(r==="auto"){const l=this.instance.carousel;let c=0;if(l)for(const h of l.slides)(h.panzoom||h.type==="image")&&c++;c||(r=!1)}r||(i=void 0);let s=0;const a={left:[],middle:[],right:[]};if(i)for(const l of["left","middle","right"])for(const c of i[l]){const h=this.createEl(c);h&&((e=a[l])===null||e===void 0||e.push(h),s++)}let u=null;if(s&&(u=this.createContainer()),u){for(const[l,c]of Object.entries(a)){const h=document.createElement("div");P(h,Qn+"__column is-"+l);for(const f of c)h.appendChild(f);o!=="auto"||l!=="middle"||c.length||(o=!0),u.appendChild(h)}o===!0&&P(u,"is-absolute"),this.state=qt.Ready,this.onRefresh()}else this.state=qt.Disabled}onClick(t){var e,i;const o=this.instance,r=o.getSlide(),s=r==null?void 0:r.panzoom,a=t.target,u=a&&tt(a)?a.dataset:null;if(!u)return;if(u.fancyboxToggleThumbs!==void 0)return t.preventDefault(),t.stopPropagation(),void((e=o.plugins.Thumbs)===null||e===void 0||e.toggle());if(u.fancyboxToggleFullscreen!==void 0)return t.preventDefault(),t.stopPropagation(),void this.instance.toggleFullscreen();if(u.fancyboxToggleSlideshow!==void 0){t.preventDefault(),t.stopPropagation();const h=(i=o.carousel)===null||i===void 0?void 0:i.plugins.Autoplay;let f=h.isActive;return s&&s.panMode==="mousemove"&&!f&&s.reset(),void(f?h.stop():h.start())}const l=u.panzoomAction,c=u.panzoomChange;if((c||l)&&(t.preventDefault(),t.stopPropagation()),c){let h={};try{h=JSON.parse(c)}catch{}s&&s.applyChange(h)}else l&&s&&s[l]&&s[l]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const t=this.container;if(!t)return;const e=this.instance.getSlide();if(!e||e.state!==Z.Ready)return;const i=e&&!e.error&&e.panzoom;for(const s of t.querySelectorAll("[data-panzoom-action]"))i?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"));let o=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(const s of t.querySelectorAll('[data-panzoom-action="zoomIn"]'))o?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"));for(const s of t.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"));for(const s of t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||o?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"));const a=s.querySelector("g");a&&(a.style.display=o?"":"none")}}onDone(t,e){var i;(i=e.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(e)&&this.onRefresh()}),this.instance.isCurrentSlide(e)&&this.onRefresh()}createContainer(){const t=this.instance.container;if(!t)return null;const e=this.option("parentEl")||t;let i=e.querySelector("."+Qn);return i||(i=document.createElement("div"),P(i,Qn),e.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),t&&P(t,Co),this.container=i,i}createEl(t){const e=this.instance,i=e.carousel;if(!i||t==="toggleFS"||t==="fullscreen"&&!Fr())return null;let o=null;const r=i.slides.length||0;let s=0,a=0;for(const l of i.slides)(l.panzoom||l.type==="image")&&s++,(l.type==="image"||l.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(t))return o;if(Jn[t]!==void 0&&!s||t==="download"&&!a)return null;if(t==="thumbs"){const l=e.plugins.Thumbs;if(!l||!l.isEnabled)return null}if(t==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(Jn[t]!==void 0){const l=Jn[t];o=document.createElement("button"),o.setAttribute("title",this.instance.localize(`{{${t.toUpperCase()}}}`)),P(o,"f-button"),l.action&&(o.dataset.panzoomAction=l.action),l.change&&(o.dataset.panzoomChange=JSON.stringify(l.change)),o.appendChild(wt(this.instance.localize(l.icon)))}else{const l=(this.option("items")||[])[t];l&&(o=wt(this.instance.localize(l.tpl)),typeof l.click=="function"&&o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),typeof l.click=="function"&&l.click.call(this,this,c)}))}const u=o==null?void 0:o.querySelector("svg");if(u)for(const[l,c]of Object.entries(ha))u.getAttribute(l)||u.setAttribute(l,String(c));return o}removeContainer(){const t=this.container;t&&t.remove(),this.container=null,this.state=qt.Disabled;const e=this.instance.container;e&&D(e,Co)}attach(){const t=this,e=t.instance;e.on("Carousel.initSlides",t.onReady),e.on("done",t.onDone),e.on(["reveal","Carousel.change"],t.onChange),t.onReady(t.instance)}detach(){const t=this,e=t.instance;e.off("Carousel.initSlides",t.onReady),e.off("done",t.onDone),e.off(["reveal","Carousel.change"],t.onChange),t.removeContainer()}}Object.defineProperty(Gr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ua});const fa={Hash:class extends gt{onReady(){we=!1}onChange(n){Bt&&clearTimeout(Bt);const{hash:t}=Dr(),{hash:e}=vn(),i=n.isOpeningSlide(n.getSlide());i&&(bo=e===t?"":e),t&&t!==e&&(Bt=setTimeout(()=>{try{if(n.state===W.Ready){let o="replaceState";i&&!Ve&&(o="pushState",Ve=!0),window.history[o]({},document.title,window.location.pathname+window.location.search+t)}}catch{}},300))}onClose(n){if(Bt&&clearTimeout(Bt),!we&&Ve)return Ve=!1,we=!1,void window.history.back();if(!we)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(bo||""))}catch{}}attach(){const n=this.instance;n.on("ready",this.onReady),n.on(["Carousel.ready","Carousel.change"],this.onChange),n.on("close",this.onClose)}detach(){const n=this.instance;n.off("ready",this.onReady),n.off(["Carousel.ready","Carousel.change"],this.onChange),n.off("close",this.onClose)}static parseURL(){return vn()}static startFromUrl(){$r()}static destroy(){window.removeEventListener("hashchange",jr,!1)}},Html:Xr,Images:Br,Slideshow:Yr,Thumbs:Zr,Toolbar:Gr},To="with-fancybox",ti="hide-scrollbar",_o="--fancybox-scrollbar-compensate",Ao="--fancybox-body-margin",ei="aria-hidden",ni="is-using-tab",ii="is-animated",Oo="is-compact",Lo="is-loading",oi="is-opening",Je="has-caption",ee="disabled",Ht="tabindex",ko="download",ri="href",ne="src",It=n=>typeof n=="string",Ro=function(){var n=window.getSelection();return!!n&&n.type==="Range"};let at,lt=null,jt=null,zo=0,Io=0,No=0,Fo=0;const ie=new Map;let da=0;class N extends Vi{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(t=[],e={},i={}){super(e),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:W.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),at||(at=Fr()),this.id=e.id||++da,ie.set(this.id,this),this.userSlides=t,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===W.Destroy)return;this.state=W.Init,this.attachPlugins(Object.assign(Object.assign({},N.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Le)return;const e=document,i=e.body,o=e.documentElement;if(i.classList.contains(ti))return;let r=window.innerWidth-o.getBoundingClientRect().width;const s=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),o.style.setProperty(_o,`${r}px`),s&&i.style.setProperty(Ao,`${s}px`),i.classList.add(ti)})(),this.initLayout(),this.scale();const t=()=>{this.initCarousel(this.userSlides),this.state=W.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(ei,"false")},16)};this.option("Fullscreen.autoStart")&&at&&!at.isFullscreen()?at.request().then(()=>{this.startedFs=!0,t()}).catch(()=>t()):t()}initLayout(){var t,e;const i=this.option("parentEl")||document.body,o=wt(this.localize(this.option("tpl.main")||""));if(o){if(o.setAttribute("id",`fancybox-${this.id}`),o.setAttribute("aria-label",this.localize("{{MODAL}}")),o.classList.toggle(Oo,this.isCompact),P(o,this.option("mainClass")||""),P(o,oi),this.container=o,this.footer=o.querySelector(".fancybox__footer"),i.appendChild(o),P(document.documentElement,To),lt&&jt||(lt=document.createElement("span"),P(lt,"fancybox-focus-guard"),lt.setAttribute(Ht,"0"),lt.setAttribute(ei,"true"),lt.setAttribute("aria-label","Focus guard"),jt=lt.cloneNode(),(t=o.parentElement)===null||t===void 0||t.insertBefore(lt,o),(e=o.parentElement)===null||e===void 0||e.append(jt)),o.addEventListener("mousedown",r=>{zo=r.pageX,Io=r.pageY,D(o,ni)}),this.option("closeExisting"))for(const r of ie.values())r.id!==this.id&&r.close();else this.option("animated")&&(P(o,ii),setTimeout(()=>{this.isClosing()||D(o,ii)},350));this.emit("initLayout")}}initCarousel(t){const e=this.container;if(!e)return;const i=e.querySelector(".fancybox__carousel");if(!i)return;const o=this.carousel=new Wt(i,et({},{slides:t,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));o.on("*",(r,s,...a)=>{this.emit(`Carousel.${s}`,r,...a)}),o.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,s,a)=>{this.clearContent(a),a.state=void 0}),o.on("Panzoom.touchStart",()=>{var r,s;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((s=this.container)===null||s===void 0||s.focus())}),o.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(o.on("Panzoom.afterTransform",(r,s)=>{const a=this.getSlide();if(a&&gi(a.el))return;const u=this.container;if(u){const l=Math.abs(s.current.f),c=l<1?"":Math.max(.5,Math.min(1,1-l/s.contentRect.fitHeight*1.5));u.style.setProperty("--fancybox-ts",c?"0s":""),u.style.setProperty("--fancybox-opacity",c+"")}}),o.on("Panzoom.touchEnd",(r,s,a)=>{var u;const l=this.getSlide();if(l&&gi(l.el)||s.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((u=document.activeElement)===null||u===void 0?void 0:u.nodeName)!==-1)return;const c=Math.abs(s.dragOffset.y);s.lockedAxis==="y"&&(c>=200||c>=50&&s.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(s.current.f<0?"Up":"Down")))})),o.on("change",r=>{var s;let a=(s=this.getSlide())===null||s===void 0?void 0:s.triggerEl;if(a){const u=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(u)}}),o.on(["refresh","change"],r=>{const s=this.container;if(!s)return;for(const l of s.querySelectorAll("[data-fancybox-current-index]"))l.innerHTML=r.page+1;for(const l of s.querySelectorAll("[data-fancybox-count]"))l.innerHTML=r.pages.length;if(!r.isInfinite){for(const l of s.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(l.removeAttribute(ee),l.removeAttribute(Ht)):(l.setAttribute(ee,""),l.setAttribute(Ht,"-1"));for(const l of s.querySelectorAll("[data-fancybox-prev]"))r.page>0?(l.removeAttribute(ee),l.removeAttribute(Ht)):(l.setAttribute(ee,""),l.setAttribute(Ht,"-1"))}const a=this.getSlide();if(!a)return;let u=a.downloadSrc||"";u||a.type!=="image"||a.error||!It(a[ne])||(u=a[ne]);for(const l of s.querySelectorAll("[data-fancybox-download]")){const c=a.downloadFilename;u?(l.removeAttribute(ee),l.removeAttribute(Ht),l.setAttribute(ri,u),l.setAttribute(ko,c||u),l.setAttribute("target","_blank")):(l.setAttribute(ee,""),l.setAttribute(Ht,"-1"),l.removeAttribute(ri),l.removeAttribute(ko))}}),this.emit("initCarousel")}attachEvents(){const t=this,e=t.container;if(!e)return;e.addEventListener("click",t.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),document.addEventListener("mousemove",t.onMousemove),t.option("trapFocus")&&document.addEventListener("focus",t.onFocus,!0),window.addEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",t.onResize),i.addEventListener("resize",t.onResize))}detachEvents(){const t=this,e=t.container;if(!e)return;document.removeEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),e.removeEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),e.removeEventListener("click",t.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",t.onMousemove),window.removeEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",t.onResize),i.removeEventListener("scroll",t.onResize)),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),document.removeEventListener("focus",t.onFocus,!0)}scale(){const t=this.container;if(!t)return;const e=window.visualViewport,i=Math.max(1,(e==null?void 0:e.scale)||1);let o="",r="",s="";if(e&&i>1){let a=`${e.offsetLeft}px`,u=`${e.offsetTop}px`;o=e.width*i+"px",r=e.height*i+"px",s=`translate3d(${a}, ${u}, 0) scale(${1/i})`}t.style.transform=s,t.style.width=o,t.style.height=r}onClick(t){var e;const{container:i,isCompact:o}=this;if(!i||this.isClosing())return;!o&&this.option("idle")&&this.resetIdle();const r=t.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return t.preventDefault(),void this.close(t);if(r.closest("[data-fancybox-prev]"))return t.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return t.preventDefault(),void this.next();if(t.type==="click"&&t.detail===0||Math.abs(t.pageX-zo)>30||Math.abs(t.pageY-Io)>30)return;const s=document.activeElement;if(Ro()&&s&&i.contains(s))return;if(o&&((e=this.getSlide())===null||e===void 0?void 0:e.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",t),t.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(s){if(s.closest("[contenteditable]"))return;r.matches(Gn)||s.blur()}if(Ro())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(Gn)&&(a=this.option("backdropClick"));a==="close"?(t.preventDefault(),this.close(t)):a==="next"?(t.preventDefault(),this.next()):a==="prev"&&(t.preventDefault(),this.prev())}onWheel(t){const e=t.target;let i=this.option("wheel",t);e.closest(".fancybox__thumbs")&&(i="slide");const o=i==="slide",r=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(u,l){return Math.abs(l)>Math.abs(u)?l:u}),s=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?o&&t.preventDefault():(this.pwt=a,this.emit("wheel",t,s),t.defaultPrevented||(i==="close"?(t.preventDefault(),this.close(t)):i==="slide"&&(gn(e)||(t.preventDefault(),this[s>0?"prev":"next"]()))))}onScroll(){window.scrollTo(No,Fo)}onKeydown(t){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const e=t.key,i=this.option("keyboard");if(!i)return;const o=t.composedPath()[0],r=document.activeElement&&document.activeElement.classList,s=r&&r.contains("f-button")||o.dataset.carouselPage||o.dataset.carouselIndex;if(e!=="Escape"&&!s&&tt(o)&&(o.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(o.nodeName)!==-1)||(t.key==="Tab"?P(this.container,ni):D(this.container,ni),t.ctrlKey||t.altKey||t.shiftKey))return;this.emit("keydown",e,t);const a=i[e];a&&typeof this[a]=="function"&&(t.preventDefault(),this[a]())}onResize(){const t=this.container;if(!t)return;const e=this.isCompact;t.classList.toggle(Oo,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(t){this.isTopmost()&&this.checkFocus(t)}onMousemove(t){this.prevMouseMoveEvent=t,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(t){const e=this.optionFor(t,"closeButton")||!1;if(e==="auto"){const o=this.plugins.Toolbar;if(o&&o.state===qt.Ready)return}if(!e||!t.contentEl||t.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const o=wt(this.localize(i));t.closeBtnEl=t.contentEl.appendChild(o),t.el&&P(t.el,"has-close-btn")}}manageCaption(t=void 0){var e,i;const o="fancybox__caption",r=this.container;if(!r)return;D(r,Je);const s=this.isCompact||this.option("commonCaption"),a=!s;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),s&&!this.caption)for(const h of((e=this.carousel)===null||e===void 0?void 0:e.slides)||[])h.captionEl&&(h.captionEl.remove(),h.captionEl=void 0,D(h.el,Je),(i=h.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(t||(t=this.getSlide()),!t||s&&!this.isCurrentSlide(t))return;const u=t.el;let l=this.optionFor(t,"caption","");if(!l)return void(s&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let c=null;if(a){if(c=t.captionEl||null,u&&!c){const h=o+`_${this.id}_${t.index}`;c=document.createElement("div"),P(c,o),c.setAttribute("id",h),t.captionEl=u.appendChild(c),P(u,Je),u.setAttribute("aria-labelledby",h)}}else c=this.caption,c||(c=r.querySelector("."+o)),!c&&(c=document.createElement("div"),c.dataset.fancyboxCaption="",P(c,o),(this.footer||r).prepend(c)),P(r,Je),this.caption=c;c&&(c.innerHTML="",It(l)||typeof l=="number"?c.innerHTML=l+"":l instanceof HTMLElement&&c.appendChild(l))}checkFocus(t){this.focus(t)}focus(t){var e;if(this.ignoreFocusChange)return;const i=document.activeElement||null,o=(t==null?void 0:t.target)||null,r=this.container,s=(e=this.carousel)===null||e===void 0?void 0:e.viewport;if(!r||!s||!t&&i&&r.contains(i))return;const a=this.getSlide(),u=a&&a.state===Z.Ready?a.el:null;if(!u||u.contains(i)||r===i)return;t&&t.cancelable&&t.preventDefault(),this.ignoreFocusChange=!0;const l=Array.from(r.querySelectorAll(Gn));let c=[],h=null;for(let d of l){const p=!d.offsetParent||!!d.closest('[aria-hidden="true"]'),g=u&&u.contains(d),m=!s.contains(d);if(d===r||(g||m)&&!p){c.push(d);const v=d.dataset.origTabindex;v!==void 0&&v&&(d.tabIndex=parseFloat(v)),d.removeAttribute("data-orig-tabindex"),!d.hasAttribute("autoFocus")&&h||(h=d)}else{const v=d.dataset.origTabindex===void 0?d.getAttribute("tabindex")||"":d.dataset.origTabindex;v&&(d.dataset.origTabindex=v),d.tabIndex=-1}}let f=null;t?(!o||c.indexOf(o)<0)&&(f=h||r,c.length&&(i===jt?f=c[0]:this.lastFocus!==r&&i!==lt||(f=c[c.length-1]))):f=a&&a.type==="image"?r:h||r,f&&yo(f),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const t=this.carousel;t&&t.pages.length>1&&t.slideNext()}prev(){const t=this.carousel;t&&t.pages.length>1&&t.slidePrev()}jumpTo(...t){this.carousel&&this.carousel.slideTo(...t)}isTopmost(){var t;return((t=N.getInstance())===null||t===void 0?void 0:t.id)==this.id}animate(t=null,e="",i){if(!t||!e)return void(i&&i());this.stop(t);const o=r=>{r.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",o),delete t.dataset.animationName,i&&i(),D(t,e))};t.dataset.animationName=e,t.addEventListener("animationend",o),P(t,e)}stop(t){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))}setContent(t,e="",i=!0){if(this.isClosing())return;const o=t.el;if(!o)return;let r=null;if(tt(e)?r=e:(r=wt(e+""),tt(r)||(r=document.createElement("div"),r.innerHTML=e+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){const s=document.createElement("div");s.appendChild(r),r=s}tt(r)&&t.filter&&!t.error&&(r=r.querySelector(t.filter)),r&&tt(r)?(P(r,"fancybox__content"),t.id&&r.setAttribute("id",t.id),o.classList.add(`has-${t.error?"error":t.type||"unknown"}`),o.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=t.display||this.option("defaultDisplay")||"flex"),t.contentEl=r,i&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}revealContent(t,e){const i=t.el,o=t.contentEl;i&&o&&(this.emit("reveal",t),this.hideLoading(t),t.state=Z.Opening,(e=this.isOpeningSlide(t)?e===void 0?this.optionFor(t,"showClass"):e:"f-fadeIn")?this.animate(o,e,()=>{this.done(t)}):this.done(t))}done(t){this.isClosing()||(t.state=Z.Ready,this.emit("done",t),P(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask(()=>{var e;(e=t.panzoom)===null||e===void 0||e.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(t)&&(D(this.container,oi),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(t){const e=this.getSlide();return!(!t||!e)&&e.index===t.index}isOpeningSlide(t){var e,i;return((e=this.carousel)===null||e===void 0?void 0:e.prevPage)===null&&t&&t.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(t){t.state=Z.Loading;const e=t.el;e&&(P(e,Lo),this.emit("loading",t),t.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!t.spinnerEl&&t.state===Z.Loading){let i=wt(Zi);P(i,"fancybox-spinner"),t.spinnerEl=i,e.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(t){const e=t.el;if(!e)return;const i=t.spinnerEl;this.isClosing()?i==null||i.remove():(D(e,Lo),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),t.state===Z.Loading&&(this.emit("loaded",t),t.state=Z.Ready))}setError(t,e){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,t),i.defaultPrevented)return;t.error=e,this.hideLoading(t),this.clearContent(t);const o=document.createElement("div");o.classList.add("fancybox-error"),o.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,o)}clearContent(t){if(t.state===void 0)return;this.emit("clearContent",t),t.contentEl&&(t.contentEl.remove(),t.contentEl=void 0);const e=t.el;e&&(D(e,"has-error"),D(e,"has-unknown"),D(e,`has-${t.type||"unknown"}`)),t.closeBtnEl&&t.closeBtnEl.remove(),t.closeBtnEl=void 0,t.captionEl&&t.captionEl.remove(),t.captionEl=void 0,t.spinnerEl&&t.spinnerEl.remove(),t.spinnerEl=void 0}getSlide(){var t;const e=this.carousel;return((t=e==null?void 0:e.pages[e==null?void 0:e.page])===null||t===void 0?void 0:t.slides[0])||void 0}close(t,e){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,t),i.defaultPrevented)return;t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());const o=()=>{this.proceedClose(t,e)};this.startedFs&&at&&at.isFullscreen()?Promise.resolve(at.exit()).then(()=>o()):o()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(t=!1){const e=()=>{this.clearIdle(),this.idle=!0,P(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(t)e();else{const i=this.option("idle");i&&(this.idleTimer=setTimeout(e,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,D(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){at&&(at.isFullscreen()?at.exit():at.request().then(()=>{this.startedFs=!0}))}isClosing(){return[W.Closing,W.CustomClosing,W.Destroy].includes(this.state)}proceedClose(t,e){var i,o;this.state=W.Closing,this.clearIdle(),this.detachEvents();const r=this.container,s=this.carousel,a=this.getSlide(),u=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(u&&(Nr(u)?yo(u):u.focus()),r&&(D(r,oi),P(r,"is-closing"),r.setAttribute(ei,"true"),this.option("animated")&&P(r,ii),r.style.pointerEvents="none"),s){s.clearTransitions(),(i=s.panzoom)===null||i===void 0||i.destroy(),(o=s.plugins.Navigation)===null||o===void 0||o.detach();for(const l of s.slides){l.state=Z.Closing,this.hideLoading(l);const c=l.contentEl;c&&this.stop(c);const h=l==null?void 0:l.panzoom;h&&(h.stop(),h.detachEvents(),h.detachObserver()),this.isCurrentSlide(l)||s.emit("removeSlide",l)}}No=window.scrollX,Fo=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",t),this.state!==W.CustomClosing?(e===void 0&&a&&(e=this.optionFor(a,"hideClass")),e&&a?(this.animate(a.contentEl,e,()=>{s&&s.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var t;if(this.state===W.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=W.Destroy,(t=this.carousel)===null||t===void 0||t.destroy();const e=this.container;e&&e.remove(),ie.delete(this.id);const i=N.getInstance();i?i.focus():(lt&&(lt.remove(),lt=null),jt&&(jt.remove(),jt=null),D(document.documentElement,To),(()=>{if(!Le)return;const o=document,r=o.body;r.classList.remove(ti),r.style.setProperty(Ao,""),o.documentElement.style.setProperty(_o,"")})(),this.emit("destroy"))}static bind(t,e,i){if(!Le)return;let o,r="",s={};if(t===void 0?o=document.body:It(t)?(o=document.body,r=t,typeof e=="object"&&(s=e||{})):(o=t,It(e)&&(r=e),typeof i=="object"&&(s=i||{})),!o||!tt(o))return;r=r||"[data-fancybox]";const a=N.openers.get(o)||new Map;a.set(r,s),N.openers.set(o,a),a.size===1&&o.addEventListener("click",N.fromEvent)}static unbind(t,e){let i,o="";if(It(t)?(i=document.body,o=t):(i=t,It(e)&&(o=e)),!i)return;const r=N.openers.get(i);r&&o&&r.delete(o),o&&r||(N.openers.delete(i),i.removeEventListener("click",N.fromEvent))}static destroy(){let t;for(;t=N.getInstance();)t.destroy();for(const e of N.openers.keys())e.removeEventListener("click",N.fromEvent);N.openers=new Map}static fromEvent(t){if(t.defaultPrevented||t.button&&t.button!==0||t.ctrlKey||t.metaKey||t.shiftKey)return;let e=t.composedPath()[0];const i=e.closest("[data-fancybox-trigger]");if(i){const p=i.dataset.fancyboxTrigger||"",g=document.querySelectorAll(`[data-fancybox="${p}"]`),m=parseInt(i.dataset.fancyboxIndex||"",10)||0;e=g[m]||e}if(!(e&&e instanceof Element))return;let o,r,s,a;if([...N.openers].reverse().find(([p,g])=>!(!p.contains(e)||![...g].reverse().find(([m,v])=>{let b=e.closest(m);return!!b&&(o=p,r=m,s=b,a=v,!0)}))),!o||!r||!s)return;a=a||{},t.preventDefault(),e=s;let u=[],l=et({},vi,a);l.event=t,l.triggerEl=e,l.delegate=i;const c=l.groupAll,h=l.groupAttr,f=h&&e?e.getAttribute(`${h}`):"";if((!e||f||c)&&(u=[].slice.call(o.querySelectorAll(r))),e&&!c&&(u=f?u.filter(p=>p.getAttribute(`${h}`)===f):[e]),!u.length)return;const d=N.getInstance();return d&&d.options.triggerEl&&u.indexOf(d.options.triggerEl)>-1?void 0:(e&&(l.startIndex=u.indexOf(e)),N.fromNodes(u,l))}static fromSelector(t,e,i){let o=null,r="",s={};if(It(t)?(o=document.body,r=t,typeof e=="object"&&(s=e||{})):t instanceof HTMLElement&&It(e)&&(o=t,r=e,typeof i=="object"&&(s=i||{})),!o||!r)return!1;const a=N.openers.get(o);return!!a&&(s=et({},a.get(r)||{},s),!!s&&N.fromNodes(Array.from(o.querySelectorAll(r)),s))}static fromNodes(t,e){e=et({},vi,e||{});const i=[];for(const o of t){const r=o.dataset||{},s=r[ne]||o.getAttribute(ri)||o.getAttribute("currentSrc")||o.getAttribute(ne)||void 0;let a;const u=e.delegate;let l;u&&i.length===e.startIndex&&(a=u instanceof HTMLImageElement?u:u.querySelector("img:not([aria-hidden])")),a||(a=o instanceof HTMLImageElement?o:o.querySelector("img:not([aria-hidden])")),a&&(l=a.currentSrc||a[ne]||void 0,!l&&a.dataset&&(l=a.dataset.lazySrc||a.dataset[ne]||void 0));const c={src:s,triggerEl:o,thumbEl:a,thumbElSrc:l,thumbSrc:l};for(const h in r){let f=r[h]+"";f=f!=="false"&&(f==="true"||f),c[h]=f}i.push(c)}return new N(i,e)}static getInstance(t){return t?ie.get(t):Array.from(ie.values()).reverse().find(e=>!e.isClosing()&&e)||null}static getSlide(){var t;return((t=N.getInstance())===null||t===void 0?void 0:t.getSlide())||null}static show(t=[],e={}){return new N(t,e)}static next(){const t=N.getInstance();t&&t.next()}static prev(){const t=N.getInstance();t&&t.prev()}static close(t=!0,...e){if(t)for(const i of ie.values())i.close(...e);else{const i=N.getInstance();i&&i.close(...e)}}}Object.defineProperty(N,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(N,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:vi}),Object.defineProperty(N,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:fa}),Object.defineProperty(N,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});class St{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let o=0;o<this._n&&o<32;o++){const r=e[o],s=t+r,a=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);a&&(e[i++]=a),t=s}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,o,r,s=0;if(e>0){for(s=t[--e];e>0&&(i=s,o=t[--e],s=i+o,r=o-(s-i),!r););e>0&&(r<0&&t[e-1]<0||r>0&&t[e-1]>0)&&(o=r*2,i=s+o,o==i-s&&(s=i))}return s}}function*pa(n){for(const t of n)yield*t}function Ur(n){return Array.from(pa(n))}function ae(n,t,e){n=+n,t=+t,e=(o=arguments.length)<2?(t=n,n=0,1):o<3?1:+e;for(var i=-1,o=Math.max(0,Math.ceil((t-n)/e))|0,r=new Array(o);++i<o;)r[i]=n+i*e;return r}var ga={value:()=>{}};function Kr(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new hn(e)}function hn(n){this._=n}function ma(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",o=e.indexOf(".");if(o>=0&&(i=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}hn.prototype=Kr.prototype={constructor:hn,on:function(n,t){var e=this._,i=ma(n+"",e),o,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((o=(n=i[r]).type)&&(o=va(e[o],n.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(n=i[r]).type)e[o]=Do(e[o],n.name,t);else if(t==null)for(o in e)e[o]=Do(e[o],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new hn(n)},call:function(n,t){if((o=arguments.length-2)>0)for(var e=new Array(o),i=0,o,r;i<o;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,r=i.length;o<r;++o)i[o].value.apply(t,e)}};function va(n,t){for(var e=0,i=n.length,o;e<i;++e)if((o=n[e]).name===t)return o.value}function Do(n,t,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n[i]=ga,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var yi="http://www.w3.org/1999/xhtml";const $o={svg:"http://www.w3.org/2000/svg",xhtml:yi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jn(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),$o.hasOwnProperty(t)?{space:$o[t],local:n}:n}function ya(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===yi&&t.documentElement.namespaceURI===yi?t.createElement(n):t.createElementNS(e,n)}}function ba(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Jr(n){var t=jn(n);return(t.local?ba:ya)(t)}function wa(){}function Gi(n){return n==null?wa:function(){return this.querySelector(n)}}function xa(n){typeof n!="function"&&(n=Gi(n));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var r=t[o],s=r.length,a=i[o]=new Array(s),u,l,c=0;c<s;++c)(u=r[c])&&(l=n.call(u,u.__data__,c,r))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new ot(i,this._parents)}function Sa(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Ea(){return[]}function Qr(n){return n==null?Ea:function(){return this.querySelectorAll(n)}}function Ma(n){return function(){return Sa(n.apply(this,arguments))}}function Pa(n){typeof n=="function"?n=Ma(n):n=Qr(n);for(var t=this._groups,e=t.length,i=[],o=[],r=0;r<e;++r)for(var s=t[r],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(i.push(n.call(u,u.__data__,l,s)),o.push(u));return new ot(i,o)}function ts(n){return function(){return this.matches(n)}}function es(n){return function(t){return t.matches(n)}}var Ca=Array.prototype.find;function Ta(n){return function(){return Ca.call(this.children,n)}}function _a(){return this.firstElementChild}function Aa(n){return this.select(n==null?_a:Ta(typeof n=="function"?n:es(n)))}var Oa=Array.prototype.filter;function La(){return Array.from(this.children)}function ka(n){return function(){return Oa.call(this.children,n)}}function Ra(n){return this.selectAll(n==null?La:ka(typeof n=="function"?n:es(n)))}function za(n){typeof n!="function"&&(n=ts(n));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var r=t[o],s=r.length,a=i[o]=[],u,l=0;l<s;++l)(u=r[l])&&n.call(u,u.__data__,l,r)&&a.push(u);return new ot(i,this._parents)}function ns(n){return new Array(n.length)}function Ia(){return new ot(this._enter||this._groups.map(ns),this._parents)}function yn(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}yn.prototype={constructor:yn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Na(n){return function(){return n}}function Fa(n,t,e,i,o,r){for(var s=0,a,u=t.length,l=r.length;s<l;++s)(a=t[s])?(a.__data__=r[s],i[s]=a):e[s]=new yn(n,r[s]);for(;s<u;++s)(a=t[s])&&(o[s]=a)}function Da(n,t,e,i,o,r,s){var a,u,l=new Map,c=t.length,h=r.length,f=new Array(c),d;for(a=0;a<c;++a)(u=t[a])&&(f[a]=d=s.call(u,u.__data__,a,t)+"",l.has(d)?o[a]=u:l.set(d,u));for(a=0;a<h;++a)d=s.call(n,r[a],a,r)+"",(u=l.get(d))?(i[a]=u,u.__data__=r[a],l.delete(d)):e[a]=new yn(n,r[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(f[a])===u&&(o[a]=u)}function $a(n){return n.__data__}function Ha(n,t){if(!arguments.length)return Array.from(this,$a);var e=t?Da:Fa,i=this._parents,o=this._groups;typeof n!="function"&&(n=Na(n));for(var r=o.length,s=new Array(r),a=new Array(r),u=new Array(r),l=0;l<r;++l){var c=i[l],h=o[l],f=h.length,d=ja(n.call(c,c&&c.__data__,l,i)),p=d.length,g=a[l]=new Array(p),m=s[l]=new Array(p),v=u[l]=new Array(f);e(c,h,g,m,v,d,t);for(var b=0,y=0,w,E;b<p;++b)if(w=g[b]){for(b>=y&&(y=b+1);!(E=m[y])&&++y<p;);w._next=E||null}}return s=new ot(s,i),s._enter=a,s._exit=u,s}function ja(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Ba(){return new ot(this._exit||this._groups.map(ns),this._parents)}function Xa(n,t,e){var i=this.enter(),o=this,r=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(o=t(o),o&&(o=o.selection())),e==null?r.remove():e(r),i&&o?i.merge(o).order():o}function qa(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,o=e.length,r=i.length,s=Math.min(o,r),a=new Array(o),u=0;u<s;++u)for(var l=e[u],c=i[u],h=l.length,f=a[u]=new Array(h),d,p=0;p<h;++p)(d=l[p]||c[p])&&(f[p]=d);for(;u<o;++u)a[u]=e[u];return new ot(a,this._parents)}function Ya(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],o=i.length-1,r=i[o],s;--o>=0;)(s=i[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Wa(n){n||(n=Va);function t(h,f){return h&&f?n(h.__data__,f.__data__):!h-!f}for(var e=this._groups,i=e.length,o=new Array(i),r=0;r<i;++r){for(var s=e[r],a=s.length,u=o[r]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new ot(o,this._parents).order()}function Va(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Za(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Ga(){return Array.from(this)}function Ua(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null}function Ka(){let n=0;for(const t of this)++n;return n}function Ja(){return!this.node()}function Qa(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var o=t[e],r=0,s=o.length,a;r<s;++r)(a=o[r])&&n.call(a,a.__data__,r,o);return this}function tl(n){return function(){this.removeAttribute(n)}}function el(n){return function(){this.removeAttributeNS(n.space,n.local)}}function nl(n,t){return function(){this.setAttribute(n,t)}}function il(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function ol(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function rl(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function sl(n,t){var e=jn(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?el:tl:typeof t=="function"?e.local?rl:ol:e.local?il:nl)(e,t))}function is(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function al(n){return function(){this.style.removeProperty(n)}}function ll(n,t,e){return function(){this.style.setProperty(n,t,e)}}function cl(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function ul(n,t,e){return arguments.length>1?this.each((t==null?al:typeof t=="function"?cl:ll)(n,t,e??"")):he(this.node(),n)}function he(n,t){return n.style.getPropertyValue(t)||is(n).getComputedStyle(n,null).getPropertyValue(t)}function hl(n){return function(){delete this[n]}}function fl(n,t){return function(){this[n]=t}}function dl(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function pl(n,t){return arguments.length>1?this.each((t==null?hl:typeof t=="function"?dl:fl)(n,t)):this.node()[n]}function os(n){return n.trim().split(/^|\s+/)}function Ui(n){return n.classList||new rs(n)}function rs(n){this._node=n,this._names=os(n.getAttribute("class")||"")}rs.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ss(n,t){for(var e=Ui(n),i=-1,o=t.length;++i<o;)e.add(t[i])}function as(n,t){for(var e=Ui(n),i=-1,o=t.length;++i<o;)e.remove(t[i])}function gl(n){return function(){ss(this,n)}}function ml(n){return function(){as(this,n)}}function vl(n,t){return function(){(t.apply(this,arguments)?ss:as)(this,n)}}function yl(n,t){var e=os(n+"");if(arguments.length<2){for(var i=Ui(this.node()),o=-1,r=e.length;++o<r;)if(!i.contains(e[o]))return!1;return!0}return this.each((typeof t=="function"?vl:t?gl:ml)(e,t))}function bl(){this.textContent=""}function wl(n){return function(){this.textContent=n}}function xl(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function Sl(n){return arguments.length?this.each(n==null?bl:(typeof n=="function"?xl:wl)(n)):this.node().textContent}function El(){this.innerHTML=""}function Ml(n){return function(){this.innerHTML=n}}function Pl(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function Cl(n){return arguments.length?this.each(n==null?El:(typeof n=="function"?Pl:Ml)(n)):this.node().innerHTML}function Tl(){this.nextSibling&&this.parentNode.appendChild(this)}function _l(){return this.each(Tl)}function Al(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ol(){return this.each(Al)}function Ll(n){var t=typeof n=="function"?n:Jr(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kl(){return null}function Rl(n,t){var e=typeof n=="function"?n:Jr(n),i=t==null?kl:typeof t=="function"?t:Gi(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function zl(){var n=this.parentNode;n&&n.removeChild(this)}function Il(){return this.each(zl)}function Nl(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Fl(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Dl(n){return this.select(n?Fl:Nl)}function $l(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Hl(n){return function(t){n.call(this,t,this.__data__)}}function jl(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function Bl(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,o=t.length,r;e<o;++e)r=t[e],(!n.type||r.type===n.type)&&r.name===n.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function Xl(n,t,e){return function(){var i=this.__on,o,r=Hl(t);if(i){for(var s=0,a=i.length;s<a;++s)if((o=i[s]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=e),o.value=t;return}}this.addEventListener(n.type,r,e),o={type:n.type,name:n.name,value:t,listener:r,options:e},i?i.push(o):this.__on=[o]}}function ql(n,t,e){var i=jl(n+""),o,r=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(o=0,c=a[u];o<r;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Xl:Bl,o=0;o<r;++o)this.each(a(i[o],t,e));return this}function ls(n,t,e){var i=is(n),o=i.CustomEvent;typeof o=="function"?o=new o(t,e):(o=i.document.createEvent("Event"),e?(o.initEvent(t,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(t,!1,!1)),n.dispatchEvent(o)}function Yl(n,t){return function(){return ls(this,n,t)}}function Wl(n,t){return function(){return ls(this,n,t.apply(this,arguments))}}function Vl(n,t){return this.each((typeof t=="function"?Wl:Yl)(n,t))}function*Zl(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],o=0,r=i.length,s;o<r;++o)(s=i[o])&&(yield s)}var cs=[null];function ot(n,t){this._groups=n,this._parents=t}function ge(){return new ot([[document.documentElement]],cs)}function Gl(){return this}ot.prototype=ge.prototype={constructor:ot,select:xa,selectAll:Pa,selectChild:Aa,selectChildren:Ra,filter:za,data:Ha,enter:Ia,exit:Ba,join:Xa,merge:qa,selection:Gl,order:Ya,sort:Wa,call:Za,nodes:Ga,node:Ua,size:Ka,empty:Ja,each:Qa,attr:sl,style:ul,property:pl,classed:yl,text:Sl,html:Cl,raise:_l,lower:Ol,append:Ll,insert:Rl,remove:Il,clone:Dl,datum:$l,on:ql,dispatch:Vl,[Symbol.iterator]:Zl};function le(n){return typeof n=="string"?new ot([[document.querySelector(n)]],[document.documentElement]):new ot([[n]],cs)}function Ul(n){let t;for(;t=n.sourceEvent;)n=t;return n}function Kl(n,t){if(n=Ul(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}}return[n.pageX,n.pageY]}function Ki(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function us(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function De(){}var ke=.7,bn=1/ke,ue="\\s*([+-]?\\d+)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jl=/^#([0-9a-f]{3,8})$/,Ql=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),tc=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),ec=new RegExp(`^rgba\\(${ue},${ue},${ue},${Re}\\)$`),nc=new RegExp(`^rgba\\(${Et},${Et},${Et},${Re}\\)$`),ic=new RegExp(`^hsl\\(${Re},${Et},${Et}\\)$`),oc=new RegExp(`^hsla\\(${Re},${Et},${Et},${Re}\\)$`),Ho={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ki(De,ze,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:jo,formatHex:jo,formatHex8:rc,formatHsl:sc,formatRgb:Bo,toString:Bo});function jo(){return this.rgb().formatHex()}function rc(){return this.rgb().formatHex8()}function sc(){return hs(this).formatHsl()}function Bo(){return this.rgb().formatRgb()}function ze(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=Jl.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?Xo(t):e===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Qe(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Qe(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ql.exec(n))?new nt(t[1],t[2],t[3],1):(t=tc.exec(n))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ec.exec(n))?Qe(t[1],t[2],t[3],t[4]):(t=nc.exec(n))?Qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ic.exec(n))?Wo(t[1],t[2]/100,t[3]/100,1):(t=oc.exec(n))?Wo(t[1],t[2]/100,t[3]/100,t[4]):Ho.hasOwnProperty(n)?Xo(Ho[n]):n==="transparent"?new nt(NaN,NaN,NaN,0):null}function Xo(n){return new nt(n>>16&255,n>>8&255,n&255,1)}function Qe(n,t,e,i){return i<=0&&(n=t=e=NaN),new nt(n,t,e,i)}function ac(n){return n instanceof De||(n=ze(n)),n?(n=n.rgb(),new nt(n.r,n.g,n.b,n.opacity)):new nt}function bi(n,t,e,i){return arguments.length===1?ac(n):new nt(n,t,e,i??1)}function nt(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}Ki(nt,bi,us(De,{brighter(n){return n=n==null?bn:Math.pow(bn,n),new nt(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ke:Math.pow(ke,n),new nt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new nt(Vt(this.r),Vt(this.g),Vt(this.b),wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qo,formatHex:qo,formatHex8:lc,formatRgb:Yo,toString:Yo}));function qo(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}`}function lc(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}${Yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yo(){const n=wn(this.opacity);return`${n===1?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${n===1?")":`, ${n})`}`}function wn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Vt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Yt(n){return n=Vt(n),(n<16?"0":"")+n.toString(16)}function Wo(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new ft(n,t,e,i)}function hs(n){if(n instanceof ft)return new ft(n.h,n.s,n.l,n.opacity);if(n instanceof De||(n=ze(n)),!n)return new ft;if(n instanceof ft)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,o=Math.min(t,e,i),r=Math.max(t,e,i),s=NaN,a=r-o,u=(r+o)/2;return a?(t===r?s=(e-i)/a+(e<i)*6:e===r?s=(i-t)/a+2:s=(t-e)/a+4,a/=u<.5?r+o:2-r-o,s*=60):a=u>0&&u<1?0:s,new ft(s,a,u,n.opacity)}function cc(n,t,e,i){return arguments.length===1?hs(n):new ft(n,t,e,i??1)}function ft(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}Ki(ft,cc,us(De,{brighter(n){return n=n==null?bn:Math.pow(bn,n),new ft(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ke:Math.pow(ke,n),new ft(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,o=2*e-i;return new nt(si(n>=240?n-240:n+120,o,i),si(n,o,i),si(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new ft(Vo(this.h),tn(this.s),tn(this.l),wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=wn(this.opacity);return`${n===1?"hsl(":"hsla("}${Vo(this.h)}, ${tn(this.s)*100}%, ${tn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Vo(n){return n=(n||0)%360,n<0?n+360:n}function tn(n){return Math.max(0,Math.min(1,n||0))}function si(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const fs=n=>()=>n;function uc(n,t){return function(e){return n+e*t}}function hc(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function fc(n){return(n=+n)==1?ds:function(t,e){return e-t?hc(t,e,n):fs(isNaN(t)?e:t)}}function ds(n,t){var e=t-n;return e?uc(n,e):fs(isNaN(n)?t:n)}const Zo=function n(t){var e=fc(t);function i(o,r){var s=e((o=bi(o)).r,(r=bi(r)).r),a=e(o.g,r.g),u=e(o.b,r.b),l=ds(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=a(c),o.b=u(c),o.opacity=l(c),o+""}}return i.gamma=n,i}(1);function Nt(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}var wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ai=new RegExp(wi.source,"g");function dc(n){return function(){return n}}function pc(n){return function(t){return n(t)+""}}function gc(n,t){var e=wi.lastIndex=ai.lastIndex=0,i,o,r,s=-1,a=[],u=[];for(n=n+"",t=t+"";(i=wi.exec(n))&&(o=ai.exec(t));)(r=o.index)>e&&(r=t.slice(e,r),a[s]?a[s]+=r:a[++s]=r),(i=i[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,u.push({i:s,x:Nt(i,o)})),e=ai.lastIndex;return e<t.length&&(r=t.slice(e),a[s]?a[s]+=r:a[++s]=r),a.length<2?u[0]?pc(u[0].x):dc(t):(t=u.length,function(l){for(var c=0,h;c<t;++c)a[(h=u[c]).i]=h.x(l);return a.join("")})}var Go=180/Math.PI,xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ps(n,t,e,i,o,r){var s,a,u;return(s=Math.sqrt(n*n+t*t))&&(n/=s,t/=s),(u=n*e+t*i)&&(e-=n*u,i-=t*u),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,u/=a),n*i<t*e&&(n=-n,t=-t,u=-u,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(t,n)*Go,skewX:Math.atan(u)*Go,scaleX:s,scaleY:a}}var en;function mc(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?xi:ps(t.a,t.b,t.c,t.d,t.e,t.f)}function vc(n){return n==null||(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",n),!(n=en.transform.baseVal.consolidate()))?xi:(n=n.matrix,ps(n.a,n.b,n.c,n.d,n.e,n.f))}function gs(n,t,e,i){function o(l){return l.length?l.pop()+" ":""}function r(l,c,h,f,d,p){if(l!==h||c!==f){var g=d.push("translate(",null,t,null,e);p.push({i:g-4,x:Nt(l,h)},{i:g-2,x:Nt(c,f)})}else(h||f)&&d.push("translate("+h+t+f+e)}function s(l,c,h,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:h.push(o(h)+"rotate(",null,i)-2,x:Nt(l,c)})):c&&h.push(o(h)+"rotate("+c+i)}function a(l,c,h,f){l!==c?f.push({i:h.push(o(h)+"skewX(",null,i)-2,x:Nt(l,c)}):c&&h.push(o(h)+"skewX("+c+i)}function u(l,c,h,f,d,p){if(l!==h||c!==f){var g=d.push(o(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Nt(l,h)},{i:g-2,x:Nt(c,f)})}else(h!==1||f!==1)&&d.push(o(d)+"scale("+h+","+f+")")}return function(l,c){var h=[],f=[];return l=n(l),c=n(c),r(l.translateX,l.translateY,c.translateX,c.translateY,h,f),s(l.rotate,c.rotate,h,f),a(l.skewX,c.skewX,h,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,h,f),l=c=null,function(d){for(var p=-1,g=f.length,m;++p<g;)h[(m=f[p]).i]=m.x(d);return h.join("")}}}var yc=gs(mc,"px, ","px)","deg)"),bc=gs(vc,", ",")",")"),fe=0,xe=0,be=0,ms=1e3,xn,Se,Sn=0,Gt=0,Bn=0,Ie=typeof performance=="object"&&performance.now?performance:Date,vs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Ji(){return Gt||(vs(wc),Gt=Ie.now()+Bn)}function wc(){Gt=0}function En(){this._call=this._time=this._next=null}En.prototype=ys.prototype={constructor:En,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?Ji():+e)+(t==null?0:+t),!this._next&&Se!==this&&(Se?Se._next=this:xn=this,Se=this),this._call=n,this._time=e,Si()},stop:function(){this._call&&(this._call=null,this._time=1/0,Si())}};function ys(n,t,e){var i=new En;return i.restart(n,t,e),i}function xc(){Ji(),++fe;for(var n=xn,t;n;)(t=Gt-n._time)>=0&&n._call.call(void 0,t),n=n._next;--fe}function Uo(){Gt=(Sn=Ie.now())+Bn,fe=xe=0;try{xc()}finally{fe=0,Ec(),Gt=0}}function Sc(){var n=Ie.now(),t=n-Sn;t>ms&&(Bn-=t,Sn=n)}function Ec(){for(var n,t=xn,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:xn=e);Se=n,Si(i)}function Si(n){if(!fe){xe&&(xe=clearTimeout(xe));var t=n-Gt;t>24?(n<1/0&&(xe=setTimeout(Uo,n-Ie.now()-Bn)),be&&(be=clearInterval(be))):(be||(Sn=Ie.now(),be=setInterval(Sc,ms)),fe=1,vs(Uo))}}function Ko(n,t,e){var i=new En;return t=t==null?0:+t,i.restart(o=>{i.stop(),n(o+t)},t,e),i}var Mc=Kr("start","end","cancel","interrupt"),Pc=[],bs=0,Jo=1,Ei=2,fn=3,Qo=4,Mi=5,dn=6;function Xn(n,t,e,i,o,r){var s=n.__transition;if(!s)n.__transition={};else if(e in s)return;Cc(n,e,{name:t,index:i,group:o,on:Mc,tween:Pc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:bs})}function Qi(n,t){var e=mt(n,t);if(e.state>bs)throw new Error("too late; already scheduled");return e}function Ct(n,t){var e=mt(n,t);if(e.state>fn)throw new Error("too late; already running");return e}function mt(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function Cc(n,t,e){var i=n.__transition,o;i[t]=e,e.timer=ys(r,0,e.time);function r(l){e.state=Jo,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var c,h,f,d;if(e.state!==Jo)return u();for(c in i)if(d=i[c],d.name===e.name){if(d.state===fn)return Ko(s);d.state===Qo?(d.state=dn,d.timer.stop(),d.on.call("interrupt",n,n.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=dn,d.timer.stop(),d.on.call("cancel",n,n.__data__,d.index,d.group),delete i[c])}if(Ko(function(){e.state===fn&&(e.state=Qo,e.timer.restart(a,e.delay,e.time),a(l))}),e.state=Ei,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Ei){for(e.state=fn,o=new Array(f=e.tween.length),c=0,h=-1;c<f;++c)(d=e.tween[c].value.call(n,n.__data__,e.index,e.group))&&(o[++h]=d);o.length=h+1}}function a(l){for(var c=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(u),e.state=Mi,1),h=-1,f=o.length;++h<f;)o[h].call(n,c);e.state===Mi&&(e.on.call("end",n,n.__data__,e.index,e.group),u())}function u(){e.state=dn,e.timer.stop(),delete i[t];for(var l in i)return;delete n.__transition}}function Tc(n,t){var e=n.__transition,i,o,r=!0,s;if(e){t=t==null?null:t+"";for(s in e){if((i=e[s]).name!==t){r=!1;continue}o=i.state>Ei&&i.state<Mi,i.state=dn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[s]}r&&delete n.__transition}}function _c(n){return this.each(function(){Tc(this,n)})}function Ac(n,t){var e,i;return function(){var o=Ct(this,n),r=o.tween;if(r!==e){i=e=r;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Oc(n,t,e){var i,o;if(typeof e!="function")throw new Error;return function(){var r=Ct(this,n),s=r.tween;if(s!==i){o=(i=s).slice();for(var a={name:t,value:e},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=a;break}u===l&&o.push(a)}r.tween=o}}function Lc(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=mt(this.node(),e).tween,o=0,r=i.length,s;o<r;++o)if((s=i[o]).name===n)return s.value;return null}return this.each((t==null?Ac:Oc)(e,n,t))}function to(n,t,e){var i=n._id;return n.each(function(){var o=Ct(this,i);(o.value||(o.value={}))[t]=e.apply(this,arguments)}),function(o){return mt(o,i).value[t]}}function ws(n,t){var e;return(typeof t=="number"?Nt:t instanceof ze?Zo:(e=ze(t))?(t=e,Zo):gc)(n,t)}function kc(n){return function(){this.removeAttribute(n)}}function Rc(n){return function(){this.removeAttributeNS(n.space,n.local)}}function zc(n,t,e){var i,o=e+"",r;return function(){var s=this.getAttribute(n);return s===o?null:s===i?r:r=t(i=s,e)}}function Ic(n,t,e){var i,o=e+"",r;return function(){var s=this.getAttributeNS(n.space,n.local);return s===o?null:s===i?r:r=t(i=s,e)}}function Nc(n,t,e){var i,o,r;return function(){var s,a=e(this),u;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),u=a+"",s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,a)))}}function Fc(n,t,e){var i,o,r;return function(){var s,a=e(this),u;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),u=a+"",s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,a)))}}function Dc(n,t){var e=jn(n),i=e==="transform"?bc:ws;return this.attrTween(n,typeof t=="function"?(e.local?Fc:Nc)(e,i,to(this,"attr."+n,t)):t==null?(e.local?Rc:kc)(e):(e.local?Ic:zc)(e,i,t))}function $c(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function Hc(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function jc(n,t){var e,i;function o(){var r=t.apply(this,arguments);return r!==i&&(e=(i=r)&&Hc(n,r)),e}return o._value=t,o}function Bc(n,t){var e,i;function o(){var r=t.apply(this,arguments);return r!==i&&(e=(i=r)&&$c(n,r)),e}return o._value=t,o}function Xc(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=jn(n);return this.tween(e,(i.local?jc:Bc)(i,t))}function qc(n,t){return function(){Qi(this,n).delay=+t.apply(this,arguments)}}function Yc(n,t){return t=+t,function(){Qi(this,n).delay=t}}function Wc(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?qc:Yc)(t,n)):mt(this.node(),t).delay}function Vc(n,t){return function(){Ct(this,n).duration=+t.apply(this,arguments)}}function Zc(n,t){return t=+t,function(){Ct(this,n).duration=t}}function Gc(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?Vc:Zc)(t,n)):mt(this.node(),t).duration}function Uc(n,t){if(typeof t!="function")throw new Error;return function(){Ct(this,n).ease=t}}function Kc(n){var t=this._id;return arguments.length?this.each(Uc(t,n)):mt(this.node(),t).ease}function Jc(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Ct(this,n).ease=e}}function Qc(n){if(typeof n!="function")throw new Error;return this.each(Jc(this._id,n))}function tu(n){typeof n!="function"&&(n=ts(n));for(var t=this._groups,e=t.length,i=new Array(e),o=0;o<e;++o)for(var r=t[o],s=r.length,a=i[o]=[],u,l=0;l<s;++l)(u=r[l])&&n.call(u,u.__data__,l,r)&&a.push(u);return new zt(i,this._parents,this._name,this._id)}function eu(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,o=e.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var u=t[a],l=e[a],c=u.length,h=s[a]=new Array(c),f,d=0;d<c;++d)(f=u[d]||l[d])&&(h[d]=f);for(;a<i;++a)s[a]=t[a];return new zt(s,this._parents,this._name,this._id)}function nu(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function iu(n,t,e){var i,o,r=nu(t)?Qi:Ct;return function(){var s=r(this,n),a=s.on;a!==i&&(o=(i=a).copy()).on(t,e),s.on=o}}function ou(n,t){var e=this._id;return arguments.length<2?mt(this.node(),e).on.on(n):this.each(iu(e,n,t))}function ru(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function su(){return this.on("end.remove",ru(this._id))}function au(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Gi(n));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var a=i[s],u=a.length,l=r[s]=new Array(u),c,h,f=0;f<u;++f)(c=a[f])&&(h=n.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),l[f]=h,Xn(l[f],t,e,f,l,mt(c,e)));return new zt(r,this._parents,t,e)}function lu(n){var t=this._name,e=this._id;typeof n!="function"&&(n=Qr(n));for(var i=this._groups,o=i.length,r=[],s=[],a=0;a<o;++a)for(var u=i[a],l=u.length,c,h=0;h<l;++h)if(c=u[h]){for(var f=n.call(c,c.__data__,h,u),d,p=mt(c,e),g=0,m=f.length;g<m;++g)(d=f[g])&&Xn(d,t,e,g,f,p);r.push(f),s.push(c)}return new zt(r,s,t,e)}var cu=ge.prototype.constructor;function uu(){return new cu(this._groups,this._parents)}function hu(n,t){var e,i,o;return function(){var r=he(this,n),s=(this.style.removeProperty(n),he(this,n));return r===s?null:r===e&&s===i?o:o=t(e=r,i=s)}}function xs(n){return function(){this.style.removeProperty(n)}}function fu(n,t,e){var i,o=e+"",r;return function(){var s=he(this,n);return s===o?null:s===i?r:r=t(i=s,e)}}function du(n,t,e){var i,o,r;return function(){var s=he(this,n),a=e(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(n),he(this,n))),s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,a))}}function pu(n,t){var e,i,o,r="style."+t,s="end."+r,a;return function(){var u=Ct(this,n),l=u.on,c=u.value[r]==null?a||(a=xs(t)):void 0;(l!==e||o!==c)&&(i=(e=l).copy()).on(s,o=c),u.on=i}}function gu(n,t,e){var i=(n+="")=="transform"?yc:ws;return t==null?this.styleTween(n,hu(n,i)).on("end.style."+n,xs(n)):typeof t=="function"?this.styleTween(n,du(n,i,to(this,"style."+n,t))).each(pu(this._id,n)):this.styleTween(n,fu(n,i,t),e).on("end.style."+n,null)}function mu(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function vu(n,t,e){var i,o;function r(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&mu(n,s,e)),i}return r._value=t,r}function yu(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,vu(n,t,e??""))}function bu(n){return function(){this.textContent=n}}function wu(n){return function(){var t=n(this);this.textContent=t??""}}function xu(n){return this.tween("text",typeof n=="function"?wu(to(this,"text",n)):bu(n==null?"":n+""))}function Su(n){return function(t){this.textContent=n.call(this,t)}}function Eu(n){var t,e;function i(){var o=n.apply(this,arguments);return o!==e&&(t=(e=o)&&Su(o)),t}return i._value=n,i}function Mu(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,Eu(n))}function Pu(){for(var n=this._name,t=this._id,e=Es(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=mt(u,t);Xn(u,n,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zt(i,this._parents,n,e)}function Cu(){var n,t,e=this,i=e._id,o=e.size();return new Promise(function(r,s){var a={value:s},u={value:function(){--o===0&&r()}};e.each(function(){var l=Ct(this,i),c=l.on;c!==n&&(t=(n=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),o===0&&r()})}var Tu=0;function zt(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function Ss(n){return ge().transition(n)}function Es(){return++Tu}var Lt=ge.prototype;zt.prototype=Ss.prototype={constructor:zt,select:au,selectAll:lu,selectChild:Lt.selectChild,selectChildren:Lt.selectChildren,filter:tu,merge:eu,selection:uu,transition:Pu,call:Lt.call,nodes:Lt.nodes,node:Lt.node,size:Lt.size,empty:Lt.empty,each:Lt.each,on:ou,attr:Dc,attrTween:Xc,style:gu,styleTween:yu,text:xu,textTween:Mu,remove:su,tween:Lc,delay:Wc,duration:Gc,ease:Kc,easeVarying:Qc,end:Cu,[Symbol.iterator]:Lt[Symbol.iterator]};function _u(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Au={time:null,delay:0,duration:250,ease:_u};function Ou(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function Lu(n){var t,e;n instanceof zt?(t=n._id,n=n._name):(t=Es(),(e=Au).time=Ji(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],a=s.length,u,l=0;l<a;++l)(u=s[l])&&Xn(u,n,t,l,s,e||Ou(u,t));return new zt(i,this._parents,n,t)}ge.prototype.interrupt=_c;ge.prototype.transition=Lu;function ku(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function Ms(n,t){return fetch(n,t).then(ku)}var I=1e-6,Pi=1e-12,F=Math.PI,ut=F/2,tr=F/4,ht=F*2,U=180/F,j=F/180,B=Math.abs,Ru=Math.atan,Mt=Math.atan2,R=Math.cos,nn=Math.ceil,Ci=Math.hypot,O=Math.sin,zu=Math.sign||function(n){return n>0?1:n<0?-1:0},pt=Math.sqrt;function Iu(n){return n>1?0:n<-1?F:Math.acos(n)}function Pt(n){return n>1?ut:n<-1?-ut:Math.asin(n)}function er(n){return(n=O(n/2))*n}function it(){}function Mn(n,t){n&&ir.hasOwnProperty(n.type)&&ir[n.type](n,t)}var nr={Feature:function(n,t){Mn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,o=e.length;++i<o;)Mn(e[i].geometry,t)}},ir={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Ti(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)Ti(e[i],t,0)},Polygon:function(n,t){or(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,o=e.length;++i<o;)or(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,o=e.length;++i<o;)Mn(e[i],t)}};function Ti(n,t,e){var i=-1,o=n.length-e,r;for(t.lineStart();++i<o;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function or(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Ti(n[e],t,1);t.polygonEnd()}function Xt(n,t){n&&nr.hasOwnProperty(n.type)?nr[n.type](n,t):Mn(n,t)}function _i(n){return[Mt(n[1],n[0]),Pt(n[2])]}function de(n){var t=n[0],e=n[1],i=R(e);return[i*R(t),i*O(t),O(e)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Pn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function li(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function rn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Ai(n){var t=pt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}var Ee,Cn,Tn,_n,An,On,Ln,kn,Oi,Li,ki,Ps,Cs,K,J,Q,dt={sphere:it,point:eo,lineStart:rr,lineEnd:sr,polygonStart:function(){dt.lineStart=Du,dt.lineEnd=$u},polygonEnd:function(){dt.lineStart=rr,dt.lineEnd=sr}};function eo(n,t){n*=j,t*=j;var e=R(t);$e(e*R(n),e*O(n),O(t))}function $e(n,t,e){++Ee,Tn+=(n-Tn)/Ee,_n+=(t-_n)/Ee,An+=(e-An)/Ee}function rr(){dt.point=Nu}function Nu(n,t){n*=j,t*=j;var e=R(t);K=e*R(n),J=e*O(n),Q=O(t),dt.point=Fu,$e(K,J,Q)}function Fu(n,t){n*=j,t*=j;var e=R(t),i=e*R(n),o=e*O(n),r=O(t),s=Mt(pt((s=J*r-Q*o)*s+(s=Q*i-K*r)*s+(s=K*o-J*i)*s),K*i+J*o+Q*r);Cn+=s,On+=s*(K+(K=i)),Ln+=s*(J+(J=o)),kn+=s*(Q+(Q=r)),$e(K,J,Q)}function sr(){dt.point=eo}function Du(){dt.point=Hu}function $u(){Ts(Ps,Cs),dt.point=eo}function Hu(n,t){Ps=n,Cs=t,n*=j,t*=j,dt.point=Ts;var e=R(t);K=e*R(n),J=e*O(n),Q=O(t),$e(K,J,Q)}function Ts(n,t){n*=j,t*=j;var e=R(t),i=e*R(n),o=e*O(n),r=O(t),s=J*r-Q*o,a=Q*i-K*r,u=K*o-J*i,l=Ci(s,a,u),c=Pt(l),h=l&&-c/l;Oi.add(h*s),Li.add(h*a),ki.add(h*u),Cn+=c,On+=c*(K+(K=i)),Ln+=c*(J+(J=o)),kn+=c*(Q+(Q=r)),$e(K,J,Q)}function ju(n){Ee=Cn=Tn=_n=An=On=Ln=kn=0,Oi=new St,Li=new St,ki=new St,Xt(n,dt);var t=+Oi,e=+Li,i=+ki,o=Ci(t,e,i);return o<Pi&&(t=On,e=Ln,i=kn,Cn<I&&(t=Tn,e=_n,i=An),o=Ci(t,e,i),o<Pi)?[NaN,NaN]:[Mt(e,t)*U,Pt(i/o)*U]}function Ri(n,t){function e(i,o){return i=n(i,o),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,o){return i=t.invert(i,o),i&&n.invert(i[0],i[1])}),e}function zi(n,t){return B(n)>F&&(n-=Math.round(n/ht)*ht),[n,t]}zi.invert=zi;function Bu(n,t,e){return(n%=ht)?t||e?Ri(lr(n),cr(t,e)):lr(n):t||e?cr(t,e):zi}function ar(n){return function(t,e){return t+=n,B(t)>F&&(t-=Math.round(t/ht)*ht),[t,e]}}function lr(n){var t=ar(n);return t.invert=ar(-n),t}function cr(n,t){var e=R(n),i=O(n),o=R(t),r=O(t);function s(a,u){var l=R(u),c=R(a)*l,h=O(a)*l,f=O(u),d=f*e+c*i;return[Mt(h*o-d*r,c*e-f*i),Pt(d*o+h*r)]}return s.invert=function(a,u){var l=R(u),c=R(a)*l,h=O(a)*l,f=O(u),d=f*o-h*r;return[Mt(h*o+f*r,c*e+d*i),Pt(d*e-c*i)]},s}function Xu(n,t,e,i,o,r){if(e){var s=R(t),a=O(t),u=i*e;o==null?(o=t+i*ht,r=t-u/2):(o=ur(s,o),r=ur(s,r),(i>0?o<r:o>r)&&(o+=i*ht));for(var l,c=o;i>0?c>r:c<r;c-=u)l=_i([s,-a*R(c),-a*O(c)]),n.point(l[0],l[1])}}function ur(n,t){t=de(t),t[0]-=n,Ai(t);var e=Iu(-t[1]);return((-t[2]<0?-e:e)+ht-I)%ht}function _s(){var n=[],t;return{point:function(e,i,o){t.push([e,i,o])},lineStart:function(){n.push(t=[])},lineEnd:it,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function pn(n,t){return B(n[0]-t[0])<I&&B(n[1]-t[1])<I}function sn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function As(n,t,e,i,o){var r=[],s=[],a,u;if(n.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],v=p[g],b;if(pn(m,v)){if(!m[2]&&!v[2]){for(o.lineStart(),a=0;a<g;++a)o.point((m=p[a])[0],m[1]);o.lineEnd();return}v[0]+=2*I}r.push(b=new sn(m,p,null,!0)),s.push(b.o=new sn(m,null,b,!1)),r.push(b=new sn(v,p,null,!1)),s.push(b.o=new sn(v,null,b,!0))}}),!!r.length){for(s.sort(t),hr(r),hr(s),a=0,u=s.length;a<u;++a)s[a].e=e=!e;for(var l=r[0],c,h;;){for(var f=l,d=!0;f.v;)if((f=f.n)===l)return;c=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,u=c.length;a<u;++a)o.point((h=c[a])[0],h[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(d)for(c=f.p.z,a=c.length-1;a>=0;--a)o.point((h=c[a])[0],h[1]);else i(f.x,f.p.x,-1,o);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);o.lineEnd()}}}function hr(n){if(t=n.length){for(var t,e=0,i=n[0],o;++e<t;)i.n=o=n[e],o.p=i,i=o;i.n=o=n[0],o.p=i}}function ci(n){return B(n[0])<=F?n[0]:zu(n[0])*((B(n[0])+F)%ht-F)}function qu(n,t){var e=ci(t),i=t[1],o=O(i),r=[O(e),-R(e),0],s=0,a=0,u=new St;o===1?i=ut+I:o===-1&&(i=-ut-I);for(var l=0,c=n.length;l<c;++l)if(f=(h=n[l]).length)for(var h,f,d=h[f-1],p=ci(d),g=d[1]/2+tr,m=O(g),v=R(g),b=0;b<f;++b,p=w,m=M,v=C,d=y){var y=h[b],w=ci(y),E=y[1]/2+tr,M=O(E),C=R(E),T=w-p,L=T>=0?1:-1,$=L*T,_=$>F,X=m*M;if(u.add(Mt(X*L*O($),v*C+X*R($))),s+=_?T+L*ht:T,_^p>=e^w>=e){var A=Pn(de(d),de(y));Ai(A);var z=Pn(r,A);Ai(z);var x=(_^T>=0?-1:1)*Pt(z[2]);(i>x||i===x&&(A[0]||A[1]))&&(a+=_^T>=0?1:-1)}}return(s<-I||s<I&&u<-Pi)^a&1}function Os(n,t,e,i){return function(o){var r=t(o),s=_s(),a=t(s),u=!1,l,c,h,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=y,c=[],l=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,c=Ur(c);var w=qu(l,i);c.length?(u||(o.polygonStart(),u=!0),As(c,Wu,w,e,o)):w&&(u||(o.polygonStart(),u=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),u&&(o.polygonEnd(),u=!1),c=l=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(w,E){n(w,E)&&o.point(w,E)}function p(w,E){r.point(w,E)}function g(){f.point=p,r.lineStart()}function m(){f.point=d,r.lineEnd()}function v(w,E){h.push([w,E]),a.point(w,E)}function b(){a.lineStart(),h=[]}function y(){v(h[0][0],h[0][1]),a.lineEnd();var w=a.clean(),E=s.result(),M,C=E.length,T,L,$;if(h.pop(),l.push(h),h=null,!!C){if(w&1){if(L=E[0],(T=L.length-1)>0){for(u||(o.polygonStart(),u=!0),o.lineStart(),M=0;M<T;++M)o.point(($=L[M])[0],$[1]);o.lineEnd()}return}C>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Yu))}}return f}}function Yu(n){return n.length>1}function Wu(n,t){return((n=n.x)[0]<0?n[1]-ut-I:ut-n[1])-((t=t.x)[0]<0?t[1]-ut-I:ut-t[1])}const fr=Os(function(){return!0},Vu,Gu,[-F,-ut]);function Vu(n){var t=NaN,e=NaN,i=NaN,o;return{lineStart:function(){n.lineStart(),o=1},point:function(r,s){var a=r>0?F:-F,u=B(r-t);B(u-F)<I?(n.point(t,e=(e+s)/2>0?ut:-ut),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(r,e),o=0):i!==a&&u>=F&&(B(t-i)<I&&(t-=i*I),B(r-a)<I&&(r-=a*I),e=Zu(t,e,r,s),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),o=0),n.point(t=r,e=s),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-o}}}function Zu(n,t,e,i){var o,r,s=O(n-e);return B(s)>I?Ru((O(t)*(r=R(i))*O(e)-O(i)*(o=R(t))*O(n))/(o*r*s)):(t+i)/2}function Gu(n,t,e,i){var o;if(n==null)o=e*ut,i.point(-F,o),i.point(0,o),i.point(F,o),i.point(F,0),i.point(F,-o),i.point(0,-o),i.point(-F,-o),i.point(-F,0),i.point(-F,o);else if(B(n[0]-t[0])>I){var r=n[0]<t[0]?F:-F;o=e*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(t[0],t[1])}function Uu(n){var t=R(n),e=2*j,i=t>0,o=B(t)>I;function r(c,h,f,d){Xu(d,n,e,f,c,h)}function s(c,h){return R(c)*R(h)>t}function a(c){var h,f,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,v){var b=[m,v],y,w=s(m,v),E=i?w?0:l(m,v):w?l(m+(m<0?F:-F),v):0;if(!h&&(p=d=w)&&c.lineStart(),w!==d&&(y=u(h,b),(!y||pn(h,y)||pn(b,y))&&(b[2]=1)),w!==d)g=0,w?(c.lineStart(),y=u(b,h),c.point(y[0],y[1])):(y=u(h,b),c.point(y[0],y[1],2),c.lineEnd()),h=y;else if(o&&h&&i^w){var M;!(E&f)&&(M=u(b,h,!0))&&(g=0,i?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}w&&(!h||!pn(h,b))&&c.point(b[0],b[1]),h=b,d=w,f=E},lineEnd:function(){d&&c.lineEnd(),h=null},clean:function(){return g|(p&&d)<<1}}}function u(c,h,f){var d=de(c),p=de(h),g=[1,0,0],m=Pn(d,p),v=on(m,m),b=m[0],y=v-b*b;if(!y)return!f&&c;var w=t*v/y,E=-t*b/y,M=Pn(g,m),C=rn(g,w),T=rn(m,E);li(C,T);var L=M,$=on(C,L),_=on(L,L),X=$*$-_*(on(C,C)-1);if(!(X<0)){var A=pt(X),z=rn(L,(-$-A)/_);if(li(z,C),z=_i(z),!f)return z;var x=c[0],k=h[0],q=c[1],V=h[1],G;k<x&&(G=x,x=k,k=G);var me=k-x,Tt=B(me-F)<I,Dt=Tt||me<I;if(!Tt&&V<q&&(G=q,q=V,V=G),Dt?Tt?q+V>0^z[1]<(B(z[0]-x)<I?q:V):q<=z[1]&&z[1]<=V:me>F^(x<=z[0]&&z[0]<=k)){var _t=rn(L,(-$+A)/_);return li(_t,C),[z,_i(_t)]}}}function l(c,h){var f=i?n:F-n,d=0;return c<-f?d|=1:c>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return Os(s,a,r,i?[0,-n]:[-F,n-F])}function Ku(n,t,e,i,o,r){var s=n[0],a=n[1],u=t[0],l=t[1],c=0,h=1,f=u-s,d=l-a,p;if(p=e-s,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>c&&(c=p)}if(p=o-s,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<h&&(h=p)}if(p=i-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>c&&(c=p)}if(p=r-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<h&&(h=p)}return c>0&&(n[0]=s+c*f,n[1]=a+c*d),h<1&&(t[0]=s+h*f,t[1]=a+h*d),!0}}}}}var Me=1e9,an=-Me;function Ju(n,t,e,i){function o(l,c){return n<=l&&l<=e&&t<=c&&c<=i}function r(l,c,h,f){var d=0,p=0;if(l==null||(d=s(l,h))!==(p=s(c,h))||u(l,c)<0^h>0)do f.point(d===0||d===3?n:e,d>1?i:t);while((d=(d+h+4)%4)!==p);else f.point(c[0],c[1])}function s(l,c){return B(l[0]-n)<I?c>0?0:3:B(l[0]-e)<I?c>0?2:1:B(l[1]-t)<I?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var h=s(l,1),f=s(c,1);return h!==f?h-f:h===0?c[1]-l[1]:h===1?l[0]-c[0]:h===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,h=_s(),f,d,p,g,m,v,b,y,w,E,M,C={point:T,lineStart:X,lineEnd:A,polygonStart:$,polygonEnd:_};function T(x,k){o(x,k)&&c.point(x,k)}function L(){for(var x=0,k=0,q=d.length;k<q;++k)for(var V=d[k],G=1,me=V.length,Tt=V[0],Dt,_t,He=Tt[0],Kt=Tt[1];G<me;++G)Dt=He,_t=Kt,Tt=V[G],He=Tt[0],Kt=Tt[1],_t<=i?Kt>i&&(He-Dt)*(i-_t)>(Kt-_t)*(n-Dt)&&++x:Kt<=i&&(He-Dt)*(i-_t)<(Kt-_t)*(n-Dt)&&--x;return x}function $(){c=h,f=[],d=[],M=!0}function _(){var x=L(),k=M&&x,q=(f=Ur(f)).length;(k||q)&&(l.polygonStart(),k&&(l.lineStart(),r(null,null,1,l),l.lineEnd()),q&&As(f,a,x,r,l),l.polygonEnd()),c=l,f=d=p=null}function X(){C.point=z,d&&d.push(p=[]),E=!0,w=!1,b=y=NaN}function A(){f&&(z(g,m),v&&w&&h.rejoin(),f.push(h.result())),C.point=T,w&&c.lineEnd()}function z(x,k){var q=o(x,k);if(d&&p.push([x,k]),E)g=x,m=k,v=q,E=!1,q&&(c.lineStart(),c.point(x,k));else if(q&&w)c.point(x,k);else{var V=[b=Math.max(an,Math.min(Me,b)),y=Math.max(an,Math.min(Me,y))],G=[x=Math.max(an,Math.min(Me,x)),k=Math.max(an,Math.min(Me,k))];Ku(V,G,n,t,e,i)?(w||(c.lineStart(),c.point(V[0],V[1])),c.point(G[0],G[1]),q||c.lineEnd(),M=!1):q&&(c.lineStart(),c.point(x,k),M=!1)}b=x,y=k,w=q}return C}}function dr(n,t,e){var i=ae(n,t-I,e).concat(t);return function(o){return i.map(function(r){return[o,r]})}}function pr(n,t,e){var i=ae(n,t-I,e).concat(t);return function(o){return i.map(function(r){return[r,o]})}}function Qu(){var n,t,e,i,o,r,s,a,u=10,l=u,c=90,h=360,f,d,p,g,m=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return ae(nn(i/c)*c,e,c).map(p).concat(ae(nn(a/h)*h,s,h).map(g)).concat(ae(nn(t/u)*u,n,u).filter(function(y){return B(y%c)>I}).map(f)).concat(ae(nn(r/l)*l,o,l).filter(function(y){return B(y%h)>I}).map(d))}return v.lines=function(){return b().map(function(y){return{type:"LineString",coordinates:y}})},v.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(e).reverse().slice(1),g(a).reverse().slice(1))]}},v.extent=function(y){return arguments.length?v.extentMajor(y).extentMinor(y):v.extentMinor()},v.extentMajor=function(y){return arguments.length?(i=+y[0][0],e=+y[1][0],a=+y[0][1],s=+y[1][1],i>e&&(y=i,i=e,e=y),a>s&&(y=a,a=s,s=y),v.precision(m)):[[i,a],[e,s]]},v.extentMinor=function(y){return arguments.length?(t=+y[0][0],n=+y[1][0],r=+y[0][1],o=+y[1][1],t>n&&(y=t,t=n,n=y),r>o&&(y=r,r=o,o=y),v.precision(m)):[[t,r],[n,o]]},v.step=function(y){return arguments.length?v.stepMajor(y).stepMinor(y):v.stepMinor()},v.stepMajor=function(y){return arguments.length?(c=+y[0],h=+y[1],v):[c,h]},v.stepMinor=function(y){return arguments.length?(u=+y[0],l=+y[1],v):[u,l]},v.precision=function(y){return arguments.length?(m=+y,f=dr(r,o,90),d=pr(t,n,m),p=dr(a,s,90),g=pr(i,e,m),v):m},v.extentMajor([[-180,-90+I],[180,90-I]]).extentMinor([[-180,-80-I],[180,80+I]])}function th(n,t){var e=n[0]*j,i=n[1]*j,o=t[0]*j,r=t[1]*j,s=R(i),a=O(i),u=R(r),l=O(r),c=s*R(e),h=s*O(e),f=u*R(o),d=u*O(o),p=2*Pt(pt(er(r-i)+s*u*er(o-e))),g=O(p),m=p?function(v){var b=O(v*=p)/g,y=O(p-v)/g,w=y*c+b*f,E=y*h+b*d,M=y*a+b*l;return[Mt(E,w)*U,Mt(M,pt(w*w+E*E))*U]}:function(){return[e*U,i*U]};return m.distance=p,m}const Ii=n=>n;var ui=new St,Ni=new St,Ls,ks,Fi,Di,kt={point:it,lineStart:it,lineEnd:it,polygonStart:function(){kt.lineStart=eh,kt.lineEnd=ih},polygonEnd:function(){kt.lineStart=kt.lineEnd=kt.point=it,ui.add(B(Ni)),Ni=new St},result:function(){var n=ui/2;return ui=new St,n}};function eh(){kt.point=nh}function nh(n,t){kt.point=Rs,Ls=Fi=n,ks=Di=t}function Rs(n,t){Ni.add(Di*n-Fi*t),Fi=n,Di=t}function ih(){Rs(Ls,ks)}var pe=1/0,Rn=pe,Ne=-pe,zn=Ne,In={point:oh,lineStart:it,lineEnd:it,polygonStart:it,polygonEnd:it,result:function(){var n=[[pe,Rn],[Ne,zn]];return Ne=zn=-(Rn=pe=1/0),n}};function oh(n,t){n<pe&&(pe=n),n>Ne&&(Ne=n),t<Rn&&(Rn=t),t>zn&&(zn=t)}var $i=0,Hi=0,Pe=0,Nn=0,Fn=0,ce=0,ji=0,Bi=0,Ce=0,zs,Is,yt,bt,ct={point:Ut,lineStart:gr,lineEnd:mr,polygonStart:function(){ct.lineStart=ah,ct.lineEnd=lh},polygonEnd:function(){ct.point=Ut,ct.lineStart=gr,ct.lineEnd=mr},result:function(){var n=Ce?[ji/Ce,Bi/Ce]:ce?[Nn/ce,Fn/ce]:Pe?[$i/Pe,Hi/Pe]:[NaN,NaN];return $i=Hi=Pe=Nn=Fn=ce=ji=Bi=Ce=0,n}};function Ut(n,t){$i+=n,Hi+=t,++Pe}function gr(){ct.point=rh}function rh(n,t){ct.point=sh,Ut(yt=n,bt=t)}function sh(n,t){var e=n-yt,i=t-bt,o=pt(e*e+i*i);Nn+=o*(yt+n)/2,Fn+=o*(bt+t)/2,ce+=o,Ut(yt=n,bt=t)}function mr(){ct.point=Ut}function ah(){ct.point=ch}function lh(){Ns(zs,Is)}function ch(n,t){ct.point=Ns,Ut(zs=yt=n,Is=bt=t)}function Ns(n,t){var e=n-yt,i=t-bt,o=pt(e*e+i*i);Nn+=o*(yt+n)/2,Fn+=o*(bt+t)/2,ce+=o,o=bt*n-yt*t,ji+=o*(yt+n),Bi+=o*(bt+t),Ce+=o*3,Ut(yt=n,bt=t)}function Fs(n){this._context=n}Fs.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,ht);break}}},result:it};var Xi=new St,hi,Ds,$s,Te,_e,Fe={point:it,lineStart:function(){Fe.point=uh},lineEnd:function(){hi&&Hs(Ds,$s),Fe.point=it},polygonStart:function(){hi=!0},polygonEnd:function(){hi=null},result:function(){var n=+Xi;return Xi=new St,n}};function uh(n,t){Fe.point=Hs,Ds=Te=n,$s=_e=t}function Hs(n,t){Te-=n,_e-=t,Xi.add(pt(Te*Te+_e*_e)),Te=n,_e=t}let vr,Dn,yr,br;class wr{constructor(t){this._append=t==null?js:hh(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==yr||this._append!==Dn){const i=this._radius,o=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,yr=i,Dn=this._append,br=this._,this._=o}this._+=br;break}}}result(){const t=this._;return this._="",t.length?t:null}}function js(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function hh(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return js;if(t!==vr){const e=10**t;vr=t,Dn=function(o){let r=1;this._+=o[0];for(const s=o.length;r<s;++r)this._+=Math.round(arguments[r]*e)/e+o[r]}}return Dn}function Bs(n,t){let e=3,i=4.5,o,r;function s(a){return a&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),Xt(a,o(r))),r.result()}return s.area=function(a){return Xt(a,o(kt)),kt.result()},s.measure=function(a){return Xt(a,o(Fe)),Fe.result()},s.bounds=function(a){return Xt(a,o(In)),In.result()},s.centroid=function(a){return Xt(a,o(ct)),ct.result()},s.projection=function(a){return arguments.length?(o=a==null?(n=null,Ii):(n=a).stream,s):n},s.context=function(a){return arguments.length?(r=a==null?(t=null,new wr(e)):new Fs(t=a),typeof i!="function"&&r.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(r.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t===null&&(r=new wr(e)),s},s.projection(n).digits(e).context(t)}function no(n){return function(t){var e=new qi;for(var i in n)e[i]=n[i];return e.stream=t,e}}function qi(){}qi.prototype={constructor:qi,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function io(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),Xt(e,n.stream(In)),t(In.result()),i!=null&&n.clipExtent(i),n}function Xs(n,t,e){return io(n,function(i){var o=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(o/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+t[0][0]+(o-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([a,u])},e)}function fh(n,t,e){return Xs(n,[[0,0],t],e)}function dh(n,t,e){return io(n,function(i){var o=+t,r=o/(i[1][0]-i[0][0]),s=(o-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];n.scale(150*r).translate([s,a])},e)}function ph(n,t,e){return io(n,function(i){var o=+t,r=o/(i[1][1]-i[0][1]),s=-r*i[0][0],a=(o-r*(i[1][1]+i[0][1]))/2;n.scale(150*r).translate([s,a])},e)}var xr=16,gh=R(30*j);function Sr(n,t){return+t?vh(n,t):mh(n)}function mh(n){return no({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function vh(n,t){function e(i,o,r,s,a,u,l,c,h,f,d,p,g,m){var v=l-i,b=c-o,y=v*v+b*b;if(y>4*t&&g--){var w=s+f,E=a+d,M=u+p,C=pt(w*w+E*E+M*M),T=Pt(M/=C),L=B(B(M)-1)<I||B(r-h)<I?(r+h)/2:Mt(E,w),$=n(L,T),_=$[0],X=$[1],A=_-i,z=X-o,x=b*A-v*z;(x*x/y>t||B((v*A+b*z)/y-.5)>.3||s*f+a*d+u*p<gh)&&(e(i,o,r,s,a,u,_,X,L,w/=C,E/=C,M,g,m),m.point(_,X),e(_,X,L,w,E,M,l,c,h,f,d,p,g,m))}}return function(i){var o,r,s,a,u,l,c,h,f,d,p,g,m={point:v,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),m.lineStart=E},polygonEnd:function(){i.polygonEnd(),m.lineStart=b}};function v(T,L){T=n(T,L),i.point(T[0],T[1])}function b(){h=NaN,m.point=y,i.lineStart()}function y(T,L){var $=de([T,L]),_=n(T,L);e(h,f,c,d,p,g,h=_[0],f=_[1],c=T,d=$[0],p=$[1],g=$[2],xr,i),i.point(h,f)}function w(){m.point=v,i.lineEnd()}function E(){b(),m.point=M,m.lineEnd=C}function M(T,L){y(o=T,L),r=h,s=f,a=d,u=p,l=g,m.point=y}function C(){e(h,f,c,d,p,g,r,s,o,a,u,l,xr,i),m.lineEnd=w,w()}return m}}var yh=no({point:function(n,t){this.stream.point(n*j,t*j)}});function bh(n){return no({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function wh(n,t,e,i,o){function r(s,a){return s*=i,a*=o,[t+n*s,e-n*a]}return r.invert=function(s,a){return[(s-t)/n*i,(e-a)/n*o]},r}function Er(n,t,e,i,o,r){if(!r)return wh(n,t,e,i,o);var s=R(r),a=O(r),u=s*n,l=a*n,c=s/n,h=a/n,f=(a*e-s*t)/n,d=(a*t+s*e)/n;function p(g,m){return g*=i,m*=o,[u*g-l*m+t,e-l*g-u*m]}return p.invert=function(g,m){return[i*(c*g-h*m+f),o*(d-h*g-c*m)]},p}function xh(n){return Sh(function(){return n})()}function Sh(n){var t,e=150,i=480,o=250,r=0,s=0,a=0,u=0,l=0,c,h=0,f=1,d=1,p=null,g=fr,m=null,v,b,y,w=Ii,E=.5,M,C,T,L,$;function _(x){return T(x[0]*j,x[1]*j)}function X(x){return x=T.invert(x[0],x[1]),x&&[x[0]*U,x[1]*U]}_.stream=function(x){return L&&$===x?L:L=yh(bh(c)(g(M(w($=x)))))},_.preclip=function(x){return arguments.length?(g=x,p=void 0,z()):g},_.postclip=function(x){return arguments.length?(w=x,m=v=b=y=null,z()):w},_.clipAngle=function(x){return arguments.length?(g=+x?Uu(p=x*j):(p=null,fr),z()):p*U},_.clipExtent=function(x){return arguments.length?(w=x==null?(m=v=b=y=null,Ii):Ju(m=+x[0][0],v=+x[0][1],b=+x[1][0],y=+x[1][1]),z()):m==null?null:[[m,v],[b,y]]},_.scale=function(x){return arguments.length?(e=+x,A()):e},_.translate=function(x){return arguments.length?(i=+x[0],o=+x[1],A()):[i,o]},_.center=function(x){return arguments.length?(r=x[0]%360*j,s=x[1]%360*j,A()):[r*U,s*U]},_.rotate=function(x){return arguments.length?(a=x[0]%360*j,u=x[1]%360*j,l=x.length>2?x[2]%360*j:0,A()):[a*U,u*U,l*U]},_.angle=function(x){return arguments.length?(h=x%360*j,A()):h*U},_.reflectX=function(x){return arguments.length?(f=x?-1:1,A()):f<0},_.reflectY=function(x){return arguments.length?(d=x?-1:1,A()):d<0},_.precision=function(x){return arguments.length?(M=Sr(C,E=x*x),z()):pt(E)},_.fitExtent=function(x,k){return Xs(_,x,k)},_.fitSize=function(x,k){return fh(_,x,k)},_.fitWidth=function(x,k){return dh(_,x,k)},_.fitHeight=function(x,k){return ph(_,x,k)};function A(){var x=Er(e,0,0,f,d,h).apply(null,t(r,s)),k=Er(e,i-x[0],o-x[1],f,d,h);return c=Bu(a,u,l),C=Ri(t,k),T=Ri(c,C),M=Sr(C,E),z()}function z(){return L=$=null,_}return function(){return t=n.apply(this,arguments),_.invert=t.invert&&X,A()}}function Eh(n){return function(t,e){var i=pt(t*t+e*e),o=n(i),r=O(o),s=R(o);return[Mt(t*r,i*s),Pt(i&&e*r/i)]}}function qs(n,t){return[R(t)*O(n),O(t)]}qs.invert=Eh(Pt);function Mh(){return xh(qs).scale(249.5).clipAngle(90+I)}function Ph(n){var t=0,e=n.children,i=e&&e.length;if(!i)t=1;else for(;--i>=0;)t+=e[i].value;n.value=t}function Ch(){return this.eachAfter(Ph)}function Th(n,t){let e=-1;for(const i of this)n.call(t,i,++e,this);return this}function _h(n,t){for(var e=this,i=[e],o,r,s=-1;e=i.pop();)if(n.call(t,e,++s,this),o=e.children)for(r=o.length-1;r>=0;--r)i.push(o[r]);return this}function Ah(n,t){for(var e=this,i=[e],o=[],r,s,a,u=-1;e=i.pop();)if(o.push(e),r=e.children)for(s=0,a=r.length;s<a;++s)i.push(r[s]);for(;e=o.pop();)n.call(t,e,++u,this);return this}function Oh(n,t){let e=-1;for(const i of this)if(n.call(t,i,++e,this))return i}function Lh(n){return this.eachAfter(function(t){for(var e=+n(t.data)||0,i=t.children,o=i&&i.length;--o>=0;)e+=i[o].value;t.value=e})}function kh(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function Rh(n){for(var t=this,e=zh(t,n),i=[t];t!==e;)t=t.parent,i.push(t);for(var o=i.length;n!==e;)i.splice(o,0,n),n=n.parent;return i}function zh(n,t){if(n===t)return n;var e=n.ancestors(),i=t.ancestors(),o=null;for(n=e.pop(),t=i.pop();n===t;)o=n,n=e.pop(),t=i.pop();return o}function Ih(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function Nh(){return Array.from(this)}function Fh(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function Dh(){var n=this,t=[];return n.each(function(e){e!==n&&t.push({source:e.parent,target:e})}),t}function*$h(){var n=this,t,e=[n],i,o,r;do for(t=e.reverse(),e=[];n=t.pop();)if(yield n,i=n.children)for(o=0,r=i.length;o<r;++o)e.push(i[o]);while(e.length)}function oo(n,t){n instanceof Map?(n=[void 0,n],t===void 0&&(t=Bh)):t===void 0&&(t=jh);for(var e=new $n(n),i,o=[e],r,s,a,u;i=o.pop();)if((s=t(i.data))&&(u=(s=Array.from(s)).length))for(i.children=s,a=u-1;a>=0;--a)o.push(r=s[a]=new $n(s[a])),r.parent=i,r.depth=i.depth+1;return e.eachBefore(qh)}function Hh(){return oo(this).eachBefore(Xh)}function jh(n){return n.children}function Bh(n){return Array.isArray(n)?n[1]:null}function Xh(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function qh(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function $n(n){this.data=n,this.depth=this.height=0,this.parent=null}$n.prototype=oo.prototype={constructor:$n,count:Ch,each:Th,eachAfter:Ah,eachBefore:_h,find:Oh,sum:Lh,sort:kh,path:Rh,ancestors:Ih,descendants:Nh,leaves:Fh,links:Dh,copy:Hh,[Symbol.iterator]:$h};function Yh(n){return n==null?null:Wh(n)}function Wh(n){if(typeof n!="function")throw new Error;return n}function Mr(){return 0}function Vh(n){return function(){return n}}const Zh=1664525,Gh=1013904223,Pr=4294967296;function Uh(){let n=1;return()=>(n=(Zh*n+Gh)%Pr)/Pr}function Kh(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Jh(n,t){let e=n.length,i,o;for(;e;)o=t()*e--|0,i=n[e],n[e]=n[o],n[o]=i;return n}function Qh(n,t){for(var e=0,i=(n=Jh(Array.from(n),t)).length,o=[],r,s;e<i;)r=n[e],s&&Ys(s,r)?++e:(s=ef(o=tf(o,r)),e=0);return s}function tf(n,t){var e,i;if(fi(t,n))return[t];for(e=0;e<n.length;++e)if(ln(t,n[e])&&fi(Ae(n[e],t),n))return[n[e],t];for(e=0;e<n.length-1;++e)for(i=e+1;i<n.length;++i)if(ln(Ae(n[e],n[i]),t)&&ln(Ae(n[e],t),n[i])&&ln(Ae(n[i],t),n[e])&&fi(Ws(n[e],n[i],t),n))return[n[e],n[i],t];throw new Error}function ln(n,t){var e=n.r-t.r,i=t.x-n.x,o=t.y-n.y;return e<0||e*e<i*i+o*o}function Ys(n,t){var e=n.r-t.r+Math.max(n.r,t.r,1)*1e-9,i=t.x-n.x,o=t.y-n.y;return e>0&&e*e>i*i+o*o}function fi(n,t){for(var e=0;e<t.length;++e)if(!Ys(n,t[e]))return!1;return!0}function ef(n){switch(n.length){case 1:return nf(n[0]);case 2:return Ae(n[0],n[1]);case 3:return Ws(n[0],n[1],n[2])}}function nf(n){return{x:n.x,y:n.y,r:n.r}}function Ae(n,t){var e=n.x,i=n.y,o=n.r,r=t.x,s=t.y,a=t.r,u=r-e,l=s-i,c=a-o,h=Math.sqrt(u*u+l*l);return{x:(e+r+u/h*c)/2,y:(i+s+l/h*c)/2,r:(h+o+a)/2}}function Ws(n,t,e){var i=n.x,o=n.y,r=n.r,s=t.x,a=t.y,u=t.r,l=e.x,c=e.y,h=e.r,f=i-s,d=i-l,p=o-a,g=o-c,m=u-r,v=h-r,b=i*i+o*o-r*r,y=b-s*s-a*a+u*u,w=b-l*l-c*c+h*h,E=d*p-f*g,M=(p*w-g*y)/(E*2)-i,C=(g*m-p*v)/E,T=(d*y-f*w)/(E*2)-o,L=(f*v-d*m)/E,$=C*C+L*L-1,_=2*(r+M*C+T*L),X=M*M+T*T-r*r,A=-(Math.abs($)>1e-6?(_+Math.sqrt(_*_-4*$*X))/(2*$):X/_);return{x:i+M+C*A,y:o+T+L*A,r:A}}function Cr(n,t,e){var i=n.x-t.x,o,r,s=n.y-t.y,a,u,l=i*i+s*s;l?(r=t.r+e.r,r*=r,u=n.r+e.r,u*=u,r>u?(o=(l+u-r)/(2*l),a=Math.sqrt(Math.max(0,u/l-o*o)),e.x=n.x-o*i-a*s,e.y=n.y-o*s+a*i):(o=(l+r-u)/(2*l),a=Math.sqrt(Math.max(0,r/l-o*o)),e.x=t.x+o*i-a*s,e.y=t.y+o*s+a*i)):(e.x=t.x+e.r,e.y=t.y)}function Tr(n,t){var e=n.r+t.r-1e-6,i=t.x-n.x,o=t.y-n.y;return e>0&&e*e>i*i+o*o}function _r(n){var t=n._,e=n.next._,i=t.r+e.r,o=(t.x*e.r+e.x*t.r)/i,r=(t.y*e.r+e.y*t.r)/i;return o*o+r*r}function cn(n){this._=n,this.next=null,this.previous=null}function of(n,t){if(!(r=(n=Kh(n)).length))return 0;var e,i,o,r,s,a,u,l,c,h,f;if(e=n[0],e.x=0,e.y=0,!(r>1))return e.r;if(i=n[1],e.x=-i.r,i.x=e.r,i.y=0,!(r>2))return e.r+i.r;Cr(i,e,o=n[2]),e=new cn(e),i=new cn(i),o=new cn(o),e.next=o.previous=i,i.next=e.previous=o,o.next=i.previous=e;t:for(u=3;u<r;++u){Cr(e._,i._,o=n[u]),o=new cn(o),l=i.next,c=e.previous,h=i._.r,f=e._.r;do if(h<=f){if(Tr(l._,o._)){i=l,e.next=i,i.previous=e,--u;continue t}h+=l._.r,l=l.next}else{if(Tr(c._,o._)){e=c,e.next=i,i.previous=e,--u;continue t}f+=c._.r,c=c.previous}while(l!==c.next);for(o.previous=e,o.next=i,e.next=i.previous=i=o,s=_r(e);(o=o.next)!==i;)(a=_r(o))<s&&(e=o,s=a);i=e.next}for(e=[i._],o=i;(o=o.next)!==i;)e.push(o._);for(o=Qh(e,t),u=0;u<r;++u)e=n[u],e.x-=o.x,e.y-=o.y;return o.r}function rf(n){return Math.sqrt(n.value)}function sf(){var n=null,t=1,e=1,i=Mr;function o(r){const s=Uh();return r.x=t/2,r.y=e/2,n?r.eachBefore(Ar(n)).eachAfter(di(i,.5,s)).eachBefore(Or(1)):r.eachBefore(Ar(rf)).eachAfter(di(Mr,1,s)).eachAfter(di(i,r.r/Math.min(t,e),s)).eachBefore(Or(Math.min(t,e)/(2*r.r))),r}return o.radius=function(r){return arguments.length?(n=Yh(r),o):n},o.size=function(r){return arguments.length?(t=+r[0],e=+r[1],o):[t,e]},o.padding=function(r){return arguments.length?(i=typeof r=="function"?r:Vh(+r),o):i},o}function Ar(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0))}}function di(n,t,e){return function(i){if(o=i.children){var o,r,s=o.length,a=n(i)*t||0,u;if(a)for(r=0;r<s;++r)o[r].r+=a;if(u=of(o,e),a)for(r=0;r<s;++r)o[r].r-=a;i.r=u+a}}}function Or(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function Oe(n,t,e){this.k=n,this.x=t,this.y=e}Oe.prototype={constructor:Oe,scale:function(n){return n===1?this:new Oe(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Oe(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oe.prototype;function af(n){return n}function lf(n){if(n==null)return af;var t,e,i=n.scale[0],o=n.scale[1],r=n.translate[0],s=n.translate[1];return function(a,u){u||(t=e=0);var l=2,c=a.length,h=new Array(c);for(h[0]=(t+=a[0])*i+r,h[1]=(e+=a[1])*o+s;l<c;)h[l]=a[l],++l;return h}}function cf(n,t){for(var e,i=n.length,o=i-t;o<--i;)e=n[o],n[o++]=n[i],n[i]=e}function Vs(n,t){return typeof t=="string"&&(t=n.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(e){return Lr(n,e)})}:Lr(n,t)}function Lr(n,t){var e=t.id,i=t.bbox,o=t.properties==null?{}:t.properties,r=Zs(n,t);return e==null&&i==null?{type:"Feature",properties:o,geometry:r}:i==null?{type:"Feature",id:e,properties:o,geometry:r}:{type:"Feature",id:e,bbox:i,properties:o,geometry:r}}function Zs(n,t){var e=lf(n.transform),i=n.arcs;function o(c,h){h.length&&h.pop();for(var f=i[c<0?~c:c],d=0,p=f.length;d<p;++d)h.push(e(f[d],d));c<0&&cf(h,p)}function r(c){return e(c)}function s(c){for(var h=[],f=0,d=c.length;f<d;++f)o(c[f],h);return h.length<2&&h.push(h[0]),h}function a(c){for(var h=s(c);h.length<4;)h.push(h[0]);return h}function u(c){return c.map(a)}function l(c){var h=c.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:c.geometries.map(l)};case"Point":f=r(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(r);break;case"LineString":f=s(c.arcs);break;case"MultiLineString":f=c.arcs.map(s);break;case"Polygon":f=u(c.arcs);break;case"MultiPolygon":f=c.arcs.map(u);break;default:return null}return{type:h,coordinates:f}}return l(t)}function uf(n,t){var e={},i={},o={},r=[],s=-1;t.forEach(function(l,c){var h=n.arcs[l<0?~l:l],f;h.length<3&&!h[1][0]&&!h[1][1]&&(f=t[++s],t[s]=l,t[c]=f)}),t.forEach(function(l){var c=a(l),h=c[0],f=c[1],d,p;if(d=o[h])if(delete o[d.end],d.push(l),d.end=f,p=i[f]){delete i[p.start];var g=p===d?d:d.concat(p);i[g.start=d.start]=o[g.end=p.end]=g}else i[d.start]=o[d.end]=d;else if(d=i[f])if(delete i[d.start],d.unshift(l),d.start=h,p=o[h]){delete o[p.end];var m=p===d?d:p.concat(d);i[m.start=p.start]=o[m.end=d.end]=m}else i[d.start]=o[d.end]=d;else d=[l],i[d.start=h]=o[d.end=f]=d});function a(l){var c=n.arcs[l<0?~l:l],h=c[0],f;return n.transform?(f=[0,0],c.forEach(function(d){f[0]+=d[0],f[1]+=d[1]})):f=c[c.length-1],l<0?[f,h]:[h,f]}function u(l,c){for(var h in l){var f=l[h];delete c[f.start],delete f.start,delete f.end,f.forEach(function(d){e[d<0?~d:d]=1}),r.push(f)}}return u(o,i),u(i,o),t.forEach(function(l){e[l<0?~l:l]||r.push([l])}),r}function Gs(n){return Zs(n,hf.apply(this,arguments))}function hf(n,t,e){var i,o,r;if(arguments.length>1)i=ff(n,t,e);else for(o=0,i=new Array(r=n.arcs.length);o<r;++o)i[o]=o;return{type:"MultiLineString",arcs:uf(n,i)}}function ff(n,t,e){var i=[],o=[],r;function s(h){var f=h<0?~h:h;(o[f]||(o[f]=[])).push({i:h,g:r})}function a(h){h.forEach(s)}function u(h){h.forEach(a)}function l(h){h.forEach(u)}function c(h){switch(r=h,h.type){case"GeometryCollection":h.geometries.forEach(c);break;case"LineString":a(h.arcs);break;case"MultiLineString":case"Polygon":u(h.arcs);break;case"MultiPolygon":l(h.arcs);break}}return c(t),o.forEach(e==null?function(h){i.push(h[0].i)}:function(h){e(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}const un=Object.freeze({FLIGHT:1250,PAUSE:1e3}),Us=["United States of America","France","Italy","Spain","Germany","Portugal","Netherlands","Austria","Slovenia","Hungary","Croatia","Czech Republic","Japan","South Korea","Mexico","Chile","Uruguay","Puerto Rico","Vietnam","Morocco"],oe={ocean:re("--world-ocean-color"),graticule:re("--world-graticule-color"),border:re("--world-border-color"),visited:re("--world-visited-country-color"),land:re("--world-land-color"),flight:re("--world-flight-path-color")};var Hn,Ks;const Ft=class Ft{static fromAngles([t,e,i]){t*=Math.PI/360,e*=Math.PI/360,i*=Math.PI/360;const o=Math.sin(t),r=Math.cos(t),s=Math.sin(e),a=Math.cos(e),u=Math.sin(i),l=Math.cos(i);return[r*a*l+o*s*u,o*a*l-r*s*u,r*s*l+o*a*u,r*a*u-o*s*l]}static toAngles([t,e,i,o]){return[Math.atan2(2*(t*e+i*o),1-2*(e*e+i*i))*180/Math.PI,Math.asin(Math.max(-1,Math.min(1,2*(t*i-o*e))))*180/Math.PI,Math.atan2(2*(t*o+e*i),1-2*(i*i+o*o))*180/Math.PI]}static interpolateAngles(t,e){const i=Ft.interpolate(Ft.fromAngles(t),Ft.fromAngles(e));return o=>Ft.toAngles(i(o))}static interpolate([t,e,i,o],[r,s,a,u]){var d;let l=t*r+e*s+i*a+o*u;if(l<0&&(r=-r,s=-s,a=-a,u=-u,l=-l),l>.9995)return ao(d=Ft,Hn,Ks).call(d,[t,e,i,o],[r,s,a,u]);const c=Math.acos(Math.max(-1,Math.min(1,l))),h=new Array(4),f=Math.hypot(r-=t*l,s-=e*l,a-=i*l,u-=o*l);return r/=f,s/=f,a/=f,u/=f,p=>{const g=c*p,m=Math.sin(g),v=Math.cos(g);return h[0]=t*v+r*m,h[1]=e*v+s*m,h[2]=i*v+a*m,h[3]=o*v+u*m,h}}};Hn=new WeakSet,Ks=function([t,e,i,o],[r,s,a,u]){r-=t,s-=e,a-=i,u-=o;const l=new Array(4);return c=>{const h=Math.hypot(l[0]=t+r*c,l[1]=e+s*c,l[2]=i+a*c,l[3]=o+u*c);return l[0]/=h,l[1]/=h,l[2]/=h,l[3]/=h,l}},so(Ft,Hn);let Yi=Ft;function re(n){return getComputedStyle(document.documentElement).getPropertyValue(n).trim()}function df(n,t){const e=n.features.filter(i=>Us.includes(i.properties.name)&&(!t||i.properties.name!==t.properties.name));return e[Math.floor(Math.random()*e.length)]}document.addEventListener("DOMContentLoaded",async function(){const n=document.querySelector(".world-tour-container"),t=n.clientWidth,e=n.clientHeight,i=20,o=le(".world-tour-container").append("div").attr("class","world-title"),r=le(".world-tour-container").append("svg").attr("width",t).attr("height",e).attr("viewBox",[0,0,t,e]),s=Mh().fitExtent([[10,10],[t-10,e-10]],{type:"Sphere"}),a=Bs(s);r.append("path").attr("class","sphere").attr("fill",oe.ocean),r.append("path").datum(Qu()).attr("class","graticule").attr("fill","none").attr("stroke",oe.graticule).attr("stroke-width","0.5px");async function u(){const l=await Ms("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json"),c=Vs(l,l.objects.countries),h=Gs(l,l.objects.countries,(b,y)=>b!==y);r.selectAll(".country").data(c.features).enter().append("path").attr("class","country").attr("fill",b=>Us.includes(b.properties.name)?oe.visited:oe.land).attr("d",a),r.append("path").datum(h).attr("class","borders").attr("fill","none").attr("stroke",oe.border).attr("d",a);let f,d=[0,0],p,g=[0,0,0],m=null;async function v(){const b=df(c,m);o.text(b.properties.name).classed("highlight",!0),setTimeout(()=>o.classed("highlight",!1),un.FLIGHT),f=d,d=ju(b),p=g,g=[-d[0],i-d[1],0];const y=th(f,d),w=100,E=Array.from({length:w},(M,C)=>{const T=C/(w-1);return y(T)});await Ss().duration(un.FLIGHT).tween("render",()=>M=>{s.rotate(Yi.interpolateAngles(p,g)(M)),r.selectAll("path").attr("d",a),r.select(".flight-path").remove(),r.append("path").attr("class","flight-path").datum({type:"LineString",coordinates:E.slice(0,Math.ceil(M*w))}).attr("d",a).attr("fill","none").attr("stroke",oe.flight).attr("stroke-width",2)}).end(),m=b,setTimeout(v,un.FLIGHT+un.PAUSE)}v()}u()});function pf(n){let t=0,e=0,i=0;n.length==4?(t="0x"+n[1]+n[1],e="0x"+n[2]+n[2],i="0x"+n[3]+n[3]):n.length==7&&(t="0x"+n[1]+n[2],e="0x"+n[3]+n[4],i="0x"+n[5]+n[6]),t/=255,e/=255,i/=255;let o=Math.min(t,e,i),r=Math.max(t,e,i),s=r-o,a=0,u=0,l=0;return s==0?a=0:r==t?a=(e-i)/s%6:r==e?a=(i-t)/s+2:a=(t-e)/s+4,a=Math.round(a*60),a<0&&(a+=360),l=(r+o)/2,u=s==0?0:s/(1-Math.abs(2*l-1)),u=+(u*100).toFixed(1),l=+(l*100).toFixed(1),"hsl("+a+","+u+"%,"+l+"%)"}document.addEventListener("DOMContentLoaded",function(){const n=[{name:"JavaScript",level:4,category:"Languages",url:"https://www.javascript.com/"},{name:"TypeScript",level:5,category:"Languages",url:"https://www.typescriptlang.org/"},{name:"Python",level:5,category:"Languages",url:"https://www.python.org/"},{name:"VBA",level:3,category:"Languages",url:"https://learn.microsoft.com/en-us/office/vba/api/overview/"},{name:"C#",level:2,category:"Languages",url:"https://learn.microsoft.com/en-us/dotnet/csharp/"},{name:"HTML",level:3,category:"Languages",url:"https://developer.mozilla.org/en-US/docs/Web/HTML"},{name:"CSS",level:2,category:"Languages",url:"https://developer.mozilla.org/en-US/docs/Web/CSS"},{name:"Go Lang",level:6,category:"Languages",url:"https://go.dev/"},{name:"React (Vite)",level:6,category:"Frameworks",url:"https://react.dev/"},{name:"Node.js",level:4,category:"Frameworks",url:"https://nodejs.org/docs/latest/api/"},{name:"Express",level:3,category:"Frameworks",url:"https://expressjs.com/"},{name:"Flask",level:3,category:"Frameworks",url:"https://flask.palletsprojects.com/"},{name:"Azure Functions",level:2,category:"Frameworks",url:"https://learn.microsoft.com/en-us/azure/azure-functions/"},{name:"MongoDB",level:4,category:"Storage",url:"https://www.mongodb.com/docs/"},{name:"PostgreSQL",level:5,category:"Storage",url:"https://www.postgresql.org/docs/"},{name:"Azure Blob",level:3,category:"Storage",url:"https://learn.microsoft.com/en-us/azure/storage/blobs/"},{name:"DynamoDB",level:2,category:"Storage",url:"https://aws.amazon.com/dynamodb/"},{name:"Jira",level:6,category:"Management",url:"https://www.atlassian.com/software/jira"},{name:"Confluence",level:5,category:"Management",url:"https://www.atlassian.com/software/confluence"},{name:"SAP",level:3,category:"Management",url:"https://help.sap.com/"},{name:"Creo",level:6,category:"Design",url:"https://www.ptc.com/en/products/creo"},{name:"CATIA",level:6,category:"Design",url:"https://www.3ds.com/products-services/catia/"},{name:"Solidworks",level:4,category:"Design",url:"https://www.solidworks.com/"},{name:"Unity3D",level:3,category:"Design",url:"https://docs.unity3d.com/"},{name:"Windchill",level:4,category:"PLM",url:"https://www.ptc.com/en/products/windchill"},{name:"Enovia",level:4,category:"PLM",url:"https://www.3ds.com/products-services/enovia/"},{name:"SmarTeam",level:3,category:"PLM",url:"https://www.3ds.com/products-services/smarteam/"}];function t(){const o=getComputedStyle(document.documentElement).getPropertyValue("--skill-base-color").trim(),r=pf(o),[s,a,u]=r.match(/\d+/g).map(Number),l=[...new Set(n.map(f=>f.category))],c={};let h=10;return l.forEach(f=>{c[f]=`hsl(${s}, ${a}%, ${h}%)`,h+=10}),c}function e(){const o=document.querySelector(".skills-container");if(!o)return;const r=o.clientWidth,s=o.clientHeight,a=2;o.innerHTML="";const u=t(),l=sf().size([r-a*2,s-a*2]).padding(5),c=l(oo({children:n}).sum(f=>f.level));l(c).leaves().forEach((f,d)=>{const p=document.createElement("div");p.className="skill";const g=document.createElement("a");g.href=f.data.url,g.target="_blank",g.className="skill-name",g.textContent=f.data.name,p.style.background=u[f.data.category],p.style.left=`${f.x-f.r}px`,p.style.top=`${f.y-f.r}px`,p.style.width=`${f.r*2}px`,p.style.height=`${f.r*2}px`,p.style.animationDelay=`${Math.random()*-8}s`,p.style.animationPlayState="running",p.appendChild(g),o.appendChild(p)})}e();let i;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(e,250)})});const Js={California:"CA",Georgia:"GA",Florida:"FL","New York":"NY",Texas:"TX",Washington:"WA",Arizona:"AZ",Hawaii:"HI",Illinois:"IL",Missouri:"MO",Nebraska:"NE",Pennsylvania:"PA","South Carolina":"SC",Tennessee:"TN",Alabama:"AL",Colorado:"CO",Kentucky:"KY","North Carolina":"NC","South Dakota":"SD",Utah:"UT",Wisconsin:"WI",Idaho:"ID",Montana:"MT","New Mexico":"NM",Oregon:"OR",Nevada:"NV",Wyoming:"WY",Kansas:"KS",Connecticut:"CT",Iowa:"IA"},pi={visitedStates:Object.keys(Js)};function se(n){return getComputedStyle(document.documentElement).getPropertyValue(n).trim()}document.addEventListener("DOMContentLoaded",async function(){const n=le("#us-tour").append("div").attr("class","tooltip"),t=975,e=610,i=750,o=le("#us-tour").append("svg").attr("width",t).attr("height",e).attr("viewBox",[0,0,t,e]).attr("style","max-width: 100%; height: auto;"),r=await Ms("https://cdn.jsdelivr.net/npm/us-atlas@3/states-albers-10m.json"),s=Bs();o.append("g").selectAll("path").data(Vs(r,r.objects.states).features).join("path").attr("fill",a=>{const u=a.properties.name;return pi.visitedStates.includes(u)?se("--visited-state-color"):se("--unvisited-state-color")}).attr("d",s).attr("class","state").on("mouseover",function(a,u){const l=u.properties.name;if(!pi.visitedStates.includes(l))return;const c=Js[l];Kl(a),n.html(`${c}`).classed("visible",!0).style("left",`${a.clientX}px`).style("top",`${a.clientY-10}px`),le(this).transition().duration(i).attr("fill",se("--hover-state-color"))}).on("mousemove",function(a){n.style("left",`${a.clientX}px`).style("top",`${a.clientY-10}px`)}).on("mouseout",function(a,u){n.classed("visible",!1),le(this).transition().duration(i).attr("fill",pi.visitedStates.includes(u.properties.name)?se("--visited-state-color"):se("--unvisited-state-color"))}),o.append("path").datum(Gs(r,r.objects.states,(a,u)=>a!==u)).attr("fill","none").attr("stroke",se("--state-border-color")).attr("stroke-linejoin","round").attr("d",s)});N.bind("[data-fancybox]",{});(function(n){var t=n(window),e=n("body"),i=n("#header"),o=null,r=n("#nav");n("#wrapper"),breakpoints({xlarge:["1281px","1680px"],large:["1025px","1280px"],medium:["737px","1024px"],small:["481px","736px"],xsmall:[null,"480px"]}),t.on("load",function(){window.setTimeout(function(){e.removeClass("is-preload")},100)}),browser.canUse("object-fit")||n(".image[data-position]").each(function(){var a=n(this),u=a.children("img");a.css("background-image",'url("'+u.attr("src")+'")').css("background-position",a.data("position")).css("background-size","cover").css("background-repeat","no-repeat"),u.css("opacity","0")});var s=r.find("a");s.addClass("scrolly").on("click",function(){var a=n(this);a.attr("href").charAt(0)=="#"&&(s.removeClass("active"),a.addClass("active").addClass("active-locked"))}).each(function(){var a=n(this),u=a.attr("href"),l=n(u);l.length<1||l.scrollex({mode:"middle",top:"5vh",bottom:"5vh",initialize:function(){l.addClass("inactive")},enter:function(){l.removeClass("inactive"),s.filter(".active-locked").length==0?(s.removeClass("active"),a.addClass("active")):a.hasClass("active-locked")&&a.removeClass("active-locked")}})}),o=n('<div id="titleBar"><a href="#header" class="toggle"></a><span class="title">'+n("#logo").html()+"</span></div>").appendTo(e),i.panel({delay:500,hideOnClick:!0,hideOnSwipe:!0,resetScroll:!0,resetForms:!0,side:"right",target:e,visibleClass:"header-visible"}),n(".scrolly").scrolly({speed:1e3,offset:function(){return breakpoints.active("<=medium")?o.height():0}})})(jQuery);
